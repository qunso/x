/*[CDN]*/!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):e(t)}(this,function(c){var e,f,g,h,F,G,i,j,k,l,m,n,o,p,q,r,s,t,u,v,x,y,z,A,B,C,D,E,H,I,J,Uj,d=(j=(i=[]).concat,k=i.filter,l=i.slice,m=c.document,n={},o={},p={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},q=/^\s*<(\w+|!)[^>]*>/,r=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,s=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,t=/^(?:body|html)$/i,u=/([A-Z])/g,v=["val","css","html","text","data","width","height","offset"],x=m.createElement("table"),y=m.createElement("tr"),z={tr:m.createElement("tbody"),tbody:x,thead:x,tfoot:x,td:y,th:y,"*":m.createElement("div")},A=/complete|loaded|interactive/,B=/^[\w-]*$/,D=(C={}).toString,E={},H=m.createElement("div"),I={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},J=Array.isArray||function(t){return t instanceof Array},E.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=H).appendChild(t),i=~E.qsa(r,e).indexOf(t),o&&H.removeChild(t),i},F=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},G=function(n){return k.call(n,function(t,e){return n.indexOf(t)==e})},E.fragment=function(t,n,i){var o,a,c;return r.test(t)&&(o=g(m.createElement(RegExp.$1))),o||(t.replace&&(t=t.replace(s,"<$1></$2>")),n===e&&(n=q.test(t)&&RegExp.$1),n in z||(n="*"),(c=z[n]).innerHTML=""+t,o=g.each(l.call(c.childNodes),function(){c.removeChild(this)})),P(i)&&(a=g(o),g.each(i,function(t,e){-1<v.indexOf(t)?a[t](e):a.attr(t,e)})),o},E.Z=function(t,e){return new Y(t,e)},E.isZ=function(t){return t instanceof E.Z},E.init=function(t,n){var i,r;if(!t)return E.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&q.test(t))i=E.fragment(t,RegExp.$1,n),t=null;else{if(n!==e)return g(n).find(t);i=E.qsa(m,t)}else{if(L(t))return g(m).ready(t);if(E.isZ(t))return t;if(J(t))r=t,i=k.call(r,function(t){return null!=t});else if(O(t))i=[t],t=null;else if(q.test(t))i=E.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==e)return g(n).find(t);i=E.qsa(m,t)}}return E.Z(i,t)},(g=function(t,e){return E.init(t,e)}).extend=function(n){var i,t=l.call(arguments,1);return"boolean"==typeof n&&(i=n,n=t.shift()),t.forEach(function(t){!function t(n,i,r){for(f in i)r&&(P(i[f])||J(i[f]))?(P(i[f])&&!P(n[f])&&(n[f]={}),J(i[f])&&!J(n[f])&&(n[f]=[]),t(n[f],i[f],r)):i[f]!==e&&(n[f]=i[f])}(n,t,i)}),n},E.qsa=function(t,e){var n,i="#"==e[0],r=!i&&"."==e[0],o=i||r?e.slice(1):e,a=B.test(o);return t.getElementById&&a&&i?(n=t.getElementById(o))?[n]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:l.call(a&&!i&&t.getElementsByClassName?r?t.getElementsByClassName(o):t.getElementsByTagName(e):t.querySelectorAll(e))},g.contains=m.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e=e&&e.parentNode;)if(e===t)return!0;return!1},g.type=K,g.isFunction=L,g.isWindow=M,g.isArray=J,g.isPlainObject=P,g.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},g.isNumeric=function(t){var e=Number(t),n=typeof t;return null!=t&&"boolean"!=n&&("string"!=n||t.length)&&!isNaN(e)&&isFinite(e)||!1},g.inArray=function(t,e,n){return i.indexOf.call(e,t,n)},g.camelCase=F,g.trim=function(t){return null==t?"":String.prototype.trim.call(t)},g.uuid=0,g.support={},g.expr={},g.noop=function(){},g.map=function(t,e){var n,i,r,o,a=[];if(Q(t))for(i=0;i<t.length;i++)null!=(n=e(t[i],i))&&a.push(n);else for(r in t)null!=(n=e(t[r],r))&&a.push(n);return 0<(o=a).length?g.fn.concat.apply([],o):o},g.each=function(t,e){var n,i;if(Q(t)){for(n=0;n<t.length;n++)if(!1===e.call(t[n],n,t[n]))return t}else for(i in t)if(!1===e.call(t[i],i,t[i]))return t;return t},g.grep=function(t,e){return k.call(t,e)},c.JSON&&(g.parseJSON=JSON.parse),g.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){C["[object "+e+"]"]=e.toLowerCase()}),g.fn={constructor:E.Z,length:0,forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,splice:i.splice,indexOf:i.indexOf,concat:function(){var t,e,n=[];for(t=0;t<arguments.length;t++)e=arguments[t],n[t]=E.isZ(e)?e.toArray():e;return j.apply(E.isZ(this)?this.toArray():this,n)},map:function(n){return g(g.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return g(l.apply(this,arguments))},ready:function(t){return A.test(m.readyState)&&m.body?t(g):m.addEventListener("DOMContentLoaded",function(){t(g)},!1),this},get:function(t){return t===e?l.call(this):this[0<=t?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(n){return i.every.call(this,function(t,e){return!1!==n.call(t,e,t)}),this},filter:function(e){return L(e)?this.not(this.not(e)):g(k.call(this,function(t){return E.matches(t,e)}))},add:function(t,e){return g(G(this.concat(g(t,e))))},is:function(t){return 0<this.length&&E.matches(this[0],t)},not:function(n){var i=[];if(L(n)&&n.call!==e)this.each(function(t){n.call(this,t)||i.push(this)});else{var r="string"==typeof n?this.filter(n):Q(n)&&L(n.item)?l.call(n):g(n);this.forEach(function(t){r.indexOf(t)<0&&i.push(t)})}return g(i)},has:function(t){return this.filter(function(){return O(t)?g.contains(this,t):g(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!O(t)?t:g(t)},last:function(){var t=this[this.length-1];return t&&!O(t)?t:g(t)},find:function(t){var n=this;return t?"object"==typeof t?g(t).filter(function(){var e=this;return i.some.call(n,function(t){return g.contains(t,e)})}):1==this.length?g(E.qsa(this[0],t)):this.map(function(){return E.qsa(this,t)}):g()},closest:function(n,i){var r=[],o="object"==typeof n&&g(n);return this.each(function(t,e){for(;e&&!(o?0<=o.indexOf(e):E.matches(e,n));)e=e!==i&&!N(e)&&e.parentNode;e&&r.indexOf(e)<0&&r.push(e)}),g(r)},parents:function(t){for(var e=[],n=this;0<n.length;)n=g.map(n,function(t){if((t=t.parentNode)&&!N(t)&&e.indexOf(t)<0)return e.push(t),t});return $(e,t)},parent:function(t){return $(G(this.pluck("parentNode")),t)},children:function(t){return $(this.map(function(){return X(this)}),t)},contents:function(){return this.map(function(){return this.contentDocument||l.call(this.childNodes)})},siblings:function(t){return $(this.map(function(t,e){return k.call(X(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return g.map(this,function(t){return t[e]})},show:function(){return this.each(function(){var t,e,i;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(t=this.nodeName,n[t]||(e=m.createElement(t),m.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),n[t]=i),n[t]))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(e){var n=L(e);if(this[0]&&!n)var i=g(e).get(0),r=i.parentNode||1<this.length;return this.each(function(t){g(this).wrapAll(n?e.call(this,t):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){var e;for(g(this[0]).before(t=g(t));(e=t.children()).length;)t=e.first();g(t).append(this)}return this},wrapInner:function(r){var o=L(r);return this.each(function(t){var e=g(this),n=e.contents(),i=o?r.call(this,t):r;n.length?n.wrapAll(i):e.append(i)})},unwrap:function(){return this.parent().each(function(){g(this).replaceWith(g(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(n){return this.each(function(){var t=g(this);(n===e?"none"==t.css("display"):n)?t.show():t.hide()})},prev:function(t){return g(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return g(this.pluck("nextElementSibling")).filter(t||"*")},html:function(n){return 0 in arguments?this.each(function(t){var e=this.innerHTML;g(this).empty().append(_(this,n,t,e))}):0 in this?this[0].innerHTML:null},text:function(n){return 0 in arguments?this.each(function(t){var e=_(this,n,t,this.textContent);this.textContent=null==e?"":""+e}):0 in this?this.pluck("textContent").join(""):null},attr:function(n,i){var t;return"string"!=typeof n||1 in arguments?this.each(function(t){if(1===this.nodeType)if(O(n))for(f in n)aa(this,f,n[f]);else aa(this,n,_(this,i,t,this.getAttribute(n)))}):0 in this&&1==this[0].nodeType&&null!=(t=this[0].getAttribute(n))?t:e},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){aa(this,t)},this)})},prop:function(e,n){return e=I[e]||e,1 in arguments?this.each(function(t){this[e]=_(this,n,t,this[e])}):this[0]&&this[0][e]},removeProp:function(t){return t=I[t]||t,this.each(function(){delete this[t]})},data:function(t,n){var i="data-"+t.replace(u,"-$1").toLowerCase(),r=1 in arguments?this.attr(i,n):this.attr(i);return null!==r?ca(r):e},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each(function(t){this.value=_(this,e,t,this.value)})):this[0]&&(this[0].multiple?g(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(o){if(o)return this.each(function(t){var e=g(this),n=_(this,o,t,e.offset()),i=e.offsetParent().offset(),r={top:n.top-i.top,left:n.left-i.left};"static"==e.css("position")&&(r.position="relative"),e.css(r)});if(!this.length)return null;if(m.documentElement!==this[0]&&!g.contains(m.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+c.pageXOffset,top:t.top+c.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,e){if(arguments.length<2){var n=this[0];if("string"==typeof t){if(!n)return;return n.style[F(t)]||getComputedStyle(n,"").getPropertyValue(t)}if(J(t)){if(!n)return;var i={},r=getComputedStyle(n,"");return g.each(t,function(t,e){i[e]=n.style[F(e)]||r.getPropertyValue(e)}),i}}var o="";if("string"==K(t))e||0===e?o=T(t)+":"+V(t,e):this.each(function(){this.style.removeProperty(T(t))});else for(f in t)t[f]||0===t[f]?o+=T(f)+":"+V(f,t[f])+";":this.each(function(){this.style.removeProperty(T(f))});return this.each(function(){this.style.cssText+=";"+o})},index:function(t){return t?this.indexOf(g(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&i.some.call(this,function(t){return this.test(ba(t))},U(t))},addClass:function(n){return n?this.each(function(t){if("className"in this){h=[];var e=ba(this);_(this,n,t,e).split(/\s+/g).forEach(function(t){g(this).hasClass(t)||h.push(t)},this),h.length&&ba(this,e+(e?" ":"")+h.join(" "))}}):this},removeClass:function(n){return this.each(function(t){if("className"in this){if(n===e)return ba(this,"");h=ba(this),_(this,n,t,h).split(/\s+/g).forEach(function(t){h=h.replace(U(t)," ")}),ba(this,h.trim())}})},toggleClass:function(i,r){return i?this.each(function(t){var n=g(this);_(this,i,t,ba(this)).split(/\s+/g).forEach(function(t){(r===e?!n.hasClass(t):r)?n.addClass(t):n.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],n=this.offsetParent(),i=this.offset(),r=t.test(n[0].nodeName)?{top:0,left:0}:n.offset();return i.top-=parseFloat(g(e).css("margin-top"))||0,i.left-=parseFloat(g(e).css("margin-left"))||0,r.top+=parseFloat(g(n[0]).css("border-top-width"))||0,r.left+=parseFloat(g(n[0]).css("border-left-width"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||m.body;e&&!t.test(e.nodeName)&&"static"==g(e).css("position");)e=e.offsetParent;return e})}},g.fn.detach=g.fn.remove,["width","height"].forEach(function(r){var o=r.replace(/./,function(t){return t[0].toUpperCase()});g.fn[r]=function(n){var t,i=this[0];return n===e?M(i)?i["inner"+o]:N(i)?i.documentElement["scroll"+o]:(t=this.offset())&&t[r]:this.each(function(t){(i=g(this)).css(r,_(this,n,t,i[r]()))})}}),["after","prepend","before","append"].forEach(function(n,s){var u=s%2;g.fn[n]=function(){var i,r,o=g.map(arguments,function(t){var n=[];return"array"==(i=K(t))?(t.forEach(function(t){return t.nodeType!==e?n.push(t):g.zepto.isZ(t)?n=n.concat(t.get()):void(n=n.concat(E.fragment(t)))}),n):"object"==i||null==t?t:E.fragment(t)}),a=1<this.length;return o.length<1?this:this.each(function(t,e){r=u?e:e.parentNode,e=0==s?e.nextSibling:1==s?e.firstChild:2==s?e:null;var n=g.contains(m.documentElement,r);o.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!r)return g(t).remove();r.insertBefore(t,e),n&&function t(e,n){n(e);for(var i=0,r=e.childNodes.length;i<r;i++)t(e.childNodes[i],n)}(t,function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var e=t.ownerDocument?t.ownerDocument.defaultView:c;e.eval.call(e,t.innerHTML)}})})})},g.fn[u?n+"To":"insert"+(s?"Before":"After")]=function(t){return g(t)[n](this),this}}),E.Z.prototype=Y.prototype=g.fn,E.uniq=G,E.deserializeValue=ca,g.zepto=E,g);function K(t){return null==t?String(t):C[D.call(t)]||"object"}function L(t){return"function"==K(t)}function M(t){return null!=t&&t==t.window}function N(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function O(t){return"object"==K(t)}function P(t){return O(t)&&!M(t)&&Object.getPrototypeOf(t)==Object.prototype}function Q(t){var e=!!t&&"length"in t&&t.length,n=g.type(t);return"function"!=n&&!M(t)&&("array"==n||0===e||"number"==typeof e&&0<e&&e-1 in t)}function T(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function U(t){return t in o?o[t]:o[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function V(t,e){return"number"!=typeof e||p[T(t)]?e:e+"px"}function X(t){return"children"in t?l.call(t.children):g.map(t.childNodes,function(t){if(1==t.nodeType)return t})}function Y(t,e){var n,i=t?t.length:0;for(n=0;n<i;n++)this[n]=t[n];this.length=i,this.selector=e||""}function $(t,e){return null==e?g(t):g(t).filter(e)}function _(t,e,n,i){return L(e)?e.call(t,n,i):e}function aa(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function ba(t,n){var i=t.className||"",r=i&&i.baseVal!==e;if(n===e)return r?i.baseVal:i;r?i.baseVal=n:t.className=n}function ca(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?g.parseJSON(e):e):e}catch(t){return e}}return c.Zepto=d,void 0===c.$&&(c.$=d),function(l){function u(t){return"string"==typeof t}var h,e=1,f=Array.prototype.slice,p=l.isFunction,d={},o={},n="onfocusin"in c,i={focus:"focusin",blur:"focusout"},g={mouseenter:"mouseover",mouseleave:"mouseout"};function m(t){return t._zid||(t._zid=e++)}function a(t,e,n,i){if((e=v(e)).ns)var r=(o=e.ns,new RegExp("(?:^| )"+o.replace(" "," .* ?")+"(?: |$)"));var o;return(d[m(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||r.test(t.ns))&&(!n||m(t.fn)===m(n))&&(!i||t.sel==i)})}function v(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function y(t,e){return t.del&&!n&&t.e in i||!!e}function j(t){return g[t]||n&&i[t]||t}function E(r,t,e,o,a,s,c){var n=m(r),u=d[n]||(d[n]=[]);t.split(/\s/).forEach(function(t){if("ready"==t)return l(document).ready(e);var n=v(t);n.fn=e,n.sel=a,n.e in g&&(e=function(t){var e=t.relatedTarget;if(!e||e!==this&&!l.contains(this,e))return n.fn.apply(this,arguments)});var i=(n.del=s)||e;n.proxy=function(t){if(!(t=$(t)).isImmediatePropagationStopped()){t.data=o;var e=i.apply(r,t._args==h?[t]:[t].concat(t._args));return!1===e&&(t.preventDefault(),t.stopPropagation()),e}},n.i=u.length,u.push(n),"addEventListener"in r&&r.addEventListener(j(n.e),n.proxy,y(n,c))})}function b(e,t,n,i,r){var o=m(e);(t||"").split(/\s/).forEach(function(t){a(e,t,n,i).forEach(function(t){delete d[o][t.i],"removeEventListener"in e&&e.removeEventListener(j(t.e),t.proxy,y(t,r))})})}o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents",l.event={add:E,remove:b},l.proxy=function(t,e){var n=2 in arguments&&f.call(arguments,2);if(p(t)){function i(){return t.apply(e,n?n.concat(f.call(arguments)):arguments)}return i._zid=m(t),i}if(u(e))return n?(n.unshift(t[e],t),l.proxy.apply(null,n)):l.proxy(t[e],t);throw new TypeError("expected function")},l.fn.bind=function(t,e,n){return this.on(t,e,n)},l.fn.unbind=function(t,e){return this.off(t,e)},l.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var s=function(){return!0},x=function(){return!1},r=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,t={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function $(i,r){return!r&&i.isDefaultPrevented||(r=r||i,l.each(t,function(t,e){var n=r[t];i[t]=function(){return this[e]=s,n&&n.apply(r,arguments)},i[e]=x}),i.timeStamp||(i.timeStamp=Date.now()),(r.defaultPrevented!==h?r.defaultPrevented:"returnValue"in r?!1===r.returnValue:r.getPreventDefault&&r.getPreventDefault())&&(i.isDefaultPrevented=s)),i}function T(t){var e,n={originalEvent:t};for(e in t)r.test(e)||t[e]===h||(n[e]=t[e]);return $(n,t)}l.fn.delegate=function(t,e,n){return this.on(e,t,n)},l.fn.undelegate=function(t,e,n){return this.off(e,t,n)},l.fn.live=function(t,e){return l(document.body).delegate(this.selector,t,e),this},l.fn.die=function(t,e){return l(document.body).undelegate(this.selector,t,e),this},l.fn.on=function(e,r,n,o,a){var s,c,i=this;return e&&!u(e)?(l.each(e,function(t,e){i.on(t,r,n,e,a)}),i):(u(r)||p(o)||!1===o||(o=n,n=r,r=h),o!==h&&!1!==n||(o=n,n=h),!1===o&&(o=x),i.each(function(t,i){a&&(s=function(t){return b(i,t.type,o),o.apply(this,arguments)}),r&&(c=function(t){var e,n=l(t.target).closest(r,i).get(0);if(n&&n!==i)return e=l.extend(T(t),{currentTarget:n,liveFired:i}),(s||o).apply(n,[e].concat(f.call(arguments,1)))}),E(i,e,o,n,r,c||s)}))},l.fn.off=function(t,n,e){var i=this;return t&&!u(t)?(l.each(t,function(t,e){i.off(t,n,e)}),i):(u(n)||p(e)||!1===e||(e=n,n=h),!1===e&&(e=x),i.each(function(){b(this,t,e,n)}))},l.fn.trigger=function(t,e){return(t=u(t)||l.isPlainObject(t)?l.Event(t):$(t))._args=e,this.each(function(){t.type in i&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):l(this).triggerHandler(t,e)})},l.fn.triggerHandler=function(n,i){var r,o;return this.each(function(t,e){(r=T(u(n)?l.Event(n):n))._args=i,r.target=e,l.each(a(e,n.type||n),function(t,e){if(o=e.proxy(r),r.isImmediatePropagationStopped())return!1})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){l.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),l.Event=function(t,e){u(t)||(t=(e=t).type);var n=document.createEvent(o[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),$(n)}}(d),function(Bh){var Eh,Fh,Ch=+new Date,Dh=c.document,Gh=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Hh=/^(?:text|application)\/javascript/i,Ih=/^(?:text|application)\/xml/i,Jh="application/json",Kh="text/html",Lh=/^\s*$/,Mh=Dh.createElement("a");function Oh(t,e,n,i){if(t.global)return r=e||Dh,o=n,a=i,s=Bh.Event(o),Bh(r).trigger(s,a),!s.isDefaultPrevented();var r,o,a,s}function Rh(t,e){var n=e.context;if(!1===e.beforeSend.call(n,t,e)||!1===Oh(e,n,"ajaxBeforeSend",[t,e]))return!1;Oh(e,n,"ajaxSend",[t,e])}function Sh(t,e,n,i){var r=n.context,o="success";n.success.call(r,t,o,e),i&&i.resolveWith(r,[t,o,e]),Oh(n,r,"ajaxSuccess",[e,n,t]),Uh(o,e,n)}function Th(t,e,n,i,r){var o=i.context;i.error.call(o,n,e,t),r&&r.rejectWith(o,[n,e,t]),Oh(i,o,"ajaxError",[n,i,t||e]),Uh(e,n,i)}function Uh(t,e,n){var i,r=n.context;n.complete.call(r,e,t),Oh(n,r,"ajaxComplete",[e,n]),(i=n).global&&!--Bh.active&&Oh(i,null,"ajaxStop")}function Wh(){}function Yh(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function $h(t,e,n,i){return Bh.isFunction(e)&&(i=n,n=e,e=void 0),Bh.isFunction(n)||(i=n,n=void 0),{url:t,data:e,success:n,dataType:i}}Mh.href=c.location.href,Bh.active=0,Bh.ajaxJSONP=function(n,i){if(!("type"in n))return Bh.ajax(n);function t(t){Bh(s).triggerHandler("error",t||"abort")}var r,o,e=n.jsonpCallback,a=(Bh.isFunction(e)?e():e)||"Zepto"+Ch++,s=Dh.createElement("script"),u=c[a],l={abort:t};return i&&i.promise(l),Bh(s).on("load error",function(t,e){clearTimeout(o),Bh(s).off().remove(),"error"!=t.type&&r?Sh(r[0],l,n,i):Th(null,e||"error",l,n,i),c[a]=u,r&&Bh.isFunction(u)&&u(r[0]),u=r=void 0}),!1===Rh(l,n)?t("abort"):(c[a]=function(){r=arguments},s.src=n.url.replace(/\?(.+)=\?/,"?$1="+a),Dh.head.appendChild(s),0<n.timeout&&(o=setTimeout(function(){t("timeout")},n.timeout))),l},Bh.ajaxSettings={type:"GET",beforeSend:Wh,success:Wh,error:Wh,complete:Wh,context:null,global:!0,xhr:function(){return new c.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:Jh,xml:"application/xml, text/xml",html:Kh,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:Wh},Bh.ajax=function(Zi){var aj,bj,ji,Yi,$i=Bh.extend({},Zi||{}),_i=Bh.Deferred&&Bh.Deferred();for(Eh in Bh.ajaxSettings)void 0===$i[Eh]&&($i[Eh]=Bh.ajaxSettings[Eh]);(ji=$i).global&&0==Bh.active++&&Oh(ji,null,"ajaxStart"),$i.crossDomain||((aj=Dh.createElement("a")).href=$i.url,aj.href=aj.href,$i.crossDomain=Mh.protocol+"//"+Mh.host!=aj.protocol+"//"+aj.host),$i.url||($i.url=c.location.toString()),-1<(bj=$i.url.indexOf("#"))&&($i.url=$i.url.slice(0,bj)),(Yi=$i).processData&&Yi.data&&"string"!=Bh.type(Yi.data)&&(Yi.data=Bh.param(Yi.data,Yi.traditional)),!Yi.data||Yi.type&&"GET"!=Yi.type.toUpperCase()&&"jsonp"!=Yi.dataType||(Yi.url=Yh(Yi.url,Yi.data),Yi.data=void 0);var cj=$i.dataType,dj=/\?.+=\?/.test($i.url);if(dj&&(cj="jsonp"),!1!==$i.cache&&(Zi&&!0===Zi.cache||"script"!=cj&&"jsonp"!=cj)||($i.url=Yh($i.url,"_="+Date.now())),"jsonp"==cj)return dj||($i.url=Yh($i.url,$i.jsonp?$i.jsonp+"=?":!1===$i.jsonp?"":"callback=?")),Bh.ajaxJSONP($i,_i);function gj(t,e){fj[t.toLowerCase()]=[t,e]}var kj,ej=$i.accepts[cj],fj={},hj=/^([\w-]+:)\/\//.test($i.url)?RegExp.$1:c.location.protocol,ij=$i.xhr(),jj=ij.setRequestHeader;if(_i&&_i.promise(ij),$i.crossDomain||gj("X-Requested-With","XMLHttpRequest"),gj("Accept",ej||"*/*"),(ej=$i.mimeType||ej)&&(-1<ej.indexOf(",")&&(ej=ej.split(",",2)[0]),ij.overrideMimeType&&ij.overrideMimeType(ej)),($i.contentType||!1!==$i.contentType&&$i.data&&"GET"!=$i.type.toUpperCase())&&gj("Content-Type",$i.contentType||"application/x-www-form-urlencoded"),$i.headers)for(Fh in $i.headers)gj(Fh,$i.headers[Fh]);if(ij.setRequestHeader=gj,!(ij.onreadystatechange=function(){if(4==ij.readyState){ij.onreadystatechange=Wh,clearTimeout(kj);var oj,pj=!1;if(200<=ij.status&&ij.status<300||304==ij.status||0==ij.status&&"file:"==hj){if(cj=cj||((Vi=(Vi=$i.mimeType||ij.getResponseHeader("content-type"))&&Vi.split(";",2)[0])&&(Vi==Kh?"html":Vi==Jh?"json":Hh.test(Vi)?"script":Ih.test(Vi)&&"xml")||"text"),"arraybuffer"==ij.responseType||"blob"==ij.responseType)oj=ij.response;else{oj=ij.responseText;try{oj=function(t,e,n){if(n.dataFilter==Wh)return t;var i=n.context;return n.dataFilter.call(i,t,e)}(oj,cj,$i),"script"==cj?eval(oj):"xml"==cj?oj=ij.responseXML:"json"==cj&&(oj=Lh.test(oj)?null:Bh.parseJSON(oj))}catch(t){pj=t}if(pj)return Th(pj,"parsererror",ij,$i,_i)}Sh(oj,ij,$i,_i)}else Th(ij.statusText||null,ij.status?"error":"abort",ij,$i,_i)}var Vi})===Rh(ij,$i))return ij.abort(),Th(null,"abort",ij,$i,_i),ij;var lj=!("async"in $i)||$i.async;if(ij.open($i.type,$i.url,lj,$i.username,$i.password),$i.xhrFields)for(Fh in $i.xhrFields)ij[Fh]=$i.xhrFields[Fh];for(Fh in fj)jj.apply(ij,fj[Fh]);return 0<$i.timeout&&(kj=setTimeout(function(){ij.onreadystatechange=Wh,ij.abort(),Th(null,"timeout",ij,$i,_i)},$i.timeout)),ij.send($i.data?$i.data:null),ij},Bh.get=function(){return Bh.ajax($h.apply(null,arguments))},Bh.post=function(){var t=$h.apply(null,arguments);return t.type="POST",Bh.ajax(t)},Bh.getJSON=function(){var t=$h.apply(null,arguments);return t.dataType="json",Bh.ajax(t)},Bh.fn.load=function(t,e,n){if(!this.length)return this;var i,r=this,o=t.split(/\s/),a=$h(t,e,n),s=a.success;return 1<o.length&&(a.url=o[0],i=o[1]),a.success=function(t){r.html(i?Bh("<div>").html(t.replace(Gh,"")).find(i):t),s&&s.apply(r,arguments)},Bh.ajax(a),this};var _h=encodeURIComponent;Bh.param=function(t,e){var n=[];return n.add=function(t,e){Bh.isFunction(e)&&(e=e()),null==e&&(e=""),this.push(_h(t)+"="+_h(e))},function n(i,t,r,o){var a,s=Bh.isArray(t),c=Bh.isPlainObject(t);Bh.each(t,function(t,e){a=Bh.type(e),o&&(t=r?o:o+"["+(c||"object"==a||"array"==a?t:"")+"]"),!o&&s?i.add(e.name,e.value):"array"==a||!r&&"object"==a?n(i,e,r,t):i.add(t,e)})}(n,t,e),n.join("&").replace(/%20/g,"+")}}(d),(Uj=d).fn.serializeArray=function(){var n,i,e=[],r=function(t){if(t.forEach)return t.forEach(r);e.push({name:n,value:t})};return this[0]&&Uj.each(this[0].elements,function(t,e){i=e.type,(n=e.name)&&"fieldset"!=e.nodeName.toLowerCase()&&!e.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&"file"!=i&&("radio"!=i&&"checkbox"!=i||e.checked)&&r(Uj(e).val())}),e},Uj.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},Uj.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var e=Uj.Event("submit");this.eq(0).trigger(e),e.isDefaultPrevented()||this.get(0).submit()}return this},function(){try{getComputedStyle(void 0)}catch(t){var n=getComputedStyle;c.getComputedStyle=function(t,e){try{return n(t,e)}catch(t){return null}}}}(),d});;
window.storage=function(e,t,n){var o="object"==typeof t;try{var r=n&&"undefined"!=typeof sessionStorage?sessionStorage:localStorage;return"undefined"==t||null==t?r.getItem(e):r.setItem(e,o?JSON.stringify(t):t)}catch(e){return!1}};;
"undefined"!=typeof window&&function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Hls=e():t.Hls=e()}(this,function(){return r=[function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});r=r(6);function a(){}var i={trace:a,debug:a,log:a,warn:a,info:a,error:a},n=i,o=r.getSelfScope();function s(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];t.forEach(function(t){var r,i;n[t]=e[t]?e[t].bind(e):(r=t,(i=o.console[r])?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t[0]&&(t[0]="["+r+"] > "+t[0]),i.apply(o.console,t)}:a)})}e.enableLogs=function(t){if(!0===t||"object"==typeof t){s(t,"debug","log","info","warn","error");try{n.log()}catch(t){n=i}}else n=i},e.logger=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});r=r(6).getSelfScope().Number;(e.Number=r).isFinite=r.isFinite||function(t){return"number"==typeof t&&isFinite(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},e.ErrorDetails={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),a=r(3),n=r(1),o={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0};function s(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.hls=t,this.onEvent=this.onEvent.bind(this),this.handledEvents=e,this.useGenericHandler=!0,this.registerListeners()}s.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},s.prototype.onHandlerDestroying=function(){},s.prototype.onHandlerDestroyed=function(){},s.prototype.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},s.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if(o[t])throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)},this)},s.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},s.prototype.onEvent=function(t,e){this.onEventGeneric(t,e)},s.prototype.onEventGeneric=function(t,e){try{!function(t,e){var r="on"+t.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,e)}.call(this,t,e).call()}catch(e){i.logger.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(n.default.ERROR,{type:a.ErrorTypes.OTHER_ERROR,details:a.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},e.default=s},function(t,e,r){"use strict";function i(){}Object.defineProperty(e,"__esModule",{value:!0}),i.isBuffered=function(t,e){try{if(t)for(var r=t.buffered,i=0;i<r.length;i++)if(e>=r.start(i)&&e<=r.end(i))return!0}catch(t){}return!1},i.bufferInfo=function(t,e,r){try{if(t){for(var i=t.buffered,a=[],n=void 0,n=0;n<i.length;n++)a.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(a,e,r)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},i.bufferedInfo=function(t,e,r){var i,a,n,o,s,l=[];for(t.sort(function(t,e){return t.start-e.start||e.end-t.end}),s=0;s<t.length;s++){var u,d=l.length;d&&(u=l[d-1].end,t[s].start-u<r)?t[s].end>u&&(l[d-1].end=t[s].end):l.push(t[s])}for(i=s=0,a=n=e;s<l.length;s++){var c=l[s].start,f=l[s].end;if(c<=e+r&&e<f)a=c,i=(n=f)-e;else if(e+r<c){o=c;break}}return{len:i,start:a,end:n,nextStart:o}},e.BufferHelper=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSelfScope=function(){return"undefined"==typeof window?self:window}},function(t,s,l){"use strict";!function(e){var i,r,t=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=(Object.defineProperty(s,"__esModule",{value:!0}),l(4)),n=l(1),t=(s.FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},r=a.default,t(o,r),o.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,a.default.prototype.destroy.call(this),r.prototype.destroy.call(this)},o.prototype.getBufferedFrag=function(e,r){var i=this.fragments,t=Object.keys(i).filter(function(t){var t=i[t];return t.body.type===r&&!!t.buffered&&(t=t.body).startPTS<=e&&e<=t.endPTS});return 0===t.length?null:(t=t.pop(),i[t].body)},o.prototype.detectEvictedFragments=function(i,a){var n,o,s=this;Object.keys(this.fragments).forEach(function(t){var e=s.fragments[t];if(!0===e.buffered){t=e.range[i];if(t){n=t.time;for(var r=0;r<n.length;r++)if(o=n[r],!1===s.isTimeBuffered(o.startPTS,o.endPTS,a)){s.removeFragment(e.body);break}}}})},o.prototype.detectPartialFragments=function(r){var i=this,t=this.getFragmentKey(r),a=this.fragments[t];a&&(a.buffered=!0,Object.keys(this.timeRanges).forEach(function(t){var e;r.hasElementaryStream(t)&&(e=i.timeRanges[t],a.range[t]=i.getBufferedTimes(r.startPTS,r.endPTS,e))}))},o.prototype.getBufferedTimes=function(t,e,r){for(var i,a,n=[],o=!1,s=0;s<r.length;s++){if(i=r.start(s)-this.bufferPadding,a=r.end(s)+this.bufferPadding,i<=t&&e<=a){n.push({startPTS:Math.max(t,r.start(s)),endPTS:Math.min(e,r.end(s))});break}if(t<a&&i<e)n.push({startPTS:Math.max(t,r.start(s)),endPTS:Math.min(e,r.end(s))}),o=!0;else if(e<=i)break}return{time:n,partial:o}},o.prototype.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},o.prototype.getPartialFragment=function(e){var r,i,a=this,n=null,o=0;return Object.keys(this.fragments).forEach(function(t){t=a.fragments[t];a.isPartial(t)&&(r=t.body.startPTS-a.bufferPadding,i=t.body.endPTS+a.bufferPadding,r<=e)&&e<=i&&(r=Math.min(e-r,i-e),o<=r)&&(n=t.body,o=r)}),n},o.prototype.getState=function(t){var t=this.getFragmentKey(t),t=this.fragments[t],e=s.FragmentState.NOT_LOADED;return e=void 0!==t?t.buffered?!0===this.isPartial(t)?s.FragmentState.PARTIAL:s.FragmentState.OK:s.FragmentState.APPENDING:e},o.prototype.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},o.prototype.isTimeBuffered=function(t,e,r){for(var i,a,n=0;n<r.length;n++){if(i=r.start(n)-this.bufferPadding,a=r.end(n)+this.bufferPadding,i<=t&&e<=a)return!0;if(e<=i)return!1}return!1},o.prototype.onFragLoaded=function(t){t=t.frag;e.isFinite(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},o.prototype.onBufferAppended=function(t){var r=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(t){var e=r.timeRanges[t];r.detectEvictedFragments(t,e)})},o.prototype.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},o.prototype.hasFragment=function(t){t=this.getFragmentKey(t);return void 0!==this.fragments[t]},o.prototype.removeFragment=function(t){t=this.getFragmentKey(t);delete this.fragments[t]},o.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},o);function o(t){var e=r.call(this,t,n.default.BUFFER_APPENDED,n.default.FRAG_BUFFERED,n.default.FRAG_LOADED)||this;return e.bufferPadding=.2,e.fragments=Object.create(null),e.timeRanges=Object.create(null),e.config=t.config,e}s.FragmentTracker=t}.call(this,l(2).Number)},function(t,e,r){var i,n,a,o,s;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var i=s.parseURL(t);if(i)return i.path=s.normalizePath(i.path),s.buildURLFromParts(i);throw new Error("Error trying to parse base URL.")}i=s.parseURL(e);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=s.normalizePath(i.path),s.buildURLFromParts(i)):e;e=s.parseURL(t);if(!e)throw new Error("Error trying to parse base URL.");!e.netLoc&&e.path&&"/"!==e.path[0]&&(t=n.exec(e.path),e.netLoc=t[1],e.path=t[2]),e.netLoc&&!e.path&&(e.path="/");var a,t={scheme:e.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};return i.netLoc||(t.netLoc=e.netLoc,"/"===i.path[0])||(i.path?(a=(a=e.path).substring(0,a.lastIndexOf("/")+1)+i.path,t.path=s.normalizePath(a)):(t.path=e.path,i.params||(t.params=e.params,i.query)||(t.query=e.query))),null===t.path&&(t.path=r.alwaysNormalize?s.normalizePath(i.path):i.path),s.buildURLFromParts(t)},parseURL:function(t){t=i.exec(t);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(a,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={search:function(t,e){for(var r,i,a=0,n=t.length-1;a<=n;){var o=e(i=t[r=(a+n)/2|0]);if(0<o)a=1+r;else{if(!(o<0))return i;n=r-1}}return null}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},s.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},s.getID3Data=function(t,e){for(var r=e,i=0;s.isHeader(t,e);)i=(i+=10)+s._readSize(t,e+6),s.isFooter(t,e+10)&&(i+=10),e+=i;if(0<i)return t.subarray(r,r+i)},s._readSize=function(t,e){var r=0,r=(127&t[e])<<21;return(r=(r|=(127&t[e+1])<<14)|(127&t[e+2])<<7)|127&t[e+3]},s.getTimeStamp=function(t){for(var e=s.getID3Frames(t),r=0;r<e.length;r++){var i=e[r];if(s.isTimeStampFrame(i))return s._readTimeStamp(i)}},s.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},s._getFrameData=function(t){var e=String.fromCharCode(t[0],t[1],t[2],t[3]),r=s._readSize(t,4);return{type:e,size:r,data:t.subarray(10,10+r)}},s.getID3Frames=function(t){for(var e=0,r=[];s.isHeader(t,e);){for(var i=s._readSize(t,e+6),a=(e+=10)+i;e+8<a;){var n=s._getFrameData(t.subarray(e)),o=s._decodeFrame(n);o&&r.push(o),e+=n.size+10}s.isFooter(t,e)&&(e+=10)}return r},s._decodeFrame=function(t){return"PRIV"===t.type?s._decodePrivFrame(t):"T"===t.type[0]?s._decodeTextFrame(t):"W"===t.type[0]?s._decodeURLFrame(t):void 0},s._readTimeStamp=function(t){var e;if(8===t.data.byteLength)return e=1&(t=new Uint8Array(t.data))[3],t=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7],t/=45,e&&(t+=47721858.84),Math.round(t)},s._decodePrivFrame=function(t){var e,r;if(!(t.size<2))return e=s._utf8ArrayToStr(t.data,!0),r=new Uint8Array(t.data.subarray(e.length+1)),{key:t.type,info:e,data:r.buffer}},s._decodeTextFrame=function(t){var e,r;if(!(t.size<2))return"TXXX"===t.type?(e=1,e+=(r=s._utf8ArrayToStr(t.data.subarray(1))).length+1,e=s._utf8ArrayToStr(t.data.subarray(e)),{key:t.type,info:r,data:e}):(r=s._utf8ArrayToStr(t.data.subarray(1)),{key:t.type,data:r})},s._decodeURLFrame=function(t){var e,r;return"WXXX"===t.type?t.size<2?void 0:(e=1,e+=(r=s._utf8ArrayToStr(t.data.subarray(1))).length+1,e=s._utf8ArrayToStr(t.data.subarray(e)),{key:t.type,info:r,data:e}):(r=s._utf8ArrayToStr(t.data),{key:t.type,data:r})},s._utf8ArrayToStr=function(t,e){void 0===e&&(e=!1);for(var r,i,a,n=t.length,o="",s=0;s<n;){if(0===(r=t[s++])&&e)return o;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(r);break;case 12:case 13:i=t[s++],o+=String.fromCharCode((31&r)<<6|63&i);break;case 14:i=t[s++],a=t[s++],o+=String.fromCharCode((15&r)<<12|(63&i)<<6|(63&a)<<0)}}return o};var i=s;function s(){}e.utf8ArrayToStr=i._utf8ArrayToStr,e.default=i},function(t,n,o){"use strict";!function(e){Object.defineProperty(n,"__esModule",{value:!0});var t=o(8),i=o(18),r=(Object.defineProperty(a,"ElementaryStreamTypes",{get:function(){return{AUDIO:"audio",VIDEO:"video"}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"url",{get:function(){return!this._url&&this.relurl&&(this._url=t.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"byteRange",{get:function(){var t,e,r;return this._byteRange||this.rawByteRange?this._byteRange||(t=[],this.rawByteRange&&(1===(e=this.rawByteRange.split("@",2)).length?(r=this.lastByteRangeEndOffset,t[0]=r||0):t[0]=parseInt(e[1]),t[1]=parseInt(e[0])+t[0],this._byteRange=t),t):[]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"byteRangeStartOffset",{get:function(){return this.byteRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"byteRangeEndOffset",{get:function(){return this.byteRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"decryptdata",{get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endProgramDateTime",{get:function(){var t;return e.isFinite(this.programDateTime)?(t=e.isFinite(this.duration)?this.duration:0,this.programDateTime+1e3*t):null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"encrypted",{get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)},enumerable:!0,configurable:!0}),a.prototype.addElementaryStream=function(t){this._elementaryStreams[t]=!0},a.prototype.hasElementaryStream=function(t){return!0===this._elementaryStreams[t]},a.prototype.createInitializationVector=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e},a.prototype.fragmentDecryptdataFromLevelkey=function(t,e){var r=t;return t&&t.method&&t.uri&&!t.iv&&((r=new i.default).method=t.method,r.baseuri=t.baseuri,r.reluri=t.reluri,r.iv=this.createInitializationVector(e)),r},a);function a(){var t;this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=((t={})[a.ElementaryStreamTypes.AUDIO]=!1,t[a.ElementaryStreamTypes.VIDEO]=!1,t)}n.default=r}.call(this,o(2).Number)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r(39),l=r(40),u=r(41),n=r(3),d=r(0),o=r(1),a=r(6).getSelfScope();function i(t,e,r){r=(void 0===r?{}:r).removePKCS7Padding,r=void 0===r||r;if(this.logEnabled=!0,this.observer=t,this.config=e,this.removePKCS7Padding=r)try{var i=a.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}i.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},i.prototype.decrypt=function(e,r,i,a){var t,n,o=this;this.disableWebCrypto&&this.config.enableSoftwareAES?(this.logEnabled&&(d.logger.log("JS AES decrypt"),this.logEnabled=!1),(t=this.decryptor)||(this.decryptor=t=new u.default),t.expandKey(r),a(t.decrypt(e,0,i,this.removePKCS7Padding))):(this.logEnabled&&(d.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1),n=this.subtle,this.key!==r&&(this.key=r,this.fastAesKey=new l.default(n,r)),this.fastAesKey.expandKey().then(function(t){new s.default(n,i).decrypt(e,t).catch(function(t){o.onWebCryptoError(t,e,r,i,a)}).then(function(t){a(t)})}).catch(function(t){o.onWebCryptoError(t,e,r,i,a)}))},i.prototype.onWebCryptoError=function(t,e,r,i,a){this.config.enableSoftwareAES?(d.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,r,i,a)):(d.logger.error("decrypting error : "+t.message),this.observer.trigger(o.default.ERROR,{type:n.ErrorTypes.MEDIA_ERROR,details:n.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},i.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getMediaSource=function(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}},function(t,e,r){"use strict";!function(h){Object.defineProperty(e,"__esModule",{value:!0});var p=r(0);function d(t,e,r){var i=t[e],t=t[r],a=t.startPTS;h.isFinite(a)?e<r?(i.duration=a-i.start,i.duration<0&&p.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(t.duration=i.start-a,t.duration<0&&p.logger.warn("negative duration computed for frag "+t.sn+",level "+t.level+", there should be some duration drift between playlist and fragment!")):t.start=e<r?i.start+i.duration:Math.max(i.start-t.duration,0)}function g(t,e,r,i,a,n){var o=r,s=(h.isFinite(e.startPTS)&&(s=Math.abs(e.startPTS-r),h.isFinite(e.deltaPTS)?e.deltaPTS=Math.max(s,e.deltaPTS):e.deltaPTS=s,o=Math.max(r,e.startPTS),r=Math.min(r,e.startPTS),i=Math.max(i,e.endPTS),a=Math.min(a,e.startDTS),n=Math.max(n,e.endDTS)),r-e.start);e.start=e.startPTS=r,e.maxStartPTS=o,e.endPTS=i,e.startDTS=a,e.endDTS=n,e.duration=i-r;var l,u,o=e.sn;if(!t||o<t.startSN||o>t.endSN)return 0;for(a=o-t.startSN,(l=t.fragments)[a]=e,u=a;0<u;u--)d(l,u,u-1);for(u=a;u<l.length-1;u++)d(l,u,u+1);return t.PTSKnown=!0,s}e.addGroupId=function(t,e,r){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(r);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(r)}},e.updatePTS=d,e.updateFragPTSDTS=g,e.mergeDetails=function(t,e){var r,i=Math.max(t.startSN,e.startSN)-e.startSN,a=Math.min(t.endSN,e.endSN)-e.startSN,n=e.startSN-t.startSN,o=t.fragments,s=e.fragments,l=0;if(e.initSegment&&t.initSegment&&(e.initSegment=t.initSegment),a<i)e.PTSKnown=!1;else{for(var u=i;u<=a;u++){var d=o[n+u],c=s[u];c&&d&&(l=d.cc-c.cc,h.isFinite(d.startPTS))&&(c.start=c.startPTS=d.startPTS,c.endPTS=d.endPTS,c.duration=d.duration,c.backtracked=d.backtracked,c.dropped=d.dropped,r=c)}if(l)for(p.logger.log("discontinuity sliding from playlist, take drift into account"),u=0;u<s.length;u++)s[u].cc+=l;if(r)g(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(0<=n&&n<o.length)for(var f=o[n].start,u=0;u<s.length;u++)s[u].start+=f;e.PTSKnown=t.PTSKnown}}}.call(this,r(2).Number)},function(t,e,r){"use strict";var i,a,n=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),a=r(4).default,n(o,a),o.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},o.prototype.hasInterval=function(){return!!this._tickInterval},o.prototype.hasNextTick=function(){return!!this._tickTimer},o.prototype.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,t),!0)},o.prototype.clearInterval=function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),!(this._tickInterval=null))},o.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),!(this._tickTimer=null))},o.prototype.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},o.prototype.doTick=function(){},o);function o(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t=a.apply(this,[t].concat(e))||this;return t._tickInterval=null,t._tickTimer=null,t._tickCallCount=0,t._boundTick=t.tick.bind(t),t}e.default=r},function(t,o,l){"use strict";!function(f){var i,e,t=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),h=(Object.defineProperty(o,"__esModule",{value:!0}),l(1)),r=l(4),s=l(3),d=l(0),a=l(17),p=l(32),g=window.performance,y={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},n={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},r=(e=r.default,t(m,e),Object.defineProperty(m,"ContextType",{get:function(){return y},enumerable:!0,configurable:!0}),Object.defineProperty(m,"LevelType",{get:function(){return n},enumerable:!0,configurable:!0}),m.canHaveQualityLevels=function(t){return t!==y.AUDIO_TRACK&&t!==y.SUBTITLE_TRACK},m.mapContextToLevelType=function(t){switch(t.type){case y.AUDIO_TRACK:return n.AUDIO;case y.SUBTITLE_TRACK:return n.SUBTITLE;default:return n.MAIN}},m.getResponseUrl=function(t,e){t=t.url;return t=void 0!==t&&0!==t.indexOf("data:")?t:e.url},m.prototype.createInternalLoader=function(t){var e=this.hls.config,r=e.pLoader,i=e.loader,r=new(r||i)(e);return t.loader=r,this.loaders[t.type]=r},m.prototype.getInternalLoader=function(t){return this.loaders[t.type]},m.prototype.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},m.prototype.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},m.prototype.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},m.prototype.onManifestLoading=function(t){this.load(t.url,{type:y.MANIFEST,level:0,id:null})},m.prototype.onLevelLoading=function(t){this.load(t.url,{type:y.LEVEL,level:t.level,id:t.id})},m.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:y.AUDIO_TRACK,level:null,id:t.id})},m.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:y.SUBTITLE_TRACK,level:null,id:t.id})},m.prototype.load=function(t,e){var r=this.hls.config;d.logger.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var i,a,n,o,s=this.getInternalLoader(e);if(s){var l=s.context;if(l&&l.url===t)return d.logger.trace("playlist request ongoing"),!1;d.logger.warn("aborting previous loader for type: "+e.type),s.abort()}switch(e.type){case y.MANIFEST:i=r.manifestLoadingMaxRetry,a=r.manifestLoadingTimeOut,n=r.manifestLoadingRetryDelay,o=r.manifestLoadingMaxRetryTimeout;break;case y.LEVEL:i=0,a=r.levelLoadingTimeOut;break;default:i=r.levelLoadingMaxRetry,a=r.levelLoadingTimeOut,n=r.levelLoadingRetryDelay,o=r.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(e),e.url=t,e.responseType=e.responseType||"";var l={timeout:a,maxRetry:i,retryDelay:n,maxRetryDelay:o},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return d.logger.debug("Calling internal loader delegate for URL: "+t),s.load(e,l,u),!0},m.prototype.loadsuccess=function(t,e,r,i){var a;void 0===i&&(i=null),r.isSidxRequest?(this._handleSidxRequest(t,r),this._handlePlaylistLoaded(t,e,r,i)):(this.resetInternalLoader(r.type),a=t.data,e.tload=g.now(),0===a.indexOf("#EXTM3U")?0<a.indexOf("#EXTINF:")||0<a.indexOf("#EXT-X-TARGETDURATION:")?this._handleTrackOrLevelPlaylist(t,e,r,i):this._handleMasterPlaylist(t,e,r,i):this._handleManifestParsingError(t,r,"no EXTM3U delimiter",i))},m.prototype.loaderror=function(t,e,r){this._handleNetworkError(e,r=void 0===r?null:r,!1,t)},m.prototype.loadtimeout=function(t,e,r){this._handleNetworkError(e,r=void 0===r?null:r,!0)},m.prototype._handleMasterPlaylist=function(t,e,r,i){var a,n,o=this.hls,s=t.data,l=m.getResponseUrl(t,r),u=p.default.parseMasterPlaylist(s,l);u.length?(a=u.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),a=p.default.parseMasterPlaylistMedia(s,l,"AUDIO",a),s=p.default.parseMasterPlaylistMedia(s,l,"SUBTITLES"),a.length&&(n=!1,a.forEach(function(t){t.url||(n=!0)}),!1===n)&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(d.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),a.unshift({type:"main",name:"main"})),o.trigger(h.default.MANIFEST_LOADED,{levels:u,audioTracks:a,subtitles:s,url:l,stats:e,networkDetails:i})):this._handleManifestParsingError(t,r,"no level found in manifest",i)},m.prototype._handleTrackOrLevelPlaylist=function(t,e,r,i){var a=this.hls,n=r.id,o=r.level,s=r.type,l=m.getResponseUrl(t,r),u=f.isFinite(n)?n:0,d=f.isFinite(o)?o:u,c=m.mapContextToLevelType(r),d=p.default.parseLevelPlaylist(t.data,l,d,c,u);d.tload=e.tload,s===y.MANIFEST&&a.trigger(h.default.MANIFEST_LOADED,{levels:[{url:l,details:d}],audioTracks:[],url:l,stats:e,networkDetails:i}),e.tparsed=g.now(),d.needSidxRanges?(c=d.initSegment.url,this.load(c,{isSidxRequest:!0,type:s,level:o,levelDetails:d,id:n,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})):(r.levelDetails=d,this._handlePlaylistLoaded(t,e,r,i))},m.prototype._handleSidxRequest=function(t,e){var r,i,t=a.default.parseSegmentIndex(new Uint8Array(t.data));t&&(r=t.references,i=e.levelDetails,r.forEach(function(t,e){t=t.info,e=i.fragments[e];0===e.byteRange.length&&(e.rawByteRange=String(1+t.end-t.start)+"@"+String(t.start))}),i.initSegment.rawByteRange=String(t.moovEndOffset)+"@0")},m.prototype._handleManifestParsingError=function(t,e,r,i){this.hls.trigger(h.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:r,networkDetails:i})},m.prototype._handleNetworkError=function(t,e,r,i){void 0===r&&(r=!1),void 0===i&&(i=null),d.logger.info("A network error occured while loading a "+t.type+"-type playlist");var a,n,o=this.getInternalLoader(t);switch(t.type){case y.MANIFEST:a=r?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,n=!0;break;case y.LEVEL:a=r?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,n=!1;break;case y.AUDIO_TRACK:a=r?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,n=!1;break;default:n=!1}o&&(o.abort(),this.resetInternalLoader(t.type));o={type:s.ErrorTypes.NETWORK_ERROR,details:a,fatal:n,url:o.url,loader:o,context:t,networkDetails:e};i&&(o.response=i),this.hls.trigger(h.default.ERROR,o)},m.prototype._handlePlaylistLoaded=function(t,e,r,i){var a=r.type,n=r.level,o=r.id,s=r.levelDetails;if(s.targetduration)if(m.canHaveQualityLevels(r.type))this.hls.trigger(h.default.LEVEL_LOADED,{details:s,level:n||0,id:o||0,stats:e,networkDetails:i});else switch(a){case y.AUDIO_TRACK:this.hls.trigger(h.default.AUDIO_TRACK_LOADED,{details:s,id:o,stats:e,networkDetails:i});break;case y.SUBTITLE_TRACK:this.hls.trigger(h.default.SUBTITLE_TRACK_LOADED,{details:s,id:o,stats:e,networkDetails:i})}else this._handleManifestParsingError(t,r,"invalid target duration",i)},m);function m(t){t=e.call(this,t,h.default.MANIFEST_LOADING,h.default.LEVEL_LOADING,h.default.AUDIO_TRACK_LOADING,h.default.SUBTITLE_TRACK_LOADING)||this;return t.loaders={},t}o.default=r}.call(this,l(2).Number)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),s=r(1),o=Math.pow(2,32)-1;function f(t,e){this.observer=t,this.remuxer=e}f.prototype.resetTimeStamp=function(t){this.initPTS=t},f.prototype.resetInitSegment=function(t,e,r,i){var a,n;t&&t.byteLength?(null==e&&(e="mp4a.40.5"),null==r&&(r="avc1.42e01e"),n={},(a=this.initData=f.parseInitSegment(t)).audio&&a.video?n.audiovideo={container:"video/mp4",codec:e+","+r,initSegment:i?t:null}:(a.audio&&(n.audio={container:"audio/mp4",codec:e,initSegment:i?t:null}),a.video&&(n.video={container:"video/mp4",codec:r,initSegment:i?t:null})),this.observer.trigger(s.default.FRAG_PARSING_INIT_SEGMENT,{tracks:n})):(e&&(this.audioCodec=e),r&&(this.videoCodec=r))},f.probe=function(t){return 0<f.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length},f.bin2str=function(t){return String.fromCharCode.apply(null,t)},f.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);t=t[e]<<8|t[e+1];return t<0?65536+t:t},f.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);t=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return t<0?4294967296+t:t},f.writeUint32=function(t,e,r){t.data&&(e+=t.start,t=t.data),t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r},f.findBox=function(t,e){var r,i,a,n,o,s=[];if(t.data?(n=t.start,i=t.end,t=t.data):(n=0,i=t.byteLength),!e.length)return null;for(r=n;r<i;)o=1<(o=f.readUint32(t,r))?r+o:i,f.bin2str(t.subarray(r+4,r+8))===e[0]&&(1===e.length?s.push({data:t,start:r+8,end:o}):(a=f.findBox({data:t,start:r+8,end:o},e.slice(1))).length&&(s=s.concat(a))),r=o;return s},f.parseSegmentIndex=function(t){var e=f.findBox(t,["moov"])[0],e=e?e.end:null,r=0,i=f.findBox(t,["sidx"]);if(!i||!i[0])return null;var a=[],t=(i=i[0]).data[0],r=0===t?8:16,n=f.readUint32(i,r),o=i.end+0,s=f.readUint16(i,r=(r+=4)+(0===t?8:16)+2);r+=2;for(var l=0;l<s;l++){var u=r,d=f.readUint32(i,u),c=(u+=4,2147483647&d);if(1==(2147483648&d)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");d=f.readUint32(i,u);u+=4,a.push({referenceSize:c,subsegmentDuration:d,info:{duration:d/n,start:o,end:o+c-1}}),o+=c,r=u+=4}return{earliestPresentationTime:0,timescale:n,version:t,referencesCount:s,references:a,moovEndOffset:e}},f.parseInitSegment=function(t){var a=[];return f.findBox(t,["moov","trak"]).forEach(function(t){var e,r,i=f.findBox(t,["tkhd"])[0];i&&(r=0===i.data[i.start]?12:20,i=f.readUint32(i,r),e=f.findBox(t,["mdia","mdhd"])[0])&&(r=0===e.data[e.start]?12:20,e=f.readUint32(e,r),r=f.findBox(t,["mdia","hdlr"])[0])&&(r={soun:"audio",vide:"video"}[f.bin2str(r.data.subarray(r.start+8,r.start+12))])&&((t=f.findBox(t,["mdia","minf","stbl","stsd"])).length&&(t=t[0],t=f.bin2str(t.data.subarray(t.start+12,t.start+16)),n.logger.log("MP4Demuxer:"+r+":"+t+" found")),a[i]={timescale:e,type:r},a[r]={timescale:e,id:i})}),a},f.getStartDTS=function(r,t){t=f.findBox(t,["moof","traf"]),t=[].concat.apply([],t.map(function(e){return f.findBox(e,["tfhd"]).map(function(t){t=f.readUint32(t,4),t=r[t].timescale||9e4;return f.findBox(e,["tfdt"]).map(function(t){var e=t.data[t.start],r=f.readUint32(t,4);return r=1===e?(r*=Math.pow(2,32))+f.readUint32(t,8):r})[0]/t})})),t=Math.min.apply(null,t);return isFinite(t)?t:0},f.offsetStartDTS=function(r,t,a){f.findBox(t,["moof","traf"]).map(function(e){return f.findBox(e,["tfhd"]).map(function(t){var t=f.readUint32(t,4),i=r[t].timescale||9e4;f.findBox(e,["tfdt"]).map(function(t){var e=t.data[t.start],r=f.readUint32(t,4);0===e?f.writeUint32(t,4,r-a*i):(r=(r=(r*=Math.pow(2,32))+f.readUint32(t,8))-a*i,r=Math.max(r,0),e=Math.floor(r/(1+o)),r=Math.floor(r%(1+o)),f.writeUint32(t,4,e),f.writeUint32(t,8,r))})})})},f.prototype.append=function(t,e,r,i){var a=this.initData;a||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),a=this.initData);var n,o=this.initPTS;void 0===o&&(n=f.getStartDTS(a,t),this.initPTS=o=n-e,this.observer.trigger(s.default.INIT_PTS_FOUND,{initPTS:o})),f.offsetStartDTS(a,t,o),n=f.getStartDTS(a,t),this.remuxer.remux(a.audio,a.video,null,null,n,r,i,t)},f.prototype.destroy=function(){},e.default=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(8);function a(){this.method=null,this.key=null,this.iv=null,this._uri=null}Object.defineProperty(a.prototype,"uri",{get:function(){return!this._uri&&this.reluri&&(this._uri=i.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri},enumerable:!0,configurable:!0}),e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};e.isCodecType=function(t,e){e=i[e];return!!e&&!0===e[t.slice(0,4)]},e.isCodecSupportedInMp4=function(t,e){return window.MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}},function(t,i,a){"use strict";!function(p){Object.defineProperty(i,"__esModule",{value:!0});var u=a(38),d=a(1),c=a(21),g=a(0),f=a(3),t=a(13),e=a(6),h=a(24),y=e.getSelfScope(),m=t.getMediaSource();function r(r,t){function e(t,e){(e=e||{}).frag=i.frag,e.id=i.id,r.trigger(t,e)}var i=this,a=(this.hls=r,this.id=t,this.observer=new h.Observer),n=r.config,o=(a.on(d.default.FRAG_DECRYPTED,e),a.on(d.default.FRAG_PARSING_INIT_SEGMENT,e),a.on(d.default.FRAG_PARSING_DATA,e),a.on(d.default.FRAG_PARSED,e),a.on(d.default.ERROR,e),a.on(d.default.FRAG_PARSING_METADATA,e),a.on(d.default.FRAG_PARSING_USERDATA,e),a.on(d.default.INIT_PTS_FOUND,e),{mp4:m.isTypeSupported("video/mp4"),mpeg:m.isTypeSupported("audio/mpeg"),mp3:m.isTypeSupported('audio/mp4; codecs="mp3"')}),s=navigator.vendor;if(n.enableWorker&&"undefined"!=typeof Worker){g.logger.log("demuxing in webworker");var l=void 0;try{l=this.w=u(52),this.onwmsg=this.onWorkerMessage.bind(this),l.addEventListener("message",this.onwmsg),l.onerror=function(t){r.trigger(d.default.ERROR,{type:f.ErrorTypes.OTHER_ERROR,details:f.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},l.postMessage({cmd:"init",typeSupported:o,vendor:s,id:t,config:JSON.stringify(n)})}catch(r){g.logger.warn("Error in worker:",r),g.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),l&&y.URL.revokeObjectURL(l.objectURL),this.demuxer=new c.default(a,o,n,s),this.w=void 0}}else this.demuxer=new c.default(a,o,n,s)}r.prototype.destroy=function(){var t=this.w,t=(t?(t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null):(t=this.demuxer)&&(t.destroy(),this.demuxer=null),this.observer);t&&(t.removeAllListeners(),this.observer=null)},r.prototype.push=function(t,e,r,i,a,n,o,s){var l=this.w,u=p.isFinite(a.startPTS)?a.startPTS:a.start,d=a.decryptdata,c=this.frag,f=!(c&&a.cc===c.cc),h=!(c&&a.level===c.level),c=c&&a.sn===c.sn+1,c=!h&&c;f&&g.logger.log(this.id+":discontinuity detected"),h&&g.logger.log(this.id+":switch detected"),this.frag=a,l?l.postMessage({cmd:"demux",data:t,decryptdata:d,initSegment:e,audioCodec:r,videoCodec:i,timeOffset:u,discontinuity:f,trackSwitch:h,contiguous:c,duration:n,accurateTimeOffset:o,defaultInitPTS:s},t instanceof ArrayBuffer?[t]:[]):(a=this.demuxer)&&a.push(t,d,e,r,i,u,f,h,c,n,o,s)},r.prototype.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":y.URL.revokeObjectURL(this.w.objectURL);break;case d.default.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},i.default=r}.call(this,a(2).Number)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var g,b=r(1),A=r(3),y=r(12),R=r(42),D=r(17),L=r(43),O=r(46),w=r(47),I=r(50),i=r(6),r=r(0),i=i.getSelfScope();try{g=i.performance.now.bind(i.performance)}catch(t){r.logger.debug("Unable to use Performance API on this environment"),g=i.Date.now}function a(t,e,r,i){this.observer=t,this.typeSupported=e,this.config=r,this.vendor=i}a.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},a.prototype.push=function(t,r,i,a,n,o,s,l,u,d,c,f){var e,h,p=this;0<t.byteLength&&null!=r&&null!=r.key&&"AES-128"===r.method?(null==(e=this.decrypter)&&(e=this.decrypter=new y.default(this.observer,this.config)),h=g(),e.decrypt(t,r.key.buffer,r.iv.buffer,function(t){var e=g();p.observer.trigger(b.default.FRAG_DECRYPTED,{stats:{tstart:h,tdecrypt:e}}),p.pushDecrypted(new Uint8Array(t),r,new Uint8Array(i),a,n,o,s,l,u,d,c,f)})):this.pushDecrypted(new Uint8Array(t),r,new Uint8Array(i),a,n,o,s,l,u,d,c,f)},a.prototype.pushDecrypted=function(t,e,r,i,a,n,o,s,l,u,d,c){if(!(T=this.demuxer)||(o||s)&&!this.probe(t)){for(var f=this.observer,h=this.typeSupported,p=this.config,g=[{demux:L.default,remux:w.default},{demux:D.default,remux:I.default},{demux:R.default,remux:w.default},{demux:O.default,remux:w.default}],y=0,m=g.length;y<m;y++){var v=g[y],E=v.demux.probe;if(E(t)){var _=this.remuxer=new v.remux(f,p,h,this.vendor),T=new v.demux(f,_,p,h);this.probe=E;break}}if(!T)return void f.trigger(b.default.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=T}var S=this.remuxer;(o||s)&&(T.resetInitSegment(r,i,a,u),S.resetInitSegment()),o&&(T.resetTimeStamp(c),S.resetTimeStamp(c)),"function"==typeof T.setDecryptData&&T.setDecryptData(e),T.append(t,n,l,d)},e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=r(0),f=r(3),h=r(1);function n(t,e,r,i){var a,n,o,s=navigator.userAgent.toLowerCase(),l=i,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],d=1+((192&e[r+2])>>>6);if(!((a=(60&e[r+2])>>>2)>u.length-1))return n=(1&e[r+2])<<2,n|=(192&e[r+3])>>>6,c.logger.log("manifest codec:"+i+",ADTS data:type:"+d+",sampleingIndex:"+a+"["+u[a]+"Hz],channelConfig:"+n),e=/firefox/i.test(s)?6<=a?(d=5,o=new Array(4),a-3):(d=2,o=new Array(2),a):-1!==s.indexOf("android")?(d=2,o=new Array(2),a):(d=5,o=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&6<=a?a-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(6<=a&&1==n||/vivaldi/i.test(s))||!i&&1==n)&&(d=2,o=new Array(2)),a)),o[0]=d<<3,o[0]|=(14&a)>>1,o[1]|=(1&a)<<7,o[1]|=n<<3,5===d&&(o[1]|=(14&e)>>1,o[2]=(1&e)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:u[a],channelCount:n,codec:"mp4a.40."+d,manifestCodec:l};t.trigger(h.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+a})}function i(t,e){return 255===t[e]&&240==(246&t[e+1])}function s(t,e){return 1&t[e+1]?7:9}function l(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function o(t){return 9216e4/t}function u(t,e,r,i,a){var n=t.length,o=s(t,e),t=l(t,e);if(0<(t-=o)&&e+o+t<=n)return{headerLength:o,frameLength:t,stamp:r+i*a}}e.getAudioConfig=n,e.isHeaderPattern=i,e.getHeaderLength=s,e.getFullFrameLength=l,e.isHeader=function(t,e){return!!(e+1<t.length&&i(t,e))},e.probe=function(t,e){if(e+1<t.length&&i(t,e)){var r=s(t,e),e=e+(r=e+5<t.length?l(t,e):r);if(e===t.length||e+1<t.length&&i(t,e))return!0}return!1},e.initTrackConfig=function(t,e,r,i,a){t.samplerate||(e=n(e,r,i,a),t.config=e.config,t.samplerate=e.samplerate,t.channelCount=e.channelCount,t.codec=e.codec,t.manifestCodec=e.manifestCodec,c.logger.log("parsed codec:"+t.codec+",rate:"+e.samplerate+",nb channel:"+e.channelCount))},e.getFrameDuration=o,e.parseFrameHeader=u,e.appendFrame=function(t,e,r,i,a){var n,i=u(e,r,i,a,o(t.samplerate));if(i)return a=i.stamp,n=i.headerLength,i=i.frameLength,e={unit:e.subarray(r+n,r+n+i),pts:a,dts:a},t.samples.push(e),t.len+=i,{sample:e,length:i+n}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,r,i,a){if(!(r+24>e.length)){var n=this.parseHeader(e,r);if(n&&r+n.frameLength<=e.length)return i=i+a*(9e4*n.samplesPerFrame/n.sampleRate),a={unit:e.subarray(r,r+n.frameLength),pts:i,dts:i},t.config=[],t.channelCount=n.channelCount,t.samplerate=n.sampleRate,t.samples.push(a),t.len+=n.frameLength,{sample:a,length:n.frameLength}}},parseHeader:function(t,e){var r=t[e+1]>>3&3,i=t[e+1]>>1&3,a=t[e+2]>>4&15,n=t[e+2]>>2&3,o=t[e+2]>>1&1;if(1!=r&&0!=a&&15!=a&&3!=n)return a=1e3*s.BitratesMap[14*(3==r?3-i:3==i?3:4)+a-1],n=s.SamplingRateMap[3*(3==r?0:2==r?1:2)+n],t=t[e+3]>>6==3?1:2,i=8*(e=s.SamplesCoefficients[r][i])*(r=s.BytesInSlot[i]),{sampleRate:n,channelCount:t,frameLength:parseInt(e*a/n+o,10)*r,samplesPerFrame:i}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var r=this.parseHeader(t,e),i=4,e=e+(i=r&&r.frameLength?r.frameLength:i);if(e===t.length||e+1<t.length&&this.isHeaderPattern(t,e))return!0}return!1}};e.default=s},function(t,e,r){"use strict";var i,a,n=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),a=r(51).EventEmitter,n(o,a),o.prototype.trigger=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.emit.apply(this,[t,t].concat(e))},o);function o(){return null!==a&&a.apply(this,arguments)||this}e.Observer=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={toString:function(t){for(var e="",r=t.length,i=0;i<r;i++)e+="["+t.start(i).toFixed(3)+","+t.end(i).toFixed(3)+"]";return e}}},function(t,e,c){"use strict";!function(i){Object.defineProperty(e,"__esModule",{value:!0});var r=c(9),a=c(0);function n(t,e){for(var r=null,i=0;i<t.length;i+=1){var a=t[i];if(a&&a.cc===e){r=a;break}}return r}function o(t,e,r){var i=!1;return i=e&&e.details&&r&&(r.endCC>r.startCC||t&&t.cc<r.startCC)?!0:i}function s(t,e){t=t.fragments,e=e.fragments;if(e.length&&t.length){t=n(t,e[0].cc);if(t&&(!t||t.startPTS))return t;a.logger.log("No frag in previous level to align on")}else a.logger.log("No fragments to align")}function l(r,t){t.fragments.forEach(function(t){var e;t&&(e=t.start+r,t.start=t.startPTS=e,t.endPTS=e+t.duration)}),t.PTSKnown=!0}function u(t,e,r){o(t,r,e)&&(t=s(r.details,e))&&(a.logger.log("Adjusting PTS using last level due to CC increase within current level"),l(t.start,e))}function d(t,e){var r;e&&e.fragments.length&&t.hasProgramDateTime&&e.hasProgramDateTime&&(r=e.fragments[0].programDateTime,r=(t.fragments[0].programDateTime-r)/1e3+e.fragments[0].start,i.isFinite(r))&&(a.logger.log("adjusting PTS using programDateTime delta, sliding:"+r.toFixed(3)),l(r,t))}e.findFirstFragWithCC=n,e.findFragWithCC=function(t,e){return r.default.search(t,function(t){return t.cc<e?1:t.cc>e?-1:0})},e.shouldAlignOnDiscontinuities=o,e.findDiscontinuousReferenceFrag=s,e.adjustPts=l,e.alignStream=function(t,e,r){u(t,r,e),!r.PTSKnown&&e&&d(r,e.details)},e.alignDiscontinuities=u,e.alignPDT=d}.call(this,c(2).Number)},function(t,e,r){"use strict";!function(n){Object.defineProperty(e,"__esModule",{value:!0});var a=r(9);function o(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0);e=Math.min(e,r.duration+(r.deltaPTS||0));return r.start+r.duration-e<=t?1:r.start-e>t&&r.start?-1:0}function s(t,e,r){e=1e3*Math.min(e,r.duration+(r.deltaPTS||0));return r.endProgramDateTime-e>t}e.findFragmentByPDT=function(t,e,r){if(Array.isArray(t)&&t.length&&n.isFinite(e)&&!(e<t[0].programDateTime||e>=t[t.length-1].endProgramDateTime)){r=r||0;for(var i=0;i<t.length;++i){var a=t[i];if(s(e,r,a))return a}}return null},e.findFragmentByPTS=function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);t=t?e[t.sn-e[0].sn+1]:null;return t&&!o(r,i,t)?t:a.default.search(e,o.bind(null,r,i))},e.fragmentWithinToleranceTest=o,e.pdtWithinToleranceTest=s}.call(this,r(2).Number)},function(t,d,o){"use strict";!function(s){var i,t,e=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),r=(Object.defineProperty(d,"__esModule",{value:!0}),o(15)),a=o(7),l=o(5),u=o(0),r=(d.State={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},t=r.default,e(n,t),n.prototype.doTick=function(){},n.prototype._streamEnded=function(t,e){var r=this.fragCurrent,i=this.fragmentTracker;return!(e.live||!r||r.backtracked||r.sn!==e.endSN||t.nextStart||(e=i.getState(r))!==a.FragmentState.PARTIAL&&e!==a.FragmentState.OK)},n.prototype.onMediaSeeking=function(){var t,e,r=this.config,i=this.media,a=this.mediaBuffer,n=this.state,o=i?i.currentTime:null,a=l.BufferHelper.bufferInfo(a||i,o,this.config.maxBufferHole);s.isFinite(o)&&u.logger.log("media seeking to "+o.toFixed(3)),n===d.State.FRAG_LOADING?(t=this.fragCurrent,0===a.len&&t&&(r=r.maxFragLookUpTolerance,e=t.start-r,r=t.start+t.duration+r,o<e||r<o?(t.loader&&(u.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=d.State.IDLE):u.logger.log("seeking outside of buffer but within currently loaded fragment range"))):n===d.State.ENDED&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=d.State.IDLE),i&&(this.lastCurrentTime=o),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=o),this.tick()},n.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},n);function n(){return null!==t&&t.apply(this,arguments)||this}d.default=r}.call(this,o(2).Number)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sendAddTrackEvent=function(t,e){var r=null;try{r=new window.Event("addtrack")}catch(t){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)},e.clearCurrentCues=function(t){if(t&&t.cues)for(;0<t.cues.length;)t.removeCue(t.cues[0])}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}}var s=r(69);function a(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[]}function l(){this.values=Object.create(null)}function u(t,e,r,i){var a,n,o=i?t.split(i):[t];for(a in o)"string"==typeof o[a]&&2===(n=o[a].split(r)).length&&e(n[0],n[1])}l.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,r){for(var i=0;i<r.length;++i)if(e===r[i]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(e=parseFloat(e))&&e<=100)&&(this.set(t,e),!0)}};var d=new s.default(0,0,0),c="middle"===d.align?"middle":"center";function f(r,t,n){var e,o,i=r;function a(){var t=(t=r.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/))?t[3]?e(t[1],t[2],t[3].replace(":",""),t[4]):59<t[1]?e(t[1],t[2],0,t[4]):e(0,t[1],t[2],t[4]):null;function e(t,e,r,i){return 3600*(0|t)+60*(0|e)+(0|r)+(0|i)/1e3}if(null===t)throw new Error("Malformed timestamp: "+i);return r=r.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){r=r.replace(/^\s+/,"")}if(s(),t.startTime=a(),s(),"--\x3e"!==r.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);r=r.substr(3),s(),t.endTime=a(),s(),e=r,t=t,o=new l,u(e,function(t,e){switch(t){case"region":for(var r=n.length-1;0<=r;r--)if(n[r].id===e){o.set(t,n[r].region);break}break;case"vertical":o.alt(t,e,["rl","lr"]);break;case"line":var i=e.split(","),a=i[0];o.integer(t,a),o.percent(t,a)&&o.set("snapToLines",!1),o.alt(t,a,["auto"]),2===i.length&&o.alt("lineAlign",i[1],["start",c,"end"]);break;case"position":i=e.split(","),o.percent(t,i[0]),2===i.length&&o.alt("positionAlign",i[1],["start",c,"end","line-left","line-right","auto"]);break;case"size":o.percent(t,e);break;case"align":o.alt(t,e,["start",c,"end","left","right"])}},/:/,/\s/),t.region=o.get("region",null),t.vertical=o.get("vertical",""),"auto"===(e=o.get("line","auto"))&&-1===d.line&&(e=-1),t.line=e,t.lineAlign=o.get("lineAlign","start"),t.snapToLines=o.get("snapToLines",!0),t.size=o.get("size",100),t.align=o.get("align",c),"auto"===(e=o.get("position","auto"))&&50===d.position&&(e="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=e}function h(t){return t.replace(/<br(?: \/)?>/gi,"\n")}e.fixLineBreaks=h,a.prototype={parse:function(t){var i=this;function e(){for(var t=0,e=h(e=i.buffer);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,i.buffer=e.substr(t),r}t&&(i.buffer+=i.decoder.decode(t,{stream:!0}));try{var r=void 0;if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var a=(r=e()).match(/^()?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");i.state="HEADER"}for(var n=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(n?n=!1:r=e(),i.state){case"HEADER":/:/.test(r)?u(r,function(t,e){},/:/):r||(i.state="ID");continue;case"NOTE":r||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){i.state="NOTE";break}if(!r)continue;if(i.cue=new s.default(0,0,""),i.state="CUE",-1===r.indexOf("--\x3e")){i.cue.id=r;continue}case"CUE":try{f(r,i.cue,i.regionList)}catch(t){i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var o=-1!==r.indexOf("--\x3e");if(!r||o&&(n=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=r;continue;case"BADCUE":r||(i.state="ID");continue}}}catch(t){"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&"HEADER"!==this.state||(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return this.onflush&&this.onflush(),this}},e.default=a},function(t,e,r){"use strict";var i,g,a=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),r(8)),o=r(3),y=r(16),m=r(35),v=r(36),E=r(7),_=r(37),T=r(55),S=r(56),s=r(57),b=r(0),l=r(58),u=r(1),r=(g=r(24).Observer,a(A,g),Object.defineProperty(A,"version",{get:function(){return"0.12.2"},enumerable:!0,configurable:!0}),A.isSupported=function(){return s.isSupported()},Object.defineProperty(A,"Events",{get:function(){return u.default},enumerable:!0,configurable:!0}),Object.defineProperty(A,"ErrorTypes",{get:function(){return o.ErrorTypes},enumerable:!0,configurable:!0}),Object.defineProperty(A,"ErrorDetails",{get:function(){return o.ErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(A,"DefaultConfig",{get:function(){return A.defaultConfig||l.hlsDefaultConfig},set:function(t){A.defaultConfig=t},enumerable:!0,configurable:!0}),A.prototype.destroy=function(){b.logger.log("destroy"),this.trigger(u.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},A.prototype.attachMedia=function(t){b.logger.log("attachMedia"),this.media=t,this.trigger(u.default.MEDIA_ATTACHING,{media:t})},A.prototype.detachMedia=function(){b.logger.log("detachMedia"),this.trigger(u.default.MEDIA_DETACHING),this.media=null},A.prototype.loadSource=function(t){t=n.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),b.logger.log("loadSource:"+t),this.url=t,this.trigger(u.default.MANIFEST_LOADING,{url:t})},A.prototype.startLoad=function(e){void 0===e&&(e=-1),b.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},A.prototype.stopLoad=function(){b.logger.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},A.prototype.swapAudioCodec=function(){b.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},A.prototype.recoverMediaError=function(){b.logger.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},Object.defineProperty(A.prototype,"levels",{get:function(){return this.levelController.levels},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"currentLevel",{get:function(){return this.streamController.currentLevel},set:function(t){b.logger.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"nextLevel",{get:function(){return this.streamController.nextLevel},set:function(t){b.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"loadLevel",{get:function(){return this.levelController.level},set:function(t){b.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"nextLoadLevel",{get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"firstLevel",{get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){b.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"startLevel",{get:function(){return this.levelController.startLevel},set:function(t){b.logger.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"autoLevelCapping",{get:function(){return this._autoLevelCapping},set:function(t){b.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"autoLevelEnabled",{get:function(){return-1===this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"manualLevel",{get:function(){return this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"minAutoLevel",{get:function(){for(var t=this.levels,e=this.config.minAutoBitrate,r=t?t.length:0,i=0;i<r;i++)if((t[i].realBitrate?Math.max(t[i].realBitrate,t[i].bitrate):t[i].bitrate)>e)return i;return 0},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"maxAutoLevel",{get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"nextAutoLevel",{get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"audioTracks",{get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"audioTrack",{get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"liveSyncPosition",{get:function(){return this.streamController.liveSyncPosition},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"subtitleTracks",{get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"subtitleTrack",{get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"subtitleDisplay",{get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)},enumerable:!0,configurable:!0}),A);function A(t){void 0===t&&(t={});var e,r=g.call(this)||this,i=A.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(e in i)e in t||(t[e]=i[e]);if(void 0!==t.liveMaxLatencyDurationCount&&t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(t.liveMaxLatencyDuration<=t.liveSyncDuration||void 0===t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');b.enableLogs(t.debug),r.config=t,r._autoLevelCapping=-1;var a=r.abrController=new t.abrController(r),n=new t.bufferController(r),o=new t.capLevelController(r),s=new t.fpsController(r),l=new y.default(r),u=new m.default(r),d=new v.default(r),c=new S.default(r),f=r.levelController=new T.default(r),h=new E.FragmentTracker(r),f=[f,r.streamController=new _.default(r,h)],p=t.audioStreamController,f=(p&&f.push(new p(r,h)),r.networkControllers=f,[l,u,d,a,n,o,s,c,h]);return(p=t.audioTrackController)&&(l=new p(r),r.audioTrackController=l,f.push(l)),(p=t.subtitleTrackController)&&(u=new p(r),r.subtitleTrackController=u,f.push(u)),(p=t.emeController)&&(d=new p(r),r.emeController=d,f.push(d)),(p=t.subtitleStreamController)&&f.push(new p(r,h)),(p=t.timelineController)&&f.push(new p(r)),r.coreComponents=f,r}e.default=r},function(t,e,i){"use strict";!function(O){Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),w=i(11),I=i(33),P=i(18),k=i(34),C=i(0),o=i(19),s=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,l=/#EXT-X-MEDIA:(.*)/g,F=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),x=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,M=/\.(mp4|m4s|m4v|m4a)$/i;function u(){}u.findGroup=function(t,e){if(!t)return null;for(var r=null,i=0;i<t.length;i++){var a=t[i];a.id===e&&(r=a)}return r},u.convertAVC1ToAVCOTI=function(t){var e,r=t.split(".");return 2<r.length?(e=r.shift()+".",e=(e+=parseInt(r.shift()).toString(16))+("000"+parseInt(r.shift()).toString(16)).substr(-4)):e=t,e},u.resolve=function(t,e){return r.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},u.parseMasterPlaylist=function(t,e){var r=[];for(s.lastIndex=0;null!=(n=s.exec(t));){var i={},a=i.attrs=new k.default(n[1]),n=(i.url=u.resolve(n[2],e),a.decimalResolution("RESOLUTION"));n&&(i.width=n.width,i.height=n.height),i.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),i.name=a.NAME,function(i,a){["video","audio"].forEach(function(e){var t,r=i.filter(function(t){return o.isCodecType(t,e)});r.length&&(t=r.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}),a[e+"Codec"]=(0<t.length?t:r)[0],i=i.filter(function(t){return-1===r.indexOf(t)}))}),a.unknownCodecs=i}([].concat((a.CODECS||"").split(/[ ,]+/)),i),i.videoCodec&&-1!==i.videoCodec.indexOf("avc1")&&(i.videoCodec=u.convertAVC1ToAVCOTI(i.videoCodec)),r.push(i)}return r},u.parseMasterPlaylistMedia=function(t,e,r,i){void 0===i&&(i=[]);var a=[],n=0;for(l.lastIndex=0;null!==(s=l.exec(t));){var o={},s=new k.default(s[1]);s.TYPE===r&&(o.groupId=s["GROUP-ID"],o.name=s.NAME,o.type=r,o.default="YES"===s.DEFAULT,o.autoselect="YES"===s.AUTOSELECT,o.forced="YES"===s.FORCED,s.URI&&(o.url=u.resolve(s.URI,e)),o.lang=s.LANGUAGE,o.name||(o.name=o.lang),i.length&&(s=u.findGroup(i,o.groupId),o.audioCodec=(s||i[0]).codec),o.id=n++,a.push(o))}return a},u.parseLevelPlaylist=function(t,e,r,i,a){var n,o,s,l=0,u=0,d=new I.default(e),c=new P.default,f=0,h=null,p=new w.default,g=null;for(F.lastIndex=0;null!==(n=F.exec(t));){var y=n[1];if(y){p.duration=parseFloat(y);var m=(" "+n[2]).slice(1);p.title=m||null,p.tagList.push(m?["INF",y,m]:["INF",y])}else if(n[3])O.isFinite(p.duration)&&(m=l++,p.type=i,p.start=u,p.levelkey=c,p.sn=m,p.level=r,p.cc=f,p.urlId=a,p.baseurl=e,p.relurl=(" "+n[3]).slice(1),y=h,(s=p).rawProgramDateTime?s.programDateTime=Date.parse(s.rawProgramDateTime):y&&y.programDateTime&&(s.programDateTime=y.endProgramDateTime),O.isFinite(s.programDateTime)||(s.programDateTime=null,s.rawProgramDateTime=null),d.fragments.push(p),u+=(h=p).duration,p=new w.default);else if(n[4])p.rawByteRange=(" "+n[4]).slice(1),h&&(y=h.byteRangeEndOffset)&&(p.lastByteRangeEndOffset=y);else if(n[5])p.rawProgramDateTime=(" "+n[5]).slice(1),p.tagList.push(["PROGRAM-DATE-TIME",p.rawProgramDateTime]),null===g&&(g=d.fragments.length);else{for(n=n[0].match(x),o=1;o<n.length&&void 0===n[o];o++);var v=(" "+n[o+1]).slice(1),E=(" "+n[o+2]).slice(1);switch(n[o]){case"#":p.tagList.push(E?[v,E]:[v]);break;case"PLAYLIST-TYPE":d.type=v.toUpperCase();break;case"MEDIA-SEQUENCE":l=d.startSN=parseInt(v);break;case"TARGETDURATION":d.targetduration=parseFloat(v);break;case"VERSION":d.version=parseInt(v);break;case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"DIS":f++,p.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(v);break;case"KEY":var _=new k.default(v),T=_.enumeratedString("METHOD"),S=_.URI,_=_.hexadecimalInteger("IV");T&&(c=new P.default,S)&&0<=["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(T)&&(c.method=T,c.baseuri=e,c.reluri=S,c.key=null,c.iv=_);break;case"START":T=new k.default(v).decimalFloatingPoint("TIME-OFFSET");O.isFinite(T)&&(d.startTimeOffset=T);break;case"MAP":S=new k.default(v);p.relurl=S.URI,p.rawByteRange=S.BYTERANGE,p.baseurl=e,p.level=r,p.type=i,p.sn="initSegment",d.initSegment=p,(p=new w.default).rawProgramDateTime=d.initSegment.rawProgramDateTime;break;default:C.logger.warn("line parsed but not handled: "+n)}}}if((p=h)&&!p.relurl&&(d.fragments.pop(),u-=p.duration),d.totalduration=u,d.averagetargetduration=u/d.fragments.length,d.endSN=l-1,d.startCC=d.fragments[0]?d.fragments[0].cc:0,d.endCC=f,!d.initSegment&&d.fragments.length&&d.fragments.every(function(t){return M.test(t.relurl)})&&(C.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(p=new w.default).relurl=d.fragments[0].relurl,p.baseurl=e,p.level=r,p.type=i,p.sn="initSegment",d.initSegment=p,d.needSidxRanges=!0),g)for(var b=d.fragments,A=g,R=b[A],D=A-1;0<=D;D--){var L=b[D];L.programDateTime=R.programDateTime-1e3*L.duration,R=L}return d},e.default=u}.call(this,i(2).Number)},function(t,r,e){"use strict";!function(t){function e(t){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=t,this.version=null}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(e.prototype,"hasProgramDateTime",{get:function(){return!(!this.fragments[0]||!t.isFinite(this.fragments[0].programDateTime))},enumerable:!0,configurable:!0}),r.default=e}.call(this,e(2).Number)},function(t,n,e){"use strict";!function(e){Object.defineProperty(n,"__esModule",{value:!0});var r=/^(\d+)x(\d+)$/,a=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g;function i(t){for(var e in t="string"==typeof t?i.parseAttrList(t):t)t.hasOwnProperty(e)&&(this[e]=t[e])}i.prototype.decimalInteger=function(t){t=parseInt(this[t],10);return t>e.MAX_SAFE_INTEGER?1/0:t},i.prototype.hexadecimalInteger=function(t){if(this[t]){for(var e=(1&(e=(this[t]||"0x").slice(2)).length?"0":"")+e,r=new Uint8Array(e.length/2),i=0;i<e.length/2;i++)r[i]=parseInt(e.slice(2*i,2*i+2),16);return r}return null},i.prototype.hexadecimalIntegerAsNumber=function(t){t=parseInt(this[t],16);return t>e.MAX_SAFE_INTEGER?1/0:t},i.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},i.prototype.enumeratedString=function(t){return this[t]},i.prototype.decimalResolution=function(t){t=r.exec(this[t]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},i.parseAttrList=function(t){var e,r={};for(a.lastIndex=0;null!==(e=a.exec(t));){var i=e[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[e[1]]=i}return r},n.default=i}.call(this,e(2).Number)},function(t,u,d){"use strict";!function(s){var i,a,t=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),n=(Object.defineProperty(u,"__esModule",{value:!0}),d(1)),e=d(4),o=d(3),l=d(0),e=(a=e.default,t(r,a),r.prototype.destroy=function(){var t,e=this.loaders;for(t in e){var r=e[t];r&&r.destroy()}this.loaders={},a.prototype.destroy.call(this)},r.prototype.onFragLoading=function(t){var t=t.frag,e=t.type,r=this.loaders,i=this.hls.config,a=i.fLoader,n=i.loader;t.loaded=0;var o=r[e],e=(o&&(l.logger.warn("abort previous fragment loader for type: "+e),o.abort()),o=r[e]=t.loader=new(i.fLoader?a:n)(i),r={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1},t.byteRangeStartOffset),a=t.byteRangeEndOffset;s.isFinite(e)&&s.isFinite(a)&&(r.rangeStart=e,r.rangeEnd=a),n={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},t={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},o.load(r,n,t)},r.prototype.loadsuccess=function(t,e,r,i){void 0===i&&(i=null);t=t.data,r=r.frag;r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(n.default.FRAG_LOADED,{payload:t,frag:r,stats:e,networkDetails:i})},r.prototype.loaderror=function(t,e,r){void 0===r&&(r=null);var i=e.frag,a=i.loader;a&&a.abort(),this.loaders[i.type]=void 0,this.hls.trigger(n.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:r})},r.prototype.loadtimeout=function(t,e,r){void 0===r&&(r=null);var i=e.frag,a=i.loader;a&&a.abort(),this.loaders[i.type]=void 0,this.hls.trigger(n.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:r})},r.prototype.loadprogress=function(t,e,r,i){void 0===i&&(i=null);e=e.frag;e.loaded=t.loaded,this.hls.trigger(n.default.FRAG_LOAD_PROGRESS,{frag:e,stats:t,networkDetails:i})},r);function r(t){t=a.call(this,t,n.default.FRAG_LOADING)||this;return t.loaders={},t}u.default=e}.call(this,d(2).Number)},function(t,e,r){"use strict";var i,a,n=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=(Object.defineProperty(e,"__esModule",{value:!0}),r(1)),s=r(4),l=r(3),u=r(0),r=(a=s.default,n(d,a),d.prototype.destroy=function(){for(var t in this.loaders){t=this.loaders[t];t&&t.destroy()}this.loaders={},s.default.prototype.destroy.call(this)},d.prototype.onKeyLoading=function(t){var e,t=t.frag,r=t.type,i=this.loaders[r],a=t.decryptdata,n=a.uri;n!==this.decrypturl||null===this.decryptkey?(e=this.hls.config,i&&(u.logger.warn("abort previous key loader for type:"+r),i.abort()),t.loader=this.loaders[r]=new e.loader(e),this.decrypturl=n,this.decryptkey=null,i={url:n,frag:t,responseType:"arraybuffer"},r={timeout:e.fragLoadingTimeOut,maxRetry:0,retryDelay:e.fragLoadingRetryDelay,maxRetryDelay:e.fragLoadingMaxRetryTimeout},n={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(i,r,n)):this.decryptkey&&(a.key=this.decryptkey,this.hls.trigger(o.default.KEY_LOADED,{frag:t}))},d.prototype.loadsuccess=function(t,e,r){r=r.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(t.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(o.default.KEY_LOADED,{frag:r})},d.prototype.loaderror=function(t,e){var r=e.frag,i=r.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t})},d.prototype.loadtimeout=function(t,e){var r=e.frag,i=r.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},d);function d(t){t=a.call(this,t,o.default.KEY_LOADING)||this;return t.loaders={},t.decryptkey=null,t.decrypturl=null,t}e.default=r},function(t,_,T){"use strict";!function(s){var i,a,t=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c=(Object.defineProperty(_,"__esModule",{value:!0}),T(9)),l=T(5),u=T(20),d=T(1),r=T(7),o=T(11),e=T(16),f=T(14),n=T(25),h=T(3),p=T(0),g=T(26),y=T(27),m=T(54),v=T(28),t=(a=v.default,t(E,a),E.prototype.onHandlerDestroying=function(){this.stopLoad(),a.prototype.onHandlerDestroying.call(this)},E.prototype.onHandlerDestroyed=function(){this.state=v.State.STOPPED,this.fragmentTracker=null,a.prototype.onHandlerDestroyed.call(this)},E.prototype.startLoad=function(t){var e,r,i;this.levels?(e=this.lastCurrentTime,r=this.hls,this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,this.startFragRequested||(-1===(i=r.startLevel)&&(this.bitrateTest=!(i=0)),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1),0<e&&-1===t&&(p.logger.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=v.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()):(this.forceStartLoad=!0,this.state=v.State.STOPPED)},E.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=v.State.STOPPED,this.forceStartLoad=!1},E.prototype.doTick=function(){switch(this.state){case v.State.BUFFER_FLUSHING:this.fragLoadError=0;break;case v.State.IDLE:this._doTickIdle();break;case v.State.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=v.State.IDLE);break;case v.State.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),e=this.retryDate;(!e||e<=t||this.media&&this.media.seeking)&&(p.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=v.State.IDLE);break;case v.State.ERROR:case v.State.STOPPED:case v.State.FRAG_LOADING:case v.State.PARSING:case v.State.PARSED:case v.State.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},E.prototype._doTickIdle=function(){var t,e,r,i,a=this.hls,n=a.config,o=this.media;void 0!==this.levelLastLoaded&&(o||!this.startFragRequested&&n.startFragPrefetch)&&(t=this.loadedmetadata?o.currentTime:this.nextLoadPosition,e=a.nextLoadLevel,r=this.levels[e])&&(i=(i=r.bitrate)?Math.max(8*n.maxBufferSize/i,n.maxBufferLength):n.maxBufferLength,(i=Math.min(i,n.maxMaxBufferLength))<=(n=(o=l.BufferHelper.bufferInfo(this.mediaBuffer||o,t,n.maxBufferHole)).len)||(p.logger.trace("buffer length of "+n.toFixed(3)+" is below max of "+i.toFixed(3)+". checking for more payload ..."),this.level=a.nextLoadLevel=e,!(n=r.details)||n.live&&this.levelLastLoaded!==e?this.state=v.State.WAITING_LEVEL:this._streamEnded(o,n)?(i={},this.altAudio&&(i.type="video"),this.hls.trigger(d.default.BUFFER_EOS,i),this.state=v.State.ENDED):this._fetchPayloadOrEos(t,o,n)))},E.prototype._fetchPayloadOrEos=function(t,e,r){var i=this.fragPrevious,a=this.level,n=r.fragments,o=n.length;if(0!==o){var s,l=n[0].start,u=n[o-1].start+n[o-1].duration,e=e.end;if(r.initSegment&&!r.initSegment.data)s=r.initSegment;else if(r.live){var d=this.config.initialLiveManifestSize;if(o<d)return void p.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+d);if(null===(s=this._ensureFragmentAtLivePoint(r,e,l,u,i,n,o)))return}else e<l&&(s=n[0]);(s=s||this._findFragment(l,i,o,n,e,u,r))&&(s.encrypted?(p.logger.log("Loading key for "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+a),this._loadKey(s)):(p.logger.log("Loading "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+a+", currentTime:"+t.toFixed(3)+",bufferEnd:"+e.toFixed(3)),this._loadFragment(s)))}},E.prototype._ensureFragmentAtLivePoint=function(t,e,r,i,a,n,o){var s,l=this.hls.config,u=this.media,d=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*t.targetduration;return e<Math.max(r-l.maxFragLookUpTolerance,i-d)&&(d=this.liveSyncPosition=this.computeLivePosition(r,t),p.logger.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),e=d,u&&u.readyState&&u.duration>d&&(u.currentTime=d),this.nextLoadPosition=d),t.PTSKnown&&i<e&&u&&u.readyState?null:(this.startFragRequested&&!t.PTSKnown&&(a&&(t.hasProgramDateTime?(p.logger.log("live playlist, switching playlist, load frag with same PDT: "+a.programDateTime),s=y.findFragmentByPDT(n,a.endProgramDateTime,l.maxFragLookUpTolerance)):((r=a.sn+1)>=t.startSN&&r<=t.endSN&&(d=n[r-t.startSN],a.cc===d.cc)&&p.logger.log("live playlist, switching playlist, load frag with next SN: "+(s=d).sn),s||(s=c.default.search(n,function(t){return a.cc-t.cc}))&&p.logger.log("live playlist, switching playlist, load frag with same CC: "+s.sn))),s||(s=n[Math.min(o-1,Math.round(o/2))],p.logger.log("live playlist, switching playlist, unknown, load middle frag : "+s.sn))),s)},E.prototype._findFragment=function(t,e,r,i,a,n,o){var s,l=this.hls.config;return(a=a<n?(n=a>n-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance,y.findFragmentByPTS(e,i,a,n)):i[r-1])&&(n=a.sn-o.startSN,r=e&&a.level===e.level,s=i[n-1],i=i[1+n],e)&&a.sn===e.sn&&(r&&!a.backtracked?a.sn<o.endSN?(r=e.deltaPTS)&&r>l.maxBufferHole&&e.dropped&&n?(a=s,p.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):p.logger.log("SN just loaded, load next one: "+(a=i).sn,a):a=null:a.backtracked&&(i&&i.backtracked?(p.logger.warn("Already backtracked from fragment "+i.sn+", will not backtrack to fragment "+a.sn+". Loading fragment "+i.sn),a=i):(p.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),a.dropped=0,s?(a=s).backtracked=!0:n&&(a=null)))),a},E.prototype._loadKey=function(t){this.state=v.State.KEY_LOADING,this.hls.trigger(d.default.KEY_LOADING,{frag:t})},E.prototype._loadFragment=function(t){var e=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,s.isFinite(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||e===r.FragmentState.NOT_LOADED||e===r.FragmentState.PARTIAL?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(d.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new u.default(this.hls,"main")),this.state=v.State.FRAG_LOADING):e===r.FragmentState.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},Object.defineProperty(E.prototype,"state",{get:function(){return this._state},set:function(t){var e;this.state!==t&&(e=this.state,this._state=t,p.logger.log("main stream:"+e+"->"+t),this.hls.trigger(d.default.STREAM_STATE_TRANSITION,{previousState:e,nextState:t}))},enumerable:!0,configurable:!0}),E.prototype.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,e.default.LevelType.MAIN)},Object.defineProperty(E.prototype,"currentLevel",{get:function(){var t=this.media;if(t){t=this.getBufferedFrag(t.currentTime);if(t)return t.level}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"nextBufferedFrag",{get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null},enumerable:!0,configurable:!0}),E.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},Object.defineProperty(E.prototype,"nextLevel",{get:function(){var t=this.nextBufferedFrag;return t?t.level:-1},enumerable:!0,configurable:!0}),E.prototype._checkFragmentChanged=function(){var t,e,r=this.media;r&&r.readyState&&!1===r.seeking&&((e=r.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=e),l.BufferHelper.isBuffered(r,e)?t=this.getBufferedFrag(e):l.BufferHelper.isBuffered(r,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)&&((r=t)!==this.fragPlaying&&(this.hls.trigger(d.default.FRAG_CHANGED,{frag:r}),e=r.level,this.fragPlaying&&this.fragPlaying.level===e||this.hls.trigger(d.default.LEVEL_SWITCHED,{level:e}),this.fragPlaying=r))},E.prototype.immediateLevelSwitch=function(){p.logger.log("immediateLevelSwitch"),this.immediateSwitch||(this.immediateSwitch=!0,t=void 0,(e=this.media)?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t);var t,e=this.fragCurrent;e&&e.loader&&e.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,s.POSITIVE_INFINITY)},E.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,l.BufferHelper.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},E.prototype.nextLevelSwitch=function(){var t,e,r,i,a=this.media;a&&a.readyState&&(t=r=void 0,(i=this.getBufferedFrag(a.currentTime))&&1<i.startPTS&&this.flushMainBuffer(0,i.startPTS-1),r=!a.paused&&(i=this.hls.nextLoadLevel,i=this.levels[i],e=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*i.bitrate/(1e3*e)+1:0,t=(t=this.getBufferedFrag(a.currentTime+r))&&this.followingBufferedFrag(t))&&((i=this.fragCurrent)&&i.loader&&i.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(t.maxStartPTS,s.POSITIVE_INFINITY))},E.prototype.flushMainBuffer=function(t,e){this.state=v.State.BUFFER_FLUSHING;t={startOffset:t,endOffset:e};this.altAudio&&(t.type="video"),this.hls.trigger(d.default.BUFFER_FLUSHING,t)},E.prototype.onMediaAttached=function(t){var t=this.media=this.mediaBuffer=t.media,e=(this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended),this.config);this.levels&&e.autoStartLoad&&this.hls.startLoad(e.startPosition),this.gapController=new m.default(e,t,this.fragmentTracker,this.hls)},E.prototype.onMediaDetaching=function(){var t=this.media,e=(t&&t.ended&&(p.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),this.levels);e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},E.prototype.onMediaSeeked=function(){var t=this.media,t=t?t.currentTime:void 0;s.isFinite(t)&&p.logger.log("media seeked to "+t.toFixed(3)),this.tick()},E.prototype.onManifestLoading=function(){p.logger.log("trigger BUFFER_RESET"),this.hls.trigger(d.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},E.prototype.onManifestParsed=function(t){var e,r=!1,i=!1,t=(t.levels.forEach(function(t){(e=t.audioCodec)&&(-1!==e.indexOf("mp4a.40.2")&&(r=!0),-1!==e.indexOf("mp4a.40.5"))&&(i=!0)}),this.audioCodecSwitch=r&&i,this.audioCodecSwitch&&p.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1,this.config);(t.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(t.startPosition)},E.prototype.onLevelLoaded=function(t){var e,r=t.details,t=t.level,i=this.levels[this.levelLastLoaded],a=this.levels[t],n=r.totalduration,o=0;p.logger.log("level "+t+" loaded ["+r.startSN+","+r.endSN+"],duration:"+n),r.live?(e=a.details)&&0<r.fragments.length?(f.mergeDetails(e,r),o=r.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,e),r.PTSKnown&&s.isFinite(o)?p.logger.log("live playlist sliding:"+o.toFixed(3)):(p.logger.log("live playlist - outdated PTS, unknown sliding"),g.alignStream(this.fragPrevious,i,r))):(p.logger.log("live playlist - first load, unknown sliding"),r.PTSKnown=!1,g.alignStream(this.fragPrevious,i,r)):r.PTSKnown=!1,a.details=r,this.levelLastLoaded=t,this.hls.trigger(d.default.LEVEL_UPDATED,{details:r,level:t}),!1===this.startFragRequested&&(-1!==this.startPosition&&-1!==this.lastCurrentTime||(e=r.startTimeOffset,s.isFinite(e)?(e<0&&(p.logger.log("negative start time offset "+e+", count from end of last fragment"),e=o+n+e),p.logger.log("start time offset found in playlist, adjust startPosition to "+e),this.startPosition=e):r.live?(this.startPosition=this.computeLivePosition(o,r),p.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition),this.nextLoadPosition=this.startPosition),this.state===v.State.WAITING_LEVEL&&(this.state=v.State.IDLE),this.tick()},E.prototype.onKeyLoaded=function(){this.state===v.State.KEY_LOADING&&(this.state=v.State.IDLE,this.tick())},E.prototype.onFragLoaded=function(t){var e,r,i=this.fragCurrent,a=this.hls,n=this.levels,o=this.media,s=t.frag;this.state===v.State.FRAG_LOADING&&i&&"main"===s.type&&s.level===i.level&&s.sn===i.sn&&(r=t.stats,e=(n=n[i.level]).details,this.bitrateTest=!1,this.stats=r,p.logger.log("Loaded "+i.sn+" of ["+e.startSN+" ,"+e.endSN+"],level "+i.level),s.bitrateTest&&a.nextLoadLevel?(this.state=v.State.IDLE,this.startFragRequested=!1,r.tparsed=r.tbuffered=window.performance.now(),a.trigger(d.default.FRAG_BUFFERED,{stats:r,frag:i,id:"main"}),this.tick()):"initSegment"===s.sn?(this.state=v.State.IDLE,r.tparsed=r.tbuffered=window.performance.now(),e.initSegment.data=t.payload,a.trigger(d.default.FRAG_BUFFERED,{stats:r,frag:i,id:"main"}),this.tick()):(p.logger.log("Parsing "+i.sn+" of ["+e.startSN+" ,"+e.endSN+"],level "+i.level+", cc "+i.cc),this.state=v.State.PARSING,this.pendingBuffering=!0,this.appended=!1,s.bitrateTest&&(s.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:s})),a=!(o&&o.seeking)&&(e.PTSKnown||!e.live),r=e.initSegment?e.initSegment.data:[],s=this._getAudioCodec(n),(this.demuxer=this.demuxer||new u.default(this.hls,"main")).push(t.payload,r,s,n.videoCodec,i,e.totalduration,a))),this.fragLoadError=0},E.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;if(e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===v.State.PARSING){var i=t.tracks,a=void 0,n=void 0;for(a in i.audio&&this.altAudio&&delete i.audio,(n=i.audio)&&(r=this.levels[this.level].audioCodec,e=navigator.userAgent.toLowerCase(),r&&this.audioCodecSwap&&(p.logger.log("swapping playlist audio codec"),r=-1!==r.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==n.metadata.channelCount&&-1===e.indexOf("firefox")&&(r="mp4a.40.5"),-1!==e.indexOf("android")&&"audio/mpeg"!==n.container&&p.logger.log("Android: force audio codec to "+(r="mp4a.40.2")),n.levelCodec=r,n.id=t.id),(n=i.video)&&(n.levelCodec=this.levels[this.level].videoCodec,n.id=t.id),this.hls.trigger(d.default.BUFFER_CODECS,i),i){n=i[a],p.logger.log("main track:"+a+",container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var o=n.initSegment;o&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(d.default.BUFFER_APPENDING,{type:a,data:o,parent:"main",content:"initSegment"}))}this.tick()}},E.prototype.onFragParsingData=function(e){var r=this,t=this.fragCurrent,i=e.frag;if(t&&"main"===e.id&&i.sn===t.sn&&i.level===t.level&&("audio"!==e.type||!this.altAudio)&&this.state===v.State.PARSING){var i=this.levels[this.level],a=t;if(s.isFinite(e.endPTS)||(e.endPTS=e.startPTS+t.duration,e.endDTS=e.startDTS+t.duration),!0===e.hasAudio&&a.addElementaryStream(o.default.ElementaryStreamTypes.AUDIO),!0===e.hasVideo&&a.addElementaryStream(o.default.ElementaryStreamTypes.VIDEO),p.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped)if(a.backtracked)p.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{t=i.details;if(!t||a.sn!==t.startSN)return p.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=v.State.IDLE,this.fragPrevious=a,void this.tick();p.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var t=f.updateFragPTSDTS(i.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),n=this.hls;n.trigger(d.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:t,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(t){t&&t.length&&r.state===v.State.PARSING&&(r.appended=!0,r.pendingBuffering=!0,n.trigger(d.default.BUFFER_APPENDING,{type:e.type,data:t,parent:"main",content:"data"}))}),this.tick()}},E.prototype.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===v.State.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=v.State.PARSED,this._checkAppendedParsed())},E.prototype.onAudioTrackSwitching=function(t){var e=!!t.url,t=t.id;e||(this.mediaBuffer!==this.media&&(p.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media,(e=this.fragCurrent).loader&&(p.logger.log("switching to main audio track, cancel main fragment load"),e.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=v.State.IDLE),(e=this.hls).trigger(d.default.BUFFER_FLUSHING,{startOffset:0,endOffset:s.POSITIVE_INFINITY,type:"audio"}),e.trigger(d.default.AUDIO_TRACK_SWITCHED,{id:t}),this.altAudio=!1)},E.prototype.onAudioTrackSwitched=function(t){var e,t=t.id,t=!!this.hls.audioTracks[t].url;t&&(e=this.videoBuffer)&&this.mediaBuffer!==e&&(p.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e),this.altAudio=t,this.tick()},E.prototype.onBufferCreated=function(t){var e,r,i,a=t.tracks,n=!1;for(i in a){var o=a[i];"main"===o.id?(e=o,"video"===(r=i)&&(this.videoBuffer=a[i].buffer)):n=!0}n&&e?(p.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=e.buffer):this.mediaBuffer=this.media},E.prototype.onBufferAppended=function(t){var e;"main"!==t.parent||(e=this.state)!==v.State.PARSING&&e!==v.State.PARSED||(this.pendingBuffering=0<t.pending,this._checkAppendedParsed())},E.prototype._checkAppendedParsed=function(){var t,e;this.state!==v.State.PARSED||this.appended&&this.pendingBuffering||((t=this.fragCurrent)&&(e=this.mediaBuffer||this.media,p.logger.log("main buffered : "+n.default.toString(e.buffered)),this.fragPrevious=t,(e=this.stats).tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*e.total/(e.tbuffered-e.tfirst)),this.hls.trigger(d.default.FRAG_BUFFERED,{stats:e,frag:t,id:"main"}),this.state=v.State.IDLE),this.tick())},E.prototype.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var r,i=!!this.media&&l.BufferHelper.isBuffered(this.media,this.media.currentTime)&&l.BufferHelper.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:t.fatal||(this.fragLoadError+1<=this.config.fragLoadingMaxRetry?(r=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout),p.logger.warn("mediaController: frag loading failed, retry in "+r+" ms"),this.retryDate=window.performance.now()+r,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=v.State.FRAG_LOADING_WAITING_RETRY):(p.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=v.State.ERROR));break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==v.State.ERROR&&(t.fatal?(this.state=v.State.ERROR,p.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==v.State.WAITING_LEVEL||(this.state=v.State.IDLE));break;case h.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==v.State.PARSING&&this.state!==v.State.PARSED||(i?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=v.State.IDLE):(p.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,s.POSITIVE_INFINITY)))}}},E.prototype._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,p.logger.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},E.prototype._checkBuffer=function(){var t=this.media;t&&0!==t.readyState&&(t=(this.mediaBuffer||t).buffered,!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t))},E.prototype.onFragLoadEmergencyAborted=function(){this.state=v.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},E.prototype.onBufferFlushed=function(){var t=this.mediaBuffer||this.media;t&&this.fragmentTracker.detectEvictedFragments(o.default.ElementaryStreamTypes.VIDEO,t.buffered),this.state=v.State.IDLE,this.fragPrevious=null},E.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},E.prototype.computeLivePosition=function(t,e){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-r)},E.prototype._seekToStartPos=function(){var t=this.media,e=t.currentTime,r=t.seeking?e:this.startPosition;e!==r&&(p.logger.log("target start position not buffered, seek to buffered.start(0) "+r+" from current time "+e+" "),t.currentTime=r)},E.prototype._getAudioCodec=function(t){t=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(p.logger.log("swapping playlist audio codec"),t=t&&(-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},Object.defineProperty(E.prototype,"liveSyncPosition",{get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t},enumerable:!0,configurable:!0}),E);function E(t,e){var r=a.call(this,t,d.default.MEDIA_ATTACHED,d.default.MEDIA_DETACHING,d.default.MANIFEST_LOADING,d.default.MANIFEST_PARSED,d.default.LEVEL_LOADED,d.default.KEY_LOADED,d.default.FRAG_LOADED,d.default.FRAG_LOAD_EMERGENCY_ABORTED,d.default.FRAG_PARSING_INIT_SEGMENT,d.default.FRAG_PARSING_DATA,d.default.FRAG_PARSED,d.default.ERROR,d.default.AUDIO_TRACK_SWITCHING,d.default.AUDIO_TRACK_SWITCHED,d.default.BUFFER_CREATED,d.default.BUFFER_APPENDED,d.default.BUFFER_FLUSHED)||this;return r.fragmentTracker=e,r.config=t.config,r.audioCodecSwap=!1,r._state=v.State.STOPPED,r.stallReported=!1,r.gapController=null,r}_.default=t}.call(this,T(2).Number)},function(t,e,f){function n(r){var i={};function a(t){var e;return(i[t]||(e=i[t]={i:t,l:!1,exports:{}},r[t].call(e.exports,e,e.exports,a),e.l=!0,e)).exports}a.m=r,a.c=i,a.i=function(t){return t},a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},a.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a.oe=function(t){throw console.error(t),t};var t=a(a.s=ENTRY_MODULE);return t.default||t}var c="[\\.|\\-|\\+|\\w|/|@]+",h="\\((/\\*.*?\\*/)?s?.*?("+c+").*?\\)";function p(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function g(t,e,r){var i={},a=(i[r]=[],e.toString()),e=a.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(e){for(var n,e=e[1],o=new RegExp("(\\\\n|\\W)"+p(e)+h,"g");n=o.exec(a);)"dll-reference"!==n[3]&&i[r].push(n[3]);for(o=new RegExp("\\("+p(e)+'\\("(dll-reference\\s('+c+'))"\\)\\)'+h,"g");n=o.exec(a);)t[n[2]]||(i[r].push(n[1]),t[n[2]]=f(n[1]).m),i[n[2]]=i[n[2]]||[],i[n[2]].push(n[4]);for(var s,l=Object.keys(i),u=0;u<l.length;u++)for(var d=0;d<i[l[u]].length;d++)s=i[l[u]][d],isNaN(+s)||(i[l[u]][d]=+i[l[u]][d])}return i}t.exports=function(c,t){var r={main:f.m},i=(t=t||{}).all?{main:Object.keys(r.main)}:function(t){for(var e={main:[c]},r={main:[]},i={main:{}};function(r){return Object.keys(r).reduce(function(t,e){return t||0<r[e].length},!1)}(e);)for(var a=Object.keys(e),n=0;n<a.length;n++){var o=a[n],s=e[o].pop();if(i[o]=i[o]||{},!i[o][s]&&t[o][s]){i[o][s]=!0,r[o]=r[o]||[],r[o].push(s);for(var l=g(t,t[o][s],o),u=Object.keys(l),d=0;d<u.length;d++)e[u[d]]=e[u[d]]||[],e[u[d]]=e[u[d]].concat(l[u[d]])}}return r}(r),a="",e=(Object.keys(i).filter(function(t){return"main"!==t}).forEach(function(e){for(var t=0;i[e][t];)t++;i[e].push(t),r[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i[e].map(function(t){return JSON.stringify(t)+": "+r[e][t].toString()}).join(",")+"});\n"}),a=a+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(c))+")({"+i.main.map(function(t){return JSON.stringify(t)+": "+r.main[t].toString()}).join(",")+"}))(self);",new window.Blob([a],{type:"text/javascript"}));return t.bare||(t=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(e),(e=new window.Worker(t)).objectURL=t),e}},function(t,e,r){"use strict";function i(t,e){this.subtle=t,this.aesIV=e}Object.defineProperty(e,"__esModule",{value:!0}),i.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},e.default=i},function(t,e,r){"use strict";function i(t,e){this.subtle=t,this.key=e}Object.defineProperty(e,"__esModule",{value:!0}),i.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e.default=i},function(t,e,r){"use strict";function C(t){var e=t.byteLength,r=e&&new DataView(t).getUint8(e-1);return r?t.slice(0,e-r):t}function i(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}Object.defineProperty(e,"__esModule",{value:!0}),e.removePadding=C,i.prototype.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),i=0;i<4;i++)r[i]=e.getUint32(4*i);return r},i.prototype.initTable=function(){for(var t=this.sBox,e=this.invSBox,r=this.subMix,i=r[0],a=r[1],n=r[2],o=r[3],r=this.invSubMix,s=r[0],l=r[1],u=r[2],d=r[3],c=new Uint32Array(256),f=0,h=0,p=0,p=0;p<256;p++)c[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){var g=h^h<<1^h<<2^h<<3^h<<4,y=(t[f]=g=g>>>8^255&g^99,c[e[g]=f]),m=c[y],v=c[m],E=257*c[g]^16843008*g;i[f]=E<<24|E>>>8,a[f]=E<<16|E>>>16,n[f]=E<<8|E>>>24,o[f]=E,s[g]=(E=16843009*v^65537*m^257*y^16843008*f)<<24|E>>>8,l[g]=E<<16|E>>>16,u[g]=E<<8|E>>>24,d[g]=E,f?(f=y^c[c[c[v^y]]],h^=c[c[h]]):f=h=1}},i.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,i=0;i<e.length&&r;)r=e[i]===this.key[i],i++;if(!r){this.key=e;var a=this.keySize=e.length;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size="+a);for(var n,o,s,l=this.ksRows=4*(a+6+1),u=this.keySchedule=new Uint32Array(l),d=this.invKeySchedule=new Uint32Array(l),c=this.sBox,f=this.rcon,t=this.invSubMix,h=t[0],p=t[1],g=t[2],y=t[3],m=0;m<l;m++)m<a?o=u[m]=e[m]:(s=o,m%a==0?(s=c[(s=s<<8|s>>>24)>>>24]<<24|c[s>>>16&255]<<16|c[s>>>8&255]<<8|c[255&s],s^=f[m/a|0]<<24):6<a&&m%a==4&&(s=c[s>>>24]<<24|c[s>>>16&255]<<16|c[s>>>8&255]<<8|c[255&s]),u[m]=o=(u[m-a]^s)>>>0);for(n=0;n<l;n++)m=l-n,s=3&n?u[m]:u[m-4],d[n]=n<4||m<=4?s:h[c[s>>>24]]^p[c[s>>>16&255]]^g[c[s>>>8&255]]^y[c[255&s]],d[n]=d[n]>>>0}},i.prototype.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},i.prototype.decrypt=function(t,e,r,i){for(var a,n,o,s,l,u,d,c,f,h,p,g,y,m,v=this.keySize+6,E=this.invKeySchedule,_=this.invSBox,T=this.invSubMix,S=T[0],b=T[1],A=T[2],R=T[3],T=this.uint8ArrayToUint32Array_(r),D=T[0],L=T[1],O=T[2],w=T[3],I=new Int32Array(t),P=new Int32Array(I.length),k=this.networkToHostOrderSwap;e<I.length;){for(f=k(I[e]),h=k(I[e+1]),p=k(I[e+2]),g=k(I[e+3]),l=f^E[0],u=g^E[1],d=p^E[2],c=h^E[3],y=4,m=1;m<v;m++)a=S[l>>>24]^b[u>>16&255]^A[d>>8&255]^R[255&c]^E[y],n=S[u>>>24]^b[d>>16&255]^A[c>>8&255]^R[255&l]^E[y+1],o=S[d>>>24]^b[c>>16&255]^A[l>>8&255]^R[255&u]^E[y+2],s=S[c>>>24]^b[l>>16&255]^A[u>>8&255]^R[255&d]^E[y+3],l=a,u=n,d=o,c=s,y+=4;a=_[l>>>24]<<24^_[u>>16&255]<<16^_[d>>8&255]<<8^_[255&c]^E[y],n=_[u>>>24]<<24^_[d>>16&255]<<16^_[c>>8&255]<<8^_[255&l]^E[y+1],o=_[d>>>24]<<24^_[c>>16&255]<<16^_[l>>8&255]<<8^_[255&u]^E[y+2],s=_[c>>>24]<<24^_[l>>16&255]<<16^_[u>>8&255]<<8^_[255&d]^E[y+3],y+=3,P[e]=k(a^D),P[e+1]=k(s^L),P[e+2]=k(o^O),P[e+3]=k(n^w),D=f,L=h,O=p,w=g,e+=4}return i?C(P.buffer):P.buffer},i.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e.default=i},function(t,e,r){"use strict";!function(p){Object.defineProperty(e,"__esModule",{value:!0});var g=r(22),y=r(0),m=r(10);function t(t,e,r){this.observer=t,this.config=r,this.remuxer=e}t.prototype.resetInitSegment=function(t,e,r,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){if(t)for(var e=(m.default.getID3Data(t,0)||[]).length,r=t.length;e<r;e++)if(g.probe(t,e))return y.logger.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,e,r,i){for(var a=this._audioTrack,n=m.default.getID3Data(t,0)||[],o=m.default.getTimeStamp(n),s=p.isFinite(o)?90*o:9e4*e,l=0,u=s,d=t.length,c=n.length,f=[{pts:u,dts:u,data:n}];c<d-1;)if(g.isHeader(t,c)&&c+5<d){g.initTrackConfig(a,this.observer,t,c,a.manifestCodec);var h=g.appendFrame(a,t,c,s,l);if(!h){y.logger.log("Unable to parse AAC frame");break}c+=h.length,u=h.sample.pts,l++}else m.default.isHeader(t,c)?(n=m.default.getID3Data(t,c),f.push({pts:u,dts:u,data:n}),c+=n.length):c++;this.remuxer.remux(a,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},e,r,i)},t.prototype.destroy=function(){},e.default=t}.call(this,r(2).Number)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=r(22),s=r(23),P=r(1),S=r(44),i=r(45),k=r(0),C=r(3),a={video:1,audio:2,id3:3,text:4};function F(t,e,r,i){this.observer=t,this.config=r,this.typeSupported=i,this.remuxer=e,this.sampleAes=null}F.prototype.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new i.default(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},F.probe=function(t){t=F._syncOffset(t);return!(t<0||(t&&k.logger.warn("MPEG2-TS detected but first sync word found @ offset "+t+", junk ahead ?"),0))},F._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),r=0;r<e;){if(71===t[r]&&71===t[r+188]&&71===t[r+376])return r;r++}return-1},F.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:a[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},F.prototype.resetInitSegment=function(t,e,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=F.createTrack("video",i),this._audioTrack=F.createTrack("audio",i),this._id3Track=F.createTrack("id3",i),this._txtTrack=F.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=r,this._duration=i},F.prototype.resetTimeStamp=function(){},F.prototype.append=function(t,e,r,i){var a,n,o,s,l,u=t.length,d=!1,c=(this.contiguous=r,this.pmtParsed),f=this._avcTrack,h=this._audioTrack,p=this._id3Track,g=f.pid,y=h.pid,m=p.pid,v=this._pmtId,E=f.pesData,_=h.pesData,T=p.pesData,S=this._parsePAT,b=this._parsePMT,A=this._parsePES,R=this._parseAVCPES.bind(this),D=this._parseAACPES.bind(this),L=this._parseMPEGPES.bind(this),O=this._parseID3PES.bind(this),w=F._syncOffset(t);for(u-=(u+w)%188,a=w;a<u;a+=188)if(71===t[a]){if(n=!!(64&t[a+1]),o=((31&t[a+1])<<8)+t[a+2],1<(48&t[a+3])>>4){if((s=a+5+t[a+4])===a+188)continue}else s=a+4;switch(o){case g:n&&(E&&(l=A(E))&&void 0!==l.pts&&R(l,!1),E={data:[],size:0}),E&&(E.data.push(t.subarray(s,a+188)),E.size+=a+188-s);break;case y:n&&(_&&(l=A(_))&&void 0!==l.pts&&(h.isAAC?D:L)(l),_={data:[],size:0}),_&&(_.data.push(t.subarray(s,a+188)),_.size+=a+188-s);break;case m:n&&(T&&(l=A(T))&&void 0!==l.pts&&O(l),T={data:[],size:0}),T&&(T.data.push(t.subarray(s,a+188)),T.size+=a+188-s);break;case 0:n&&(s+=t[s]+1),v=this._pmtId=S(t,s);break;case v:n&&(s+=t[s]+1);var I=b(t,s,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);0<(g=I.avc)&&(f.pid=g),0<(y=I.audio)&&(h.pid=y,h.isAAC=I.isAAC),0<(m=I.id3)&&(p.pid=m),d&&!c&&(k.logger.log("reparse from beginning"),d=!1,a=w-188),c=this.pmtParsed=!0;break;case 17:case 8191:break;default:d=!0}}else this.observer.trigger(P.default.ERROR,{type:C.ErrorTypes.MEDIA_ERROR,details:C.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});E&&(l=A(E))&&void 0!==l.pts?(R(l,!0),f.pesData=null):f.pesData=E,_&&(l=A(_))&&void 0!==l.pts?((h.isAAC?D:L)(l),h.pesData=null):(_&&_.size&&k.logger.log("last AAC PES packet truncated,might overlap between fragments"),h.pesData=_),T&&(l=A(T))&&void 0!==l.pts?(O(l),p.pesData=null):p.pesData=T,null==this.sampleAes?this.remuxer.remux(h,f,p,this._txtTrack,e,r,i):this.decryptAndRemux(h,f,p,this._txtTrack,e,r,i)},F.prototype.decryptAndRemux=function(t,e,r,i,a,n,o){var s;t.samples&&t.isAAC?(s=this).sampleAes.decryptAacSamples(t.samples,0,function(){s.decryptAndRemuxAvc(t,e,r,i,a,n,o)}):this.decryptAndRemuxAvc(t,e,r,i,a,n,o)},F.prototype.decryptAndRemuxAvc=function(t,e,r,i,a,n,o){var s;e.samples?(s=this).sampleAes.decryptAvcSamples(e.samples,0,0,function(){s.remuxer.remux(t,e,r,i,a,n,o)}):this.remuxer.remux(t,e,r,i,a,n,o)},F.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},F.prototype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},F.prototype._parsePMT=function(t,e,r,i){var a,n={audio:-1,avc:-1,id3:-1,isAAC:!0},o=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<o;){switch(a=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!i){k.logger.log("unkown stream type:"+t[e]);break}case 15:-1===n.audio&&(n.audio=a);break;case 21:-1===n.id3&&(n.id3=a);break;case 219:if(!i){k.logger.log("unkown stream type:"+t[e]);break}case 27:-1===n.avc&&(n.avc=a);break;case 3:case 4:r?-1===n.audio&&(n.audio=a,n.isAAC=!1):k.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:k.logger.warn("HEVC stream type found, not supported for now");break;default:k.logger.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return n},F.prototype._parsePES=function(t){var e,r,i,a,n,o,s=0,l=t.data;if(!t||0===t.size)return null;for(;l[0].length<19&&1<l.length;){var u=new Uint8Array(l[0].length+l[1].length);u.set(l[0]),u.set(l[1],l[0].length),l[0]=u,l.splice(1,1)}if(1!==((e=l[0])[0]<<16)+(e[1]<<8)+e[2])return null;if((r=(e[4]<<8)+e[5])&&r>t.size-6)return null;192&(i=e[7])&&(4294967295<(a=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2)&&(a-=8589934592),64&i?(4294967295<(n=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)&&(n-=8589934592),54e5<a-n&&(k.logger.warn(Math.round((a-n)/9e4)+"s delta between PTS and DTS, align them"),a=n)):n=a),o=(i=e[8])+9,t.size-=o;for(var d=new Uint8Array(t.size),c=0,f=l.length;c<f;c++){var h=(e=l[c]).byteLength;if(o){if(h<o){o-=h;continue}e=e.subarray(o),h-=o,o=0}d.set(e,s),s+=h}return r&&(r-=i+3),{data:d,pts:a,dts:n,len:r}},F.prototype.pushAccesUnit=function(t,e){var r,i;t.units.length&&t.frame&&(i=(r=e.samples).length,!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(i||this.contiguous)?(t.id=i,r.push(t)):e.dropped++),t.debug.length&&k.logger.log(t.pts+"/"+t.dts+":"+t.debug)},F.prototype._parseAVCPES=function(f,t){function h(t,e,r,i){return{key:t,pts:e,dts:r,units:[],debug:i}}var p,g,y,m=this,v=this._avcTrack,e=this._parseAVCNALu(f.data),E=this.avcSample,_=!1,T=this.pushAccesUnit.bind(this);f.data=null,E&&e.length&&!v.audFound&&(T(E,v),E=this.avcSample=h(!1,f.pts,f.dts,"")),e.forEach(function(t){switch(t.type){case 1:g=!0,(E=E||(m.avcSample=h(!0,f.pts,f.dts,""))).frame=!0;var e=t.data;_&&4<e.length&&(2!==(e=new S.default(e).readSliceType())&&4!==e&&7!==e&&9!==e||(E.key=!0));break;case 5:g=!0,(E=E||(m.avcSample=h(!0,f.pts,f.dts,""))).key=!0,E.frame=!0;break;case 6:g=!0,(p=new S.default(m.discardEPB(t.data))).readUByte();for(var r=0,i=0,a=!1,n=0;!a&&1<p.bytesAvailable;){for(r=0;r+=n=p.readUByte(),255===n;);for(i=0;i+=n=p.readUByte(),255===n;);if(4===r&&0!==p.bytesAvailable){if(a=!0,181===p.readUByte()&&49===p.readUShort()&&1195456820===p.readUInt()&&3===p.readUByte()){var o=p.readUByte(),s=31&o,l=[o,p.readUByte()];for(y=0;y<s;y++)l.push(p.readUByte()),l.push(p.readUByte()),l.push(p.readUByte());m._insertSampleInOrder(m._txtTrack.samples,{type:3,pts:f.pts,bytes:l})}}else if(i<p.bytesAvailable)for(y=0;y<i;y++)p.readUByte()}break;case 7:if(_=g=!0,!v.sps){var e=(p=new S.default(t.data)).readSPS(),u=(v.width=e.width,v.height=e.height,v.pixelRatio=e.pixelRatio,v.sps=[t.data],v.duration=m._duration,t.data.subarray(1,4)),d="avc1.";for(y=0;y<3;y++){var c=u[y].toString(16);d+=c=c.length<2?"0"+c:c}v.codec=d}break;case 8:g=!0,v.pps||(v.pps=[t.data]);break;case 9:g=!1,v.audFound=!0,E&&T(E,v),E=m.avcSample=h(!1,f.pts,f.dts,"");break;case 12:g=!1;break;default:g=!1,E&&(E.debug+="unknown NAL "+t.type+" ")}E&&g&&E.units.push(t)}),t&&E&&(T(E,v),this.avcSample=null)},F.prototype._insertSampleInOrder=function(t,e){var r=t.length;if(0<r){if(e.pts>=t[r-1].pts)t.push(e);else for(var i=r-1;0<=i;i--)if(e.pts<t[i].pts){t.splice(i,0,e);break}}else t.push(e)},F.prototype._getLastNalUnit=function(){var t,e,r=this.avcSample;return e=(r=r&&0!==r.units.length?r:(t=this._avcTrack.samples)[t.length-1])?(t=r.units)[t.length-1]:e},F.prototype._parseAVCNALu=function(t){var e,r,i,a,n,o,s=0,l=t.byteLength,u=this._avcTrack,d=u.naluState||0,c=d,f=[],h=-1;for(-1===d&&(a=31&t[h=0],d=0,s=1);s<l;)e=t[s++],d=d?1!==d?e?1===e?(0<=h?(i={data:t.subarray(h,s-d-1),type:a},f.push(i)):(n=this._getLastNalUnit())&&(c&&s<=4-c&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-c)),0<(r=s-d-1))&&((o=new Uint8Array(n.data.byteLength+r)).set(n.data,0),o.set(t.subarray(0,r),n.data.byteLength),n.data=o),s<l?(a=31&t[h=s],0):-1):0:3:e?0:2:e?0:1;return 0<=h&&0<=d&&(i={data:t.subarray(h,l),type:a,state:d},f.push(i)),0===f.length&&(n=this._getLastNalUnit())&&((o=new Uint8Array(n.data.byteLength+t.byteLength)).set(n.data,0),o.set(t,n.data.byteLength),n.data=o),u.naluState=d,f},F.prototype.discardEPB=function(t){for(var e=t.byteLength,r=[],i=1;i<e-2;)0===t[i]&&0===t[i+1]&&3===t[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return t;for(var a=e-r.length,n=new Uint8Array(a),o=0,i=0;i<a;o++,i++)o===r[0]&&(o++,r.shift()),n[i]=t[o];return n},F.prototype._parseAACPES=function(t){var e,r,i,a,n=this._audioTrack,o=t.data,s=t.pts,t=this.aacOverFlow,l=this.aacLastPTS;for(t&&((u=new Uint8Array(t.byteLength+o.byteLength)).set(t,0),u.set(o,t.byteLength),o=u),r=0,a=o.length;r<a-1&&!f.isHeader(o,r);r++);if(r){var u=void 0,d=void 0,d=r<a-1?(u="AAC PES did not start with ADTS header,offset:"+r,!1):(u="no ADTS header found in AAC PES",!0);if(k.logger.warn("parsing error:"+u),this.observer.trigger(P.default.ERROR,{type:C.ErrorTypes.MEDIA_ERROR,details:C.ErrorDetails.FRAG_PARSING_ERROR,fatal:d,reason:u}),d)return}for(f.initTrackConfig(n,this.observer,o,r,this.audioCodec),e=0,u=f.getFrameDuration(n.samplerate),t&&l&&(d=l+u,1<Math.abs(d-s))&&(k.logger.log("AAC: align PTS for overlapping frames by "+Math.round((d-s)/90)),s=d);r<a;)if(f.isHeader(o,r)&&r+5<a){var c=f.appendFrame(n,o,r,s,e);if(!c)break;r+=c.length,i=c.sample.pts,e++}else r++;t=r<a?o.subarray(r,a):null,this.aacOverFlow=t,this.aacLastPTS=i},F.prototype._parseMPEGPES=function(t){for(var e=t.data,r=e.length,i=0,a=0,n=t.pts;a<r;)if(s.default.isHeader(e,a)){var o=s.default.appendFrame(this._audioTrack,e,a,n,i);if(!o)break;a+=o.length,i++}else a++},F.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},e.default=F},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0);function a(t){this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}a.prototype.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,i=new Uint8Array(4),e=Math.min(4,e);if(0===e)throw new Error("no bytes available");i.set(t.subarray(r,r+e)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*e,this.bytesAvailable-=e},a.prototype.skipBits=function(t){var e;this.bitsAvailable>t||(t=(t-=this.bitsAvailable)-((e=t>>3)>>3),this.bytesAvailable-=e,this.loadWord()),this.word<<=t,this.bitsAvailable-=t},a.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return 32<t&&i.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,0<this.bitsAvailable?this.word<<=e:0<this.bytesAvailable&&this.loadWord(),0<(e=t-e)&&this.bitsAvailable?r<<e|this.readBits(e):r},a.prototype.skipLZ=function(){for(var t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},a.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},a.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},a.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},a.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},a.prototype.readBoolean=function(){return 1===this.readBits(1)},a.prototype.readUByte=function(){return this.readBits(8)},a.prototype.readUShort=function(){return this.readBits(16)},a.prototype.readUInt=function(){return this.readBits(32)},a.prototype.skipScalingList=function(t){for(var e=8,r=8,i=0;i<t;i++)e=0===(r=0!==r?(e+this.readEG()+256)%256:r)?e:r},a.prototype.readSPS=function(){var t,e,r,i=0,a=0,n=0,o=0,s=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),d=this.readBoolean.bind(this),c=this.skipBits.bind(this),f=this.skipEG.bind(this),h=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);if(s(),g=s(),l(5),c(3),s(),h(),100===g||110===g||122===g||244===g||44===g||83===g||86===g||118===g||128===g){var g=u();if(3===g&&c(1),h(),h(),c(1),d())for(e=3!==g?8:12,r=0;r<e;r++)d()&&p(r<6?16:64)}h();var g=u();if(0===g)u();else if(1===g)for(c(1),f(),f(),t=u(),r=0;r<t;r++)f();h(),c(1),g=u(),h=u(),0===(l=l(1))&&c(1),c(1),d()&&(i=u(),a=u(),n=u(),o=u());var y=[1,1];if(d()&&d())switch(s()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[s()<<8|s(),s()<<8|s()]}return{width:Math.ceil(16*(g+1)-2*i-2*a),height:(2-l)*(h+1)*16-(l?2:4)*(n+o),pixelRatio:y}},a.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(12);function i(t,e,r,i){this.decryptdata=r,this.discardEPB=i,this.decrypter=new a.default(t,e,{removePKCS7Padding:!1})}i.prototype.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},i.prototype.decryptAacSample=function(e,r,i,a){var n=e[r].unit,t=n.subarray(16,n.length-n.length%16),t=t.buffer.slice(t.byteOffset,t.byteOffset+t.length),o=this;this.decryptBuffer(t,function(t){t=new Uint8Array(t),n.set(t,16),a||o.decryptAacSamples(e,r+1,i)})},i.prototype.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(t,e,r,i),!i)return}}},i.prototype.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),i=0,a=32;a<=t.length-16;a+=160,i+=16)r.set(t.subarray(a,a+16),i);return r},i.prototype.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var r=0,i=32;i<=t.length-16;i+=160,r+=16)t.set(e.subarray(r,r+16),i);return t},i.prototype.decryptAvcSample=function(e,r,i,a,n,o){var s=this.discardEPB(n.data),t=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(t.buffer,function(t){n.data=l.getAvcDecryptedUnit(s,t),o||l.decryptAvcSamples(e,r,i+1,a)})},i.prototype.decryptAvcSamples=function(t,e,r,i){for(;;e++,r=0){if(e>=t.length)return void i();for(var a=t[e].units;!(r>=a.length);r++){var n=a[r];if(!(n.length<=48||1!==n.type&&5!==n.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(t,e,r,i,n,o),!o)return}}}},e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=r(10),a=r(0),g=r(23);function i(t,e,r){this.observer=t,this.config=r,this.remuxer=e}i.prototype.resetInitSegment=function(t,e,r,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},i.prototype.resetTimeStamp=function(){},i.probe=function(t){var e,r,i=p.default.getID3Data(t,0);if(i&&void 0!==p.default.getTimeStamp(i))for(e=i.length,r=Math.min(t.length-1,e+100);e<r;e++)if(g.default.probe(t,e))return a.logger.log("MPEG Audio sync word found !"),!0;return!1},i.prototype.append=function(t,e,r,i){for(var a=p.default.getID3Data(t,0),n=p.default.getTimeStamp(a),o=n?90*n:9e4*e,s=a.length,l=t.length,u=0,d=0,c=this._audioTrack,f=[{pts:o,dts:o,data:a}];s<l;)if(g.default.isHeader(t,s)){var h=g.default.appendFrame(c,t,s,o,u);if(!h)break;s+=h.length,d=h.sample.pts,u++}else p.default.isHeader(t,s)?(a=p.default.getID3Data(t,s),f.push({pts:d,dts:d,data:a}),s+=a.length):s++;this.remuxer.remux(c,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},e,r,i)},i.prototype.destroy=function(){},e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var x=r(48),M=r(49),N=r(1),U=r(3),B=r(0);function i(t,e,r,i){this.observer=t,this.config=e,this.typeSupported=r;t=navigator.userAgent;this.isSafari=i&&-1<i.indexOf("Apple")&&t&&!t.match("CriOS"),this.ISGenerated=!1}i.prototype.destroy=function(){},i.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},i.prototype.resetInitSegment=function(){this.ISGenerated=!1},i.prototype.remux=function(t,e,r,i,a,n,o){var s,l,u,d,c;this.ISGenerated||this.generateIS(t,e,a),this.ISGenerated&&(d=t.samples.length,s=e.samples.length,u=l=a,d&&s&&(c=(t.samples[0].pts-e.samples[0].pts)/e.inputTimeScale,l+=Math.max(0,c),u+=Math.max(0,-c)),d?(t.timescale||(B.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,a)),c=this.remuxAudio(t,l,n,o),s&&(d=void 0,c&&(d=c.endPTS-c.startPTS),e.timescale||(B.logger.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,a)),this.remuxVideo(e,u,n,d,o))):s&&(c=this.remuxVideo(e,u,n,0,o))&&t.codec&&this.remuxEmptyAudio(t,l,n,c)),r.samples.length&&this.remuxID3(r,a),i.samples.length&&this.remuxText(i,a),this.observer.trigger(N.default.FRAG_PARSED)},i.prototype.generateIS=function(t,e,r){var i,a,n=this.observer,o=t.samples,s=e.samples,l=this.typeSupported,u="audio/mp4",d={},c={tracks:d},f=void 0===this._initPTS;f&&(i=a=1/0),t.config&&o.length&&(t.timescale=t.samplerate,B.logger.log("audio sampling rate : "+t.samplerate),t.isAAC||(l.mpeg?(u="audio/mpeg",t.codec=""):l.mp3&&(t.codec="mp3")),d.audio={container:u,codec:t.codec,initSegment:!t.isAAC&&l.mpeg?new Uint8Array:M.default.initSegment([t]),metadata:{channelCount:t.channelCount}},f)&&(i=a=o[0].pts-t.inputTimeScale*r),e.sps&&e.pps&&s.length&&(u=e.inputTimeScale,e.timescale=u,d.video={container:"video/mp4",codec:e.codec,initSegment:M.default.initSegment([e]),metadata:{width:e.width,height:e.height}},f)&&(i=Math.min(i,s[0].pts-u*r),a=Math.min(a,s[0].dts-u*r),this.observer.trigger(N.default.INIT_PTS_FOUND,{initPTS:i})),Object.keys(d).length?(n.trigger(N.default.FRAG_PARSING_INIT_SEGMENT,c),this.ISGenerated=!0,f&&(this._initPTS=i,this._initDTS=a)):n.trigger(N.default.ERROR,{type:U.ErrorTypes.MEDIA_ERROR,details:U.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},i.prototype.remuxVideo=function(t,e,r,i,a){var n,o,s=8,l=t.timescale,u=t.samples,d=[],c=u.length,f=this._PTSNormalize,h=this._initPTS,p=this.nextAvcDts,g=this.isSafari;if(0!==c){g&&(r|=u.length&&p&&(a&&Math.abs(e-p/l)<.1||Math.abs(u[0].pts-p-h)<l/5)),r||(p=e*l),u.forEach(function(t){t.pts=f(t.pts-h,p),t.dts=f(t.dts-h,p)}),u.sort(function(t,e){var r=t.dts-e.dts,i=t.pts-e.pts;return r||i||t.id-e.id});var y=u.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(y<0){B.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(y/90)+" ms to overcome this issue");for(var m=0;m<u.length;m++)u[m].dts+=y}for(var a=u[0],v=Math.max(a.dts,0),E=Math.max(a.pts,0),e=Math.round((v-p)/90),_=(r&&e&&(1<e?B.logger.log("AVC:"+e+" ms hole between fragments detected,filling it"):e<-1&&B.logger.log("AVC:"+-e+" ms overlapping between fragments detected"),v=p,u[0].dts=v,E=Math.max(E-e,p),u[0].pts=E,B.logger.log("Video/PTS/DTS adjusted: "+Math.round(E/90)+"/"+Math.round(v/90)+",delta:"+e+" ms")),a=u[u.length-1],r=Math.max(a.dts,0),e=Math.max(a.pts,0,r),g&&(n=Math.round((r-v)/(u.length-1))),0),T=0,m=0;m<c;m++){for(var S=u[m],b=S.units,A=b.length,R=0,D=0;D<A;D++)R+=b[D].data.length;T+=R,_+=A,S.length=R,S.dts=g?v+m*n:Math.max(S.dts,v),S.pts=Math.max(S.pts,S.dts)}a=T+4*_+8;try{o=new Uint8Array(a)}catch(t){return void this.observer.trigger(N.default.ERROR,{type:U.ErrorTypes.MUX_ERROR,details:U.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:a,reason:"fail allocating video mdat "+a})}var L=new DataView(o.buffer);for(L.setUint32(0,a),o.set(M.default.types.mdat,4),m=0;m<c;m++){for(var O,w,I=u[m],P=I.units,k=0,C=void 0,D=0,A=P.length;D<A;D++){var F=P[D],x=F.data,F=F.data.byteLength;L.setUint32(s,F),s+=4,o.set(x,s),s+=F,k+=4+F}C=g?Math.max(0,n*Math.round((I.pts-I.dts)/n)):(m<c-1?n=u[m+1].dts-I.dts:(w=this.config,O=I.dts-u[0<m?m-1:m].dts,w.stretchShortVideoTrack&&(w=w.maxBufferHole,Math.floor(w*l)<(w=(i?E+i*l:this.nextAudioPts)-I.pts))?((n=w-O)<0&&(n=O),B.logger.log("It is approximately "+w/90+" ms to the next segment; using duration "+n/90+" ms for the last video frame.")):n=O),Math.round(I.pts-I.dts)),d.push({size:k,duration:n,cts:C,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:I.key?2:1,isNonSync:I.key?0:1}})}this.nextAvcDts=r+n;a=t.dropped,r=(t.len=0,t.nbNalu=0,t.dropped=0,d.length&&-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&((r=d[0].flags).dependsOn=2,r.isNonSync=0),t.samples=d,r=M.default.moof(t.sequenceNumber++,v,t),t.samples=[],{data1:r,data2:o,startPTS:E/l,endPTS:(e+n)/l,startDTS:v/l,endDTS:this.nextAvcDts/l,type:"video",hasAudio:!1,hasVideo:!0,nb:d.length,dropped:a});return this.observer.trigger(N.default.FRAG_PARSING_DATA,r),r}},i.prototype.remuxAudio=function(t,e,r,i){var a,n,o,s,l,u=t.inputTimeScale,d=t.timescale,c=u/d,f=(t.isAAC?1024:1152)*c,h=this._PTSNormalize,p=this._initPTS,g=!t.isAAC&&this.typeSupported.mpeg,y=t.samples,m=[],v=this.nextAudioPts;if(r|=y.length&&v&&(i&&Math.abs(e-v/u)<.1||Math.abs(y[0].pts-v-p)<20*f),y.forEach(function(t){t.pts=t.dts=h(t.pts-p,e*u)}),0!==(y=y.filter(function(t){return 0<=t.pts})).length){if(r||(v=i?e*u:y[0].pts),t.isAAC)for(var E=this.config.maxAudioFramesDrift,_=0,T=v;_<y.length;){var S=y[_],b=(P=S.pts)-T,A=Math.abs(1e3*b/u);if(b<=-E*f)B.logger.warn("Dropping 1 audio frame @ "+(T/u).toFixed(3)+"s due to "+Math.round(A)+" ms overlap."),y.splice(_,1),t.len-=S.unit.length;else{if(E*f<=b&&A<1e4&&T){var R=Math.round(b/f);B.logger.warn("Injecting "+R+" audio frame @ "+(T/u).toFixed(3)+"s due to "+Math.round(1e3*b/u)+" ms gap.");for(var D=0;D<R;D++){var L=Math.max(T,0);(n=x.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(B.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),n=S.unit.subarray()),y.splice(_,0,{unit:n,pts:L,dts:L}),t.len+=n.length,T+=f,_++}}else Math.abs(b);S.pts=S.dts=T,T+=f,_++}}for(var D=0,O=y.length;D<O;D++){var w=y[D],I=w.unit,P=w.pts;if(void 0!==l)a.duration=Math.round((P-l)/c);else{var w=Math.round(1e3*(P-v)/u),k=0;if(r&&t.isAAC&&w){if(0<w&&w<1e4)k=Math.round((P-v)/f),B.logger.log(w+" ms hole between AAC samples detected,filling it"),0<k&&(n=(n=x.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||I.subarray(),t.len+=k*n.length);else if(w<-12){B.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(v/u).toFixed(3)+"s/"+(P/u).toFixed(3)+"s/"+-w+"ms"),t.len-=I.byteLength;continue}P=v}if(s=P,!(0<t.len))return;var w=g?t.len:t.len+8,C=g?0:8;try{o=new Uint8Array(w)}catch(t){return void this.observer.trigger(N.default.ERROR,{type:U.ErrorTypes.MUX_ERROR,details:U.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:w,reason:"fail allocating audio mdat "+w})}for(g||(new DataView(o.buffer).setUint32(0,w),o.set(M.default.types.mdat,4)),_=0;_<k;_++)(n=x.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(B.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),n=I.subarray()),o.set(n,C),C+=n.byteLength,a={size:n.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},m.push(a)}o.set(I,C);w=I.byteLength;C+=w,m.push(a={size:w,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}}),l=P}var F,d=0,i=m.length;return(2<=i&&(d=m[i-2].duration,a.duration=d),i)?(this.nextAudioPts=v=l+c*d,t.len=0,t.samples=m,d=g?new Uint8Array:M.default.moof(t.sequenceNumber++,s/c,t),t.samples=[],this.observer.trigger(N.default.FRAG_PARSING_DATA,d={data1:d,data2:o,startPTS:d=s/u,endPTS:F=v/u,startDTS:d,endDTS:F,type:"audio",hasAudio:!0,hasVideo:!1,nb:i}),d):null}},i.prototype.remuxEmptyAudio=function(t,e,r,i){var a=t.inputTimeScale,n=a/(t.samplerate||a),o=this.nextAudioPts,s=(void 0!==o?o:i.startDTS*a)+this._initDTS,o=i.endDTS*a+this._initDTS,l=1024*n,u=Math.ceil((o-s)/l),d=x.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(B.logger.warn("remux empty Audio"),d){for(var c=[],f=0;f<u;f++){var h=s+f*l;c.push({unit:d,pts:h,dts:h}),t.len+=d.length}t.samples=c,this.remuxAudio(t,e,r)}else B.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},i.prototype.remuxID3=function(t){var e,r=t.samples.length,i=t.inputTimeScale,a=this._initPTS,n=this._initDTS;if(r){for(var o=0;o<r;o++)(e=t.samples[o]).pts=(e.pts-a)/i,e.dts=(e.dts-n)/i;this.observer.trigger(N.default.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[]},i.prototype.remuxText=function(t){t.samples.sort(function(t,e){return t.pts-e.pts});var e,r=t.samples.length,i=t.inputTimeScale,a=this._initPTS;if(r){for(var n=0;n<r;n++)(e=t.samples[n]).pts=(e.pts-a)/i;this.observer.trigger(N.default.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[]},i.prototype._PTSNormalize=function(t,e){var r;if(void 0!==e)for(r=e<t?-8589934592:8589934592;4294967296<Math.abs(t-e);)t+=r;return t},e.default=i},function(t,e,r){"use strict";function i(){}Object.defineProperty(e,"__esModule",{value:!0}),i.getSilentFrame=function(t,e){if("mp4a.40.2"===t){if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Math.pow(2,32)-1;function c(){}c.init=function(){for(var t in c.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})c.types.hasOwnProperty(t)&&(c.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var e=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),e=(c.HDLR_TYPES={video:e,audio:r},new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])),r=new Uint8Array([0,0,0,0,0,0,0,0]),r=(c.STTS=c.STSC=c.STCO=r,c.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),c.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),c.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),c.STSD=new Uint8Array([0,0,0,0,0,0,0,1]),new Uint8Array([105,115,111,109])),i=new Uint8Array([97,118,99,49]),a=new Uint8Array([0,0,0,1]);c.FTYP=c.box(c.types.ftyp,r,a,r,i),c.DINF=c.box(c.types.dinf,c.box(c.types.dref,e))},c.box=function(t){for(var e,r=Array.prototype.slice.call(arguments,1),i=8,a=r.length,n=a;a--;)i+=r[a].byteLength;for((e=new Uint8Array(i))[0]=i>>24&255,e[1]=i>>16&255,e[2]=i>>8&255,e[3]=255&i,e.set(t,4),a=0,i=8;a<n;a++)e.set(r[a],i),i+=r[a].byteLength;return e},c.hdlr=function(t){return c.box(c.types.hdlr,c.HDLR_TYPES[t])},c.mdat=function(t){return c.box(c.types.mdat,t)},c.mdhd=function(t,e){e*=t;var r=Math.floor(e/(1+n)),e=Math.floor(e%(1+n));return c.box(c.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,e>>24,e>>16&255,e>>8&255,255&e,85,196,0,0]))},c.mdia=function(t){return c.box(c.types.mdia,c.mdhd(t.timescale,t.duration),c.hdlr(t.type),c.minf(t))},c.mfhd=function(t){return c.box(c.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},c.minf=function(t){return"audio"===t.type?c.box(c.types.minf,c.box(c.types.smhd,c.SMHD),c.DINF,c.stbl(t)):c.box(c.types.minf,c.box(c.types.vmhd,c.VMHD),c.DINF,c.stbl(t))},c.moof=function(t,e,r){return c.box(c.types.moof,c.mfhd(t),c.traf(r,e))},c.moov=function(t){for(var e=t.length,r=[];e--;)r[e]=c.trak(t[e]);return c.box.apply(null,[c.types.moov,c.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(c.mvex(t)))},c.mvex=function(t){for(var e=t.length,r=[];e--;)r[e]=c.trex(t[e]);return c.box.apply(null,[c.types.mvex].concat(r))},c.mvhd=function(t,e){e*=t;var r=Math.floor(e/(1+n)),e=Math.floor(e%(1+n)),t=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,e>>24,e>>16&255,e>>8&255,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return c.box(c.types.mvhd,t)},c.sdtp=function(t){for(var e,r=t.samples||[],i=new Uint8Array(4+r.length),a=0;a<r.length;a++)e=r[a].flags,i[a+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return c.box(c.types.sdtp,i)},c.stbl=function(t){return c.box(c.types.stbl,c.stsd(t),c.box(c.types.stts,c.STTS),c.box(c.types.stsc,c.STSC),c.box(c.types.stsz,c.STSZ),c.box(c.types.stco,c.STCO))},c.avc1=function(t){for(var e,r,i=[],a=[],n=0;n<t.sps.length;n++)r=(e=t.sps[n]).byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(e));for(n=0;n<t.pps.length;n++)r=(e=t.pps[n]).byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(e));var o=c.box(c.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|t.sps.length].concat(i).concat([t.pps.length]).concat(a))),s=t.width,l=t.height,u=t.pixelRatio[0],d=t.pixelRatio[1];return c.box(c.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,c.box(c.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),c.box(c.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,d>>24,d>>16&255,d>>8&255,255&d])))},c.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},c.mp4a=function(t){var e=t.samplerate;return c.box(c.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]),c.box(c.types.esds,c.esds(t)))},c.mp3=function(t){var e=t.samplerate;return c.box(c.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]))},c.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?c.box(c.types.stsd,c.STSD,c.mp4a(t)):c.box(c.types.stsd,c.STSD,c.mp3(t)):c.box(c.types.stsd,c.STSD,c.avc1(t))},c.tkhd=function(t){var e=t.id,r=t.duration*t.timescale,i=t.width,t=t.height,a=Math.floor(r/(1+n)),r=Math.floor(r%(1+n));return c.box(c.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,t>>8&255,255&t,0,0]))},c.traf=function(t,e){var r=c.sdtp(t),i=t.id,a=Math.floor(e/(1+n)),e=Math.floor(e%(1+n));return c.box(c.types.traf,c.box(c.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),c.box(c.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,e>>24,e>>16&255,e>>8&255,255&e])),c.trun(t,r.length+16+20+8+16+8+8),r)},c.trak=function(t){return t.duration=t.duration||4294967295,c.box(c.types.trak,c.tkhd(t),c.mdia(t))},c.trex=function(t){t=t.id;return c.box(c.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},c.trun=function(t,e){var r,i,a,n,o,s=t.samples||[],l=s.length,t=12+16*l,u=new Uint8Array(t);for(u.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,(e+=8+t)>>>24&255,e>>>16&255,e>>>8&255,255&e],0),r=0;r<l;r++)i=(o=s[r]).duration,a=o.size,n=o.flags,o=o.cts,u.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,a>>>24&255,a>>>16&255,a>>>8&255,255&a,n.isLeading<<2|n.dependsOn,n.isDependedOn<<6|n.hasRedundancy<<4|n.paddingValue<<1|n.isNonSync,61440&n.degradPrio,15&n.degradPrio,o>>>24&255,o>>>16&255,o>>>8&255,255&o],12+16*r);return c.box(c.types.trun,u)},c.initSegment=function(t){c.types||c.init();var e,t=c.moov(t);return(e=new Uint8Array(c.FTYP.byteLength+t.byteLength)).set(c.FTYP),e.set(t,c.FTYP.byteLength),e},e.default=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=r(1);function i(t){this.observer=t}i.prototype.destroy=function(){},i.prototype.resetTimeStamp=function(){},i.prototype.resetInitSegment=function(){},i.prototype.remux=function(t,e,r,i,a,n,o,s){var l=this.observer,u="";t&&(u+="audio"),e&&(u+="video"),l.trigger(d.default.FRAG_PARSING_DATA,{data1:s,startPTS:a,startDTS:a,type:u,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),l.trigger(d.default.FRAG_PARSED)},e.default=i},function(t,e,r){"use strict";var i=Object.prototype.hasOwnProperty,h="~";function a(){}function n(t,e,i,r,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");r=new function(t,e,r){this.fn=i,this.context=e,this.once=r||!1}(0,r||t,a),a=h?h+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],r]:t._events[a].push(r):(t._events[a]=r,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new a:delete t._events[e]}function o(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(h=!1)),o.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)i.call(t,e)&&r.push(h?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},o.prototype.listeners=function(t){var t=h?h+t:t,e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var r=0,i=e.length,a=new Array(i);r<i;r++)a[r]=e[r].fn;return a},o.prototype.listenerCount=function(t){t=h?h+t:t,t=this._events[t];return t?t.fn?1:t.length:0},o.prototype.emit=function(t,e,r,i,a,n){var o=h?h+t:t;if(!this._events[o])return!1;var s,l=this._events[o],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,i),!0;case 5:return l.fn.call(l.context,e,r,i,a),!0;case 6:return l.fn.call(l.context,e,r,i,a,n),!0}for(f=1,s=new Array(u-1);f<u;f++)s[f-1]=arguments[f];l.fn.apply(l.context,s)}else for(var d,c=l.length,f=0;f<c;f++)switch(l[f].once&&this.removeListener(t,l[f].fn,void 0,!0),u){case 1:l[f].fn.call(l[f].context);break;case 2:l[f].fn.call(l[f].context,e);break;case 3:l[f].fn.call(l[f].context,e,r);break;case 4:l[f].fn.call(l[f].context,e,r,i);break;default:if(!s)for(d=1,s=new Array(u-1);d<u;d++)s[d-1]=arguments[d];l[f].fn.apply(l[f].context,s)}return!0},o.prototype.on=function(t,e,r){return n(this,t,e,r,!1)},o.prototype.once=function(t,e,r){return n(this,t,e,r,!0)},o.prototype.removeListener=function(t,e,r,i){t=h?h+t:t;if(this._events[t])if(e){var a=this._events[t];if(a.fn)a.fn!==e||i&&!a.once||r&&a.context!==r||l(this,t);else{for(var n=0,o=[],s=a.length;n<s;n++)(a[n].fn!==e||i&&!a[n].once||r&&a[n].context!==r)&&o.push(a[n]);o.length?this._events[t]=1===o.length?o[0]:o:l(this,t)}}else l(this,t);return this},o.prototype.removeAllListeners=function(t){return t?(t=h?h+t:t,this._events[t]&&l(this,t)):(this._events=new a,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=h,t.exports=o.EventEmitter=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(21),s=r(1),l=r(0),u=r(53);e.default=function(i){function a(t,e){i.postMessage({event:t,data:e})}var n=new u.EventEmitter;n.trigger=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];n.emit.apply(n,[t,t].concat(e))},n.off=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];n.removeListener.apply(n,[t].concat(e))};i.addEventListener("message",function(t){var e=t.data;switch(e.cmd){case"init":var r=JSON.parse(e.config);i.demuxer=new o.default(n,e.typeSupported,r,e.vendor),l.enableLogs(r.debug),a("init",null);break;case"demux":i.demuxer.push(e.data,e.decryptdata,e.initSegment,e.audioCodec,e.videoCodec,e.timeOffset,e.discontinuity,e.trackSwitch,e.contiguous,e.duration,e.accurateTimeOffset,e.defaultInitPTS)}}),n.on(s.default.FRAG_DECRYPTED,a),n.on(s.default.FRAG_PARSING_INIT_SEGMENT,a),n.on(s.default.FRAG_PARSED,a),n.on(s.default.ERROR,a),n.on(s.default.FRAG_PARSING_METADATA,a),n.on(s.default.FRAG_PARSING_USERDATA,a),n.on(s.default.INIT_PTS_FOUND,a),n.on(s.default.FRAG_PARSING_DATA,function(t,e){var r=[],t={event:t,data:e};e.data1&&(t.data1=e.data1.buffer,r.push(e.data1.buffer),delete e.data1),e.data2&&(t.data2=e.data2.buffer,r.push(e.data2.buffer),delete e.data2),i.postMessage(t,r)})}},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function l(t){return"function"==typeof t}function u(t){return"object"==typeof t&&null!==t}function d(t){return void 0===t}((t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,i,a,n,o;if(this._events||(this._events={}),"error"===t&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var s=new Error('Uncaught, unspecified "error" event. ('+e+")");throw s.context=e,s}if(d(r=this._events[t]))return!1;if(l(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(u(r))for(a=Array.prototype.slice.call(arguments,1),i=(o=r.slice()).length,n=0;n<i;n++)o[n].apply(this,a);return!0},r.prototype.on=r.prototype.addListener=function(t,e){if(l(e))return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,l(e.listener)?e.listener:e),this._events[t]?u(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,u(this._events[t])&&!this._events[t].warned&&(e=d(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<e&&this._events[t].length>e&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace)&&console.trace(),this;throw TypeError("listener must be a function")},r.prototype.once=function(t,e){var r;if(l(e))return r=!1,i.listener=e,this.on(t,i),this;throw TypeError("listener must be a function");function i(){this.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}},r.prototype.removeListener=function(t,e){var r,i,a,n;if(!l(e))throw TypeError("listener must be a function");if(this._events&&this._events[t])if(a=(r=this._events[t]).length,i=-1,r===e||l(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(u(r)){for(n=a;0<n--;)if(r[n]===e||r[n].listener&&r[n].listener===e){i=n;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(this._events)if(this._events.removeListener)if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);this.removeAllListeners("removeListener"),this._events={}}else{if(l(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);delete this._events[t]}else 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t];return this},r.prototype.listeners=function(t){return this._events&&this._events[t]?l(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){t=this._events[t];if(l(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(5),s=r(3),l=r(1),u=r(0);function i(t,e,r,i){this.config=t,this.media=e,this.fragmentTracker=r,this.hls=i,this.stallReported=!1}i.prototype.poll=function(t,e){var r=this.config,i=this.media,a=i.currentTime,n=window.performance.now();a!==t?(this.stallReported&&(u.logger.warn("playback not stuck anymore @"+a+", after "+Math.round(n-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0):i.ended||!i.buffered.length||2<i.readyState||i.seeking&&o.BufferHelper.isBuffered(i,a)||(t=n-this.stalled,i=o.BufferHelper.bufferInfo(i,a,r.maxBufferHole),this.stalled?(1e3<=t&&this._reportStall(i.len),this._tryFixBufferStall(i,t)):this.stalled=n)},i.prototype._tryFixBufferStall=function(t,e){var r=this.config,i=this.fragmentTracker,a=this.media.currentTime,i=i.getPartialFragment(a);i&&this._trySkipBufferHole(i),.5<t.len&&e>1e3*r.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},i.prototype._reportStall=function(t){var e=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,u.logger.warn("Playback stalling at @"+r.currentTime+" due to low buffer"),e.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},i.prototype._trySkipBufferHole=function(t){for(var e=this.hls,r=this.media,i=r.currentTime,a=0,n=0;n<r.buffered.length;n++){var o=r.buffered.start(n);if(a<=i&&i<o)return r.currentTime=Math.max(o,r.currentTime+.1),u.logger.warn("skipping hole, adjusting currentTime from "+i+" to "+r.currentTime),this.stalled=null,void e.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+r.currentTime,frag:t});a=r.buffered.end(n)}},i.prototype._tryNudgeBuffer=function(){var t=this.config,e=this.hls,r=this.media,i=r.currentTime,a=(this.nudgeRetry||0)+1;(this.nudgeRetry=a)<t.nudgeMaxRetry?(a=i+a*t.nudgeOffset,u.logger.log("adjust currentTime from "+i+" to "+a),r.currentTime=a,e.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})):(u.logger.error("still stuck in high buffer @"+i+" after "+t.nudgeMaxRetry+", raise fatal error"),e.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0}))},e.default=i},function(t,e,r){"use strict";var i,a=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var u,n,d=r(1),o=r(4),c=r(0),f=r(3),h=r(19),p=r(14),s=window.performance,r=(n=o.default,a(l,n),l.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},l.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},l.prototype.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},l.prototype.stopLoad=function(){this.canload=!1},l.prototype.onManifestLoaded=function(t){var e,r=[],i=[],a={},n=null,o=!1,s=!1;if(t.levels.forEach(function(t){var e=t.attrs;t.loadError=0,t.fragmentError=!1,o=o||!!t.videoCodec,s=s||!!t.audioCodec,u&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(n=a[t.bitrate])?n.url.push(t.url):(t.url=[t.url],t.urlId=0,a[t.bitrate]=t,r.push(t)),e&&(e.AUDIO&&(s=!0,p.addGroupId(n||t,"audio",e.AUDIO)),e.SUBTITLES)&&p.addGroupId(n||t,"text",e.SUBTITLES)}),r=(r=o&&s?r.filter(function(t){return!!t.videoCodec}):r).filter(function(t){var e=t.audioCodec,t=t.videoCodec;return(!e||h.isCodecSupportedInMp4(e,"audio"))&&(!t||h.isCodecSupportedInMp4(t,"video"))}),t.audioTracks&&(i=t.audioTracks.filter(function(t){return!t.audioCodec||h.isCodecSupportedInMp4(t.audioCodec,"audio")})).forEach(function(t,e){t.id=e}),0<r.length){e=r[0].bitrate,r.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=r;for(var l=0;l<r.length;l++)if(r[l].bitrate===e){this._firstLevel=l,c.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+e);break}this.hls.trigger(d.default.MANIFEST_PARSED,{levels:r,audioTracks:i,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:o,altAudio:i.some(function(t){return!!t.url})})}else this.hls.trigger(d.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},Object.defineProperty(l.prototype,"levels",{get:function(){return this._levels},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"level",{get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&e[t].details||this.setLevelInternal(t))},enumerable:!0,configurable:!0}),l.prototype.setLevelInternal=function(t){var e,r=this._levels,i=this.hls;0<=t&&t<r.length?(this.clearTimer(),this.currentLevelIndex!==t&&(c.logger.log("switching to level "+t),(e=r[this.currentLevelIndex=t]).level=t,i.trigger(d.default.LEVEL_SWITCHING,e)),(r=(e=r[t]).details)&&!r.live||(r=e.urlId,i.trigger(d.default.LEVEL_LOADING,{url:e.url[r],level:t,id:r}))):i.trigger(d.default.ERROR,{type:f.ErrorTypes.OTHER_ERROR,details:f.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},Object.defineProperty(l.prototype,"manualLevel",{get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"firstLevel",{get:function(){return this._firstLevel},set:function(t){this._firstLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"startLevel",{get:function(){var t;return void 0===this._startLevel?void 0!==(t=this.hls.config.startLevel)?t:this._firstLevel:this._startLevel},set:function(t){this._startLevel=t},enumerable:!0,configurable:!0}),l.prototype.onError=function(t){if(t.fatal)t.type===f.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var e,r=!1,i=!1;switch(t.details){case f.ErrorDetails.FRAG_LOAD_ERROR:case f.ErrorDetails.FRAG_LOAD_TIMEOUT:case f.ErrorDetails.KEY_LOAD_ERROR:case f.ErrorDetails.KEY_LOAD_TIMEOUT:e=t.frag.level,i=!0;break;case f.ErrorDetails.LEVEL_LOAD_ERROR:case f.ErrorDetails.LEVEL_LOAD_TIMEOUT:e=t.context.level,r=!0;break;case f.ErrorDetails.REMUX_ALLOC_ERROR:e=t.level,r=!0}void 0!==e&&this.recoverLevel(t,e,r,i)}},l.prototype.recoverLevel=function(t,e,r,i){var a=this,n=this.hls.config,o=t.details,s=this._levels[e];if(s.loadError++,s.fragmentError=i,r){if(!(this.levelRetryCount+1<=n.levelLoadingMaxRetry))return c.logger.error("level controller, cannot recover from "+o+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);n=Math.min(Math.pow(2,this.levelRetryCount)*n.levelLoadingRetryDelay,n.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return a.loadLevel()},n),t.levelRetry=!0,this.levelRetryCount++,c.logger.warn("level controller, "+o+", retry in "+n+" ms, current retry count is "+this.levelRetryCount)}(r||i)&&(1<(t=s.url.length)&&s.loadError<t?(s.urlId=(s.urlId+1)%t,s.details=void 0,c.logger.warn("level controller, "+o+" for level "+e+": switching to redundant URL-id "+s.urlId)):-1===this.manualLevelIndex?(n=0===e?this._levels.length-1:e-1,c.logger.warn("level controller, "+o+": switch to "+n),this.hls.nextAutoLevel=this.currentLevelIndex=n):i&&(c.logger.warn("level controller, "+o+": reload a fragment"),this.currentLevelIndex=null))},l.prototype.onFragLoaded=function(t){var t=t.frag;void 0!==t&&"main"===t.type&&void 0!==(t=this._levels[t.level])&&(t.fragmentError=!1,t.loadError=0,this.levelRetryCount=0)},l.prototype.onLevelLoaded=function(t){var e,r,i,a=this,n=t.level;n===this.currentLevelIndex&&((n=this._levels[n]).fragmentError||(n.loadError=0,this.levelRetryCount=0),(e=t.details).live?(i=r=1e3*(e.averagetargetduration||e.targetduration),(n=n.details)&&e.endSN===n.endSN&&(i/=2,c.logger.log("same live playlist, reload twice faster")),i-=s.now()-t.stats.trequest,i=Math.max(r/2,Math.round(i)),c.logger.log("live playlist, reload in "+Math.round(i)+" ms"),this.timer=setTimeout(function(){return a.loadLevel()},i)):this.clearTimer())},l.prototype.onAudioTrackSwitched=function(t){var e,r=this.hls.audioTracks[t.id].groupId,t=this.hls.levels[this.currentLevelIndex];t&&t.audioGroupIds&&(e=t.audioGroupIds.findIndex(function(t){return t===r}))!==t.urlId&&(t.urlId=e,this.startLoad())},l.prototype.loadLevel=function(){var t,e,r;c.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload&&"object"==typeof(r=this._levels[this.currentLevelIndex])&&0<r.url.length&&(t=this.currentLevelIndex,e=r.urlId,r=r.url[e],c.logger.log("Attempt loading level index "+t+" with URL-id "+e),this.hls.trigger(d.default.LEVEL_LOADING,{url:r,level:t,id:e}))},Object.defineProperty(l.prototype,"nextLoadLevel",{get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)},enumerable:!0,configurable:!0}),l);function l(t){t=n.call(this,t,d.default.MANIFEST_LOADED,d.default.LEVEL_LOADED,d.default.AUDIO_TRACK_SWITCHED,d.default.FRAG_LOADED,d.default.ERROR)||this;return t.canload=!1,t.currentLevelIndex=null,t.manualLevelIndex=-1,t.timer=null,u=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),t}e.default=r},function(t,e,r){"use strict";var i,a,n=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=(Object.defineProperty(e,"__esModule",{value:!0}),r(1)),s=r(4),c=r(10),l=r(29),r=(a=s.default,n(u,a),u.prototype.destroy=function(){s.default.prototype.destroy.call(this)},u.prototype.onMediaAttached=function(t){this.media=t.media,this.media},u.prototype.onMediaDetaching=function(){l.clearCurrentCues(this.id3Track),this.id3Track=void 0,this.media=void 0},u.prototype.getID3Track=function(t){for(var e=0;e<t.length;e++){var r=t[e];if("metadata"===r.kind&&"id3"===r.label)return l.sendAddTrackEvent(r,this.media),r}return this.media.addTextTrack("metadata","id3")},u.prototype.onFragParsingMetadata=function(t){var e=t.frag,r=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,a=0;a<r.length;a++){var n=c.default.getID3Frames(r[a].data);if(n){var o=r[a].pts,s=a<r.length-1?r[a+1].pts:e.endPTS;o===s&&(s+=1e-4);for(var l=0;l<n.length;l++){var u,d=n[l];c.default.isTimeStampFrame(d)||((u=new i(o,s,"")).value=d,this.id3Track.addCue(u))}}}},u);function u(t){t=a.call(this,t,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.FRAG_PARSING_METADATA)||this;return t.id3Track=void 0,t.media=void 0,t}e.default=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(13);e.isSupported=function(){var t=i.getMediaSource(),e=window.SourceBuffer||window.WebKitSourceBuffer,t=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),e=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!t&&!!e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(59),a=r(62),n=r(63),o=r(64),s=r(65),l=r(66),u=r(67),d=r(68),c=r(70),f=r(74),h=r(75),p=r(76),r=r(77);e.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:i.default,bufferController:a.default,capLevelController:n.default,fpsController:o.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:r.requestMediaKeySystemAccess},e.hlsDefaultConfig.subtitleStreamController=h.SubtitleStreamController,e.hlsDefaultConfig.subtitleTrackController=f.default,e.hlsDefaultConfig.timelineController=c.default,e.hlsDefaultConfig.cueHandler=d,e.hlsDefaultConfig.enableCEA708Captions=!0,e.hlsDefaultConfig.enableWebVTT=!0,e.hlsDefaultConfig.captionsTextTrack1Label="English",e.hlsDefaultConfig.captionsTextTrack1LanguageCode="en",e.hlsDefaultConfig.captionsTextTrack2Label="Spanish",e.hlsDefaultConfig.captionsTextTrack2LanguageCode="es",e.hlsDefaultConfig.audioStreamController=u.default,e.hlsDefaultConfig.audioTrackController=l.default,e.hlsDefaultConfig.emeController=p.default},function(t,l,u){"use strict";!function(a){var i,r,t=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),y=(Object.defineProperty(l,"__esModule",{value:!0}),u(1)),e=u(4),m=u(5),n=u(3),v=u(0),o=u(60),E=window.performance,t=(r=e.default,t(s,r),s.prototype.destroy=function(){this.clearTimer(),e.default.prototype.destroy.call(this)},s.prototype.onFragLoading=function(t){var e,r,i,a,t=t.frag;"main"!==t.type||(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),this._bwEstimator)||(r=(e=this.hls).config,t=t.level,a=i=void 0,a=e.levels[t].details.live?(i=r.abrEwmaFastLive,r.abrEwmaSlowLive):(i=r.abrEwmaFastVoD,r.abrEwmaSlowVoD),this._bwEstimator=new o.default(e,a,i,r.abrEwmaDefaultEstimate))},s.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,r=this.fragCurrent;if(r){var i=r.loader,a=t.minAutoLevel;if(!i||i.stats&&i.stats.aborted)v.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),this._nextAutoLevel=-1;else{var n=i.stats;if(e&&n&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&r.autoLevel&&r.level){var o=E.now()-n.trequest,s=Math.abs(e.playbackRate);if(o>500*r.duration/s){var l=t.levels,u=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/o),d=l[r.level],d=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,d=n.total||Math.max(n.loaded,Math.round(r.duration*d/8)),c=e.currentTime,d=(d-n.loaded)/u,f=(m.BufferHelper.bufferInfo(e,c,t.config.maxBufferHole).end-c)/s;if(f<2*r.duration/s&&f<d){for(var h=void 0,p=void 0,p=r.level-1;a<p;p--){var g=l[p].realBitrate?Math.max(l[p].realBitrate,l[p].bitrate):l[p].bitrate;if((h=r.duration*g/(6.4*u))<f)break}h<d&&(v.logger.warn("loading too slow, abort fragment loading and switch to level "+p+":fragLoadedDelay["+p+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+h.toFixed(1)+"<"+d.toFixed(1)+":"+f.toFixed(1)),t.nextLoadLevel=p,this._bwEstimator.sample(o,n.loaded),i.abort(),this.clearTimer(),t.trigger(y.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:n}))}}}}}},s.prototype.onFragLoaded=function(t){var e,r,i=t.frag;"main"===i.type&&a.isFinite(i.sn)&&(this.clearTimer(),this.lastLoadedFragLevel=i.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate&&(e=((i=this.hls.levels[i.level]).loaded?i.loaded.bytes:0)+t.stats.loaded,r=(i.loaded?i.loaded.duration:0)+t.frag.duration,i.loaded={bytes:e,duration:r},i.realBitrate=Math.round(8*e/r)),t.frag.bitrateTest)&&((i=t.stats).tparsed=i.tbuffered=i.tload,this.onFragBuffered(t))},s.prototype.onFragBuffered=function(t){var e,r=t.stats,t=t.frag;!0===r.aborted||"main"!==t.type||!a.isFinite(t.sn)||t.bitrateTest&&r.tload!==r.tbuffered||(e=r.tparsed-r.trequest,v.logger.log("latency/loading/parsing/append/kbps:"+Math.round(r.tfirst-r.trequest)+"/"+Math.round(r.tload-r.tfirst)+"/"+Math.round(r.tparsed-r.tload)+"/"+Math.round(r.tbuffered-r.tparsed)+"/"+Math.round(8*r.loaded/(r.tbuffered-r.trequest))),this._bwEstimator.sample(e,r.loaded),r.bwEstimate=this._bwEstimator.getEstimate(),t.bitrateTest?this.bitrateTestDelay=e/1e3:this.bitrateTestDelay=0)},s.prototype.onError=function(t){switch(t.details){case n.ErrorDetails.FRAG_LOAD_ERROR:case n.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},s.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},Object.defineProperty(s.prototype,"nextAutoLevel",{get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;return-1===t||e&&e.canEstimate()?(e=this._nextABRAutoLevel,-1!==t?Math.min(t,e):e):t},set:function(t){this._nextAutoLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_nextABRAutoLevel",{get:function(){var t=this.hls,e=t.maxAutoLevel,r=t.levels,i=t.config,a=t.minAutoLevel,t=t.media,n=this.lastLoadedFragLevel,o=this.fragCurrent?this.fragCurrent.duration:0,s=t?t.currentTime:0,l=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,u=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,t=(m.BufferHelper.bufferInfo(t,s,i.maxBufferHole).end-s)/l,s=this._findBestLevel(n,o,u,a,e,t,i.abrBandWidthFactor,i.abrBandWidthUpFactor,r);if(0<=s)return s;v.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var d,l=o?Math.min(o,i.maxStarvationDelay):i.maxStarvationDelay,c=i.abrBandWidthFactor,f=i.abrBandWidthUpFactor;return 0==t&&(d=this.bitrateTestDelay)&&(l=(o?Math.min(o,i.maxLoadingDelay):i.maxLoadingDelay)-d,v.logger.trace("bitrate test took "+Math.round(1e3*d)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*l)+" ms"),c=f=1),s=this._findBestLevel(n,o,u,a,e,t+l,c,f,r),Math.max(s,0)},enumerable:!0,configurable:!0}),s.prototype._findBestLevel=function(t,e,r,i,a,n,o,s,l){for(var u=a;i<=u;u--){var d=l[u];if(d){var d=d.details,c=d?d.totalduration/d.fragments.length:e,d=!!d&&d.live,f=u<=t?o*r:s*r,h=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,p=h*c/f;if(v.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(f)+"/"+h+"/"+c+"/"+n+"/"+p),h<f&&(!p||d&&!this.bitrateTestDelay||p<n))return u}}return-1},s);function s(t){var e=r.call(this,t,y.default.FRAG_LOADING,y.default.FRAG_LOADED,y.default.FRAG_BUFFERED,y.default.ERROR)||this;return e.lastLoadedFragLevel=0,e._nextAutoLevel=-1,e.hls=t,e.timer=null,e._bwEstimator=null,e.onCheck=e._abandonRulesCheck.bind(e),e}l.default=t}.call(this,u(2).Number)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(61);function i(t,e,r,i){this.hls=t,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new a.default(e),this.fast_=new a.default(r)}i.prototype.sample=function(t,e){e=8e3*e/(t=Math.max(t,this.minDelayMs_)),t/=1e3;this.fast_.sample(t,e),this.slow_.sample(t,e)},i.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},i.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},i.prototype.destroy=function(){},e.default=i},function(t,e,r){"use strict";function i(t){this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}Object.defineProperty(e,"__esModule",{value:!0}),i.prototype.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},i.prototype.getTotalWeight=function(){return this.totalWeight_},i.prototype.getEstimate=function(){var t;return this.alpha_?(t=1-Math.pow(this.alpha_,this.totalWeight_),this.estimate_/t):this.estimate_},e.default=i},function(t,s,c){"use strict";!function(i){var a,e,t=this&&this.__extends||(a=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=(Object.defineProperty(s,"__esModule",{value:!0}),c(1)),r=c(4),u=c(0),d=c(3),n=c(13).getMediaSource(),t=(e=r.default,t(o,e),o.prototype.destroy=function(){r.default.prototype.destroy.call(this)},o.prototype.onLevelPtsUpdated=function(t){var e=t.type,r=this.tracks.audio;if("audio"===e&&r&&"audio/mpeg"===r.container){e=this.sourceBuffer.audio;if(.1<Math.abs(e.timestampOffset-t.start)){r=e.updating;try{e.abort()}catch(t){u.logger.warn("can not abort audio buffer: "+t)}r?this.audioTimestampOffset=t.start:(u.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+t.start),e.timestampOffset=t.start)}}},o.prototype.onManifestParsed=function(t){this.bufferCodecEventsExpected=t.altAudio?2:1,u.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},o.prototype.onMediaAttaching=function(t){var e,t=this.media=t.media;t&&(e=this.mediaSource=new n,this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),e.addEventListener("sourceopen",this.onmso),e.addEventListener("sourceended",this.onmse),e.addEventListener("sourceclose",this.onmsc),t.src=window.URL.createObjectURL(e),this._objectUrl=t.src)},o.prototype.onMediaDetaching=function(){u.logger.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){u.logger.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):u.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(l.default.MEDIA_DETACHED)},o.prototype.onMediaSourceOpen=function(){u.logger.log("media source opened"),this.hls.trigger(l.default.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},o.prototype.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.pendingTracks,r=Object.keys(e).length;(r&&!t||2===r)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},o.prototype.onMediaSourceClose=function(){u.logger.log("media source closed")},o.prototype.onMediaSourceEnded=function(){u.logger.log("media source ended")},o.prototype.onSBUpdateEnd=function(){this.audioTimestampOffset&&(e=this.sourceBuffer.audio,u.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset),this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t,r=this.parent,e=this.segments.reduce(function(t,e){return e.parent===r?t+1:t},0),i={},a=this.sourceBuffer;for(t in a)i[t]=a[t].buffered;this.hls.trigger(l.default.BUFFER_APPENDED,{parent:r,pending:e,timeRanges:i}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration(),0===e&&this.flushLiveBackBuffer()},o.prototype.onSBUpdateError=function(t){u.logger.error("sourceBuffer error:",t),this.hls.trigger(l.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},o.prototype.onBufferReset=function(){var t,e=this.sourceBuffer;for(t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},o.prototype.onBufferCodecs=function(e){var t,r=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach(function(t){r.pendingTracks[t]=e[t]}),t=this.mediaSource,this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),t&&"open"===t.readyState&&this.checkPendingTracks())},o.prototype.createSourceBuffers=function(t){var e,r=this.sourceBuffer,i=this.mediaSource;for(e in t)if(!r[e]){var a=t[e],n=a.levelCodec||a.codec,o=a.container+";codecs="+n;u.logger.log("creating sourceBuffer("+o+")");try{var s=r[e]=i.addSourceBuffer(o);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[e]={codec:n,container:a.container},a.buffer=s}catch(t){u.logger.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(l.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:o})}}this.hls.trigger(l.default.BUFFER_CREATED,{tracks:t})},o.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},o.prototype.onBufferAppendFail=function(t){u.logger.error("sourceBuffer error:",t.event),this.hls.trigger(l.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},o.prototype.onBufferEos=function(t){var e,r=this.sourceBuffer,i=t.type;for(e in r)i&&e!==i||r[e].ended||(r[e].ended=!0,u.logger.log(e+" sourceBuffer now EOS"));this.checkEos()},o.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(e&&"open"===e.readyState){for(var r in t){r=t[r];if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}u.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){u.logger.warn("exception while calling mediaSource.endOfStream()")}}this._needsEos=!1},o.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},o.prototype.flushLiveBackBuffer=function(){if(this._live){var t=this.hls.config.liveBackBufferLength;if(isFinite(t)&&!(t<0))for(var e=this.media.currentTime,r=this.sourceBuffer,i=Object.keys(r),a=e-Math.max(t,this._levelTargetDuration),n=i.length-1;0<=n;n--){var o=i[n],s=r[o].buffered;0<s.length&&a>s.start(0)&&this.removeBufferRange(o,r[o],0,a)}}},o.prototype.onLevelUpdated=function(t){t=t.details;0<t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},o.prototype.updateMediaElementDuration=function(){var t,e=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer)if(!0===this.sourceBuffer[r].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===e.liveDurationInfinity?(u.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!i.isFinite(t))&&(u.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},o.prototype.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,r=this.sourceBuffer;try{for(var i in r)e+=r[i].buffered.length}catch(t){u.logger.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(l.default.BUFFER_FLUSHED)}},o.prototype.doAppending=function(){var t=this.hls,e=this.segments,r=this.sourceBuffer;if(Object.keys(r).length)if(this.media.error)this.segments=[],u.logger.error("trying to append although a media error occured, flush segment and abort");else if(!this.appending&&e&&e.length){var i=e.shift();try{var a=r[i.type];a?a.updating?e.unshift(i):(a.ended=!1,this.parent=i.parent,a.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(r){u.logger.error("error while trying to append buffer:"+r.message),e.unshift(i);a={type:d.ErrorTypes.MEDIA_ERROR,parent:i.parent};22!==r.code?(this.appendError?this.appendError++:this.appendError=1,a.details=d.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry?(u.logger.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],a.fatal=!0):a.fatal=!1):(this.segments=[],a.details=d.ErrorDetails.BUFFER_FULL_ERROR,a.fatal=!1),t.trigger(l.default.ERROR,a)}}},o.prototype.flushBuffer=function(t,e,r){var i,a=this.sourceBuffer;if(Object.keys(a).length){if(u.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var n in a)if(!r||n===r){if((i=a[n]).ended=!1,i.updating)return u.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(n,i,t,e))return this.flushBufferCounter++,!1}}else u.logger.warn("abort flushing too many retries");u.logger.log("buffer flushed")}return!0},o.prototype.removeBufferRange=function(t,e,r,i){try{for(var a=0;a<e.buffered.length;a++){var n=e.buffered.start(a),o=e.buffered.end(a),s=Math.max(n,r),l=Math.min(o,i);if(.5<Math.min(l,o)-s)return u.logger.log("sb remove "+t+" ["+s+","+l+"], of ["+n+","+o+"], pos:"+this.media.currentTime),e.remove(s,l),!0}}catch(t){u.logger.warn("removeBufferRange failed",t)}return!1},o);function o(t){t=e.call(this,t,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.MANIFEST_PARSED,l.default.BUFFER_RESET,l.default.BUFFER_APPENDING,l.default.BUFFER_CODECS,l.default.BUFFER_EOS,l.default.BUFFER_FLUSHING,l.default.LEVEL_PTS_UPDATED,l.default.LEVEL_UPDATED)||this;return t._msDuration=null,t._levelDuration=null,t._levelTargetDuration=10,t._live=null,t._objectUrl=null,t.bufferCodecEventsExpected=0,t.onsbue=t.onSBUpdateEnd.bind(t),t.onsbe=t.onSBUpdateError.bind(t),t.pendingTracks={},t.tracks={},t}s.default=t}.call(this,c(2).Number)},function(t,o,s){"use strict";!function(e){var i,r,t=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=(Object.defineProperty(o,"__esModule",{value:!0}),s(1)),t=(r=s(4).default,t(n,r),n.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},n.prototype.onFpsDropLevelCapping=function(t){n.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},n.prototype.onMediaAttaching=function(t){this.media=t.media instanceof window.HTMLVideoElement?t.media:null},n.prototype.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,e.config.capLevelToPlayerSize&&t.video&&this._startCapping()},n.prototype.onBufferCodecs=function(t){this.hls.config.capLevelToPlayerSize&&t.video&&this._startCapping()},n.prototype.onLevelsUpdated=function(t){this.levels=t.levels},n.prototype.onMediaDetaching=function(){this._stopCapping()},n.prototype.detectPlayerSize=function(){var t,e;this.media&&(t=this.levels?this.levels.length:0)&&((e=this.hls).autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping)},n.prototype.getMaxLevel=function(r){var t,i=this;return this.levels?(t=this.levels.filter(function(t,e){return n.isLevelAllowed(e,i.restrictedLevels)&&e<=r}),n.getMaxLevelByMediaSize(t,this.mediaWidth,this.mediaHeight)):-1},n.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=e.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},n.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=e.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},Object.defineProperty(n.prototype,"mediaWidth",{get:function(){var t,e=this.media;return e&&(t=e.width||e.clientWidth||e.offsetWidth,t*=n.contentScaleFactor),t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mediaHeight",{get:function(){var t,e=this.media;return e&&(t=e.height||e.clientHeight||e.offsetHeight,t*=n.contentScaleFactor),t},enumerable:!0,configurable:!0}),Object.defineProperty(n,"contentScaleFactor",{get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t},enumerable:!0,configurable:!0}),n.isLevelAllowed=function(t,e){return-1===(e=void 0===e?[]:e).indexOf(t)},n.getMaxLevelByMediaSize=function(t,e,r){if(!t||!t.length)return-1;for(var i,a=t.length-1,n=0;n<t.length;n+=1){var o=t[n];if((o.width>=e||o.height>=r)&&(o=o,!(i=t[n+1])||o.width!==i.width||o.height!==i.height)){a=n;break}}return a},n);function n(t){t=r.call(this,t,a.default.FPS_DROP_LEVEL_CAPPING,a.default.MEDIA_ATTACHING,a.default.MANIFEST_PARSED,a.default.BUFFER_CODECS,a.default.MEDIA_DETACHING)||this;return t.autoLevelCapping=e.POSITIVE_INFINITY,t.firstLevel=null,t.levels=[],t.media=null,t.restrictedLevels=[],t.timer=null,t}o.default=t}.call(this,s(2).Number)},function(t,e,r){"use strict";var i,a,n=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=(Object.defineProperty(e,"__esModule",{value:!0}),r(1)),o=r(4),u=r(0),d=window.performance,r=(a=o.default,n(s,a),s.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},s.prototype.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof window.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},s.prototype.checkFPS=function(t,e,r){var i,a,n,o,s=d.now();e&&(this.lastTime&&(o=s-this.lastTime,i=r-this.lastDroppedFrames,a=e-this.lastDecodedFrames,o=1e3*i/o,(n=this.hls).trigger(l.default.FPS_DROP,{currentDropped:i,currentDecoded:a,totalDroppedFrames:r}),0<o)&&i>n.config.fpsDroppedMonitoringThreshold*a&&(o=n.currentLevel,u.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+o),0<o)&&(-1===n.autoLevelCapping||n.autoLevelCapping>=o)&&(n.trigger(l.default.FPS_DROP_LEVEL_CAPPING,{level:--o,droppedLevel:n.currentLevel}),n.autoLevelCapping=o,n.streamController.nextLevelSwitch()),this.lastTime=s,this.lastDroppedFrames=r,this.lastDecodedFrames=e)},s.prototype.checkFPSInterval=function(){var t,e=this.video;e&&(this.isVideoPlaybackQualityAvailable?(t=e.getVideoPlaybackQuality(),this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)):this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount))},s);function s(t){return a.call(this,t,l.default.MEDIA_ATTACHING)||this}e.default=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r(0),l=window.performance,a=window.XMLHttpRequest;function i(t){t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}i.prototype.destroy=function(){this.abort(),this.loader=null},i.prototype.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},i.prototype.load=function(t,e,r){this.context=t,this.config=e,this.callbacks=r,this.stats={trequest:l.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},i.prototype.loadInternal=function(){var t=this.context,e=this.loader=new a,r=this.stats,i=(r.tfirst=0,r.loaded=0,this.xhrSetup);try{if(i)try{i(e,t.url)}catch(r){e.open("GET",t.url,!0),i(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},i.prototype.readystatechange=function(t){var e,r,t=t.currentTarget,i=t.readyState,a=this.stats,n=this.context,o=this.config;!a.aborted&&2<=i&&(window.clearTimeout(this.requestTimeout),0===a.tfirst&&(a.tfirst=Math.max(l.now(),a.trequest)),4===i?200<=(i=t.status)&&i<300?(a.tload=Math.max(a.tfirst,l.now()),r=e=void 0,r="arraybuffer"===n.responseType?(e=t.response).byteLength:(e=t.responseText).length,a.loaded=a.total=r,r={url:t.responseURL,data:e},this.callbacks.onSuccess(r,a,n,t)):a.retry>=o.maxRetry||400<=i&&i<499?(s.logger.error(i+" while loading "+n.url),this.callbacks.onError({code:i,text:t.statusText},n,t)):(s.logger.warn(i+" while loading "+n.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),a.retry++):this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout))},i.prototype.loadtimeout=function(){s.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},i.prototype.loadprogress=function(t){var e=t.currentTarget,r=this.stats,t=(r.loaded=t.loaded,t.lengthComputable&&(r.total=t.total),this.callbacks.onProgress);t&&t(r,this.context,null,e)},e.default=i},function(t,e,r){"use strict";var i,a,n=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=(Object.defineProperty(e,"__esModule",{value:!0}),r(1)),s=r(15),l=r(0),u=r(3),r=(a=s.default,n(d,a),d.prototype.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},d.prototype.onManifestParsed=function(t){t=this.tracks=t.audioTracks||[];this.hls.trigger(o.default.AUDIO_TRACKS_UPDATED,{audioTracks:t})},d.prototype.onAudioTrackLoaded=function(t){var e;t.id>=this.tracks.length?l.logger.warn("Invalid audio track id:",t.id):(l.logger.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.hasInterval()&&(e=1e3*t.details.targetduration,this.setInterval(e)),!t.details.live&&this.hasInterval()&&this.clearInterval())},d.prototype.onAudioTrackSwitched=function(t){t=this.tracks[t.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},d.prototype.onLevelLoaded=function(t){var t=this.hls.levels[t.level];t.audioGroupIds&&(t=t.audioGroupIds[t.urlId],this.audioGroupId!==t)&&(this.audioGroupId=t,this._selectInitialAudioTrack())},d.prototype.onError=function(t){t.type===u.ErrorTypes.NETWORK_ERROR&&(t.fatal&&this.clearInterval(),t.details===u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR)&&(l.logger.warn("Network failure on audio-track id:",t.context.id),this._handleLoadError())},Object.defineProperty(d.prototype,"audioTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"audioTrack",{get:function(){return this._trackId},set:function(t){this._setAudioTrack(t),this._selectDefaultTrack=!1},enumerable:!0,configurable:!0}),d.prototype._setAudioTrack=function(t){var e,r,i;this._trackId===t&&this.tracks[this._trackId].details?l.logger.debug("Same id as current audio-track passed, and track details available -> no-op"):t<0||t>=this.tracks.length?l.logger.warn("Invalid id passed to audio-track controller"):(e=this.tracks[t],l.logger.log("Now switching to audio-track index "+t),this.clearInterval(),this._trackId=t,t=e.url,r=e.type,i=e.id,this.hls.trigger(o.default.AUDIO_TRACK_SWITCHING,{id:i,type:r,url:t}),this._loadTrackDetailsIfNeeded(e))},d.prototype.doTick=function(){this._updateTrack(this._trackId)},d.prototype._selectInitialAudioTrack=function(){var e,r,t,i=this,a=this.tracks;a.length&&(t=this.tracks[this._trackId],e=null,t&&(e=t.name),this._selectDefaultTrack&&((t=a.filter(function(t){return t.default})).length?a=t:l.logger.warn("No default audio tracks defined")),r=!1,(t=function(){a.forEach(function(t){r||i.audioGroupId&&t.groupId!==i.audioGroupId||e&&e!==t.name||(i._setAudioTrack(t.id),r=!0)})})(),r||(e=null,t()),r||(l.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(o.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0})))},d.prototype._needsTrackLoading=function(t){var e=t.details,t=t.url;return!(e&&!e.live||!t)},d.prototype._loadTrackDetailsIfNeeded=function(t){var e;this._needsTrackLoading(t)&&(e=t.url,t=t.id,l.logger.log("loading audio-track playlist for id: "+t),this.hls.trigger(o.default.AUDIO_TRACK_LOADING,{url:e,id:t}))},d.prototype._updateTrack=function(t){t<0||t>=this.tracks.length||(this.clearInterval(),this._trackId=t,l.logger.log("trying to update audio-track "+t),t=this.tracks[t],this._loadTrackDetailsIfNeeded(t))},d.prototype._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var t=this._trackId,e=this.tracks[t],r=e.name,i=e.language,e=e.groupId;l.logger.warn("Loading failed on audio track id: "+t+", group-id: "+e+', name/language: "'+r+'" / "'+i+'"');for(var a=t,n=0;n<this.tracks.length;n++)if(!this.trackIdBlacklist[n]&&this.tracks[n].name===r){a=n;break}a!==t?(l.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)):l.logger.warn('No fallback audio-track found for name/language: "'+r+'" / "'+i+'"')},d);function d(t){t=a.call(this,t,o.default.MANIFEST_LOADING,o.default.MANIFEST_PARSED,o.default.AUDIO_TRACK_LOADED,o.default.AUDIO_TRACK_SWITCHED,o.default.LEVEL_LOADED,o.default.ERROR)||this;return t._trackId=-1,t._selectDefaultTrack=!0,t.tracks=[],t.trackIdBlacklist=Object.create(null),t.audioGroupId=null,t}e.default=r},function(t,r,o){"use strict";!function(v){var i,a,t=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),E=(Object.defineProperty(r,"__esModule",{value:!0}),o(9)),_=o(5),d=o(20),T=o(1),l=o(14),n=o(25),u=o(3),S=o(0),b=o(26),A=o(7),c=o(11),R=o(28),D=window.performance,t=(a=R.default,t(e,a),e.prototype.onHandlerDestroying=function(){this.stopLoad(),a.prototype.onHandlerDestroying.call(this)},e.prototype.onHandlerDestroyed=function(){this.state=R.State.STOPPED,this.fragmentTracker=null,a.prototype.onHandlerDestroyed.call(this)},e.prototype.onInitPtsFound=function(t){var e=t.id,r=t.frag.cc,t=t.initPTS;"main"===e&&(this.initPTS[r]=t,this.videoTrackCC=r,S.logger.log("InitPTS for cc: "+r+" found from video track: "+t),this.state===R.State.WAITING_INIT_PTS)&&this.tick()},e.prototype.startLoad=function(t){var e;this.tracks?(e=this.lastCurrentTime,this.stopLoad(),this.setInterval(100),(this.fragLoadError=0)<e&&-1===t?(S.logger.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=R.State.IDLE):(this.lastCurrentTime=this.startPosition||t,this.state=R.State.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()):(this.startPosition=t,this.state=R.State.STOPPED)},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=R.State.STOPPED},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){var e;this.state!==t&&(e=this.state,this._state=t,S.logger.log("audio stream:"+e+"->"+t))},enumerable:!0,configurable:!0}),e.prototype.doTick=function(){var t,e,r=this.hls,i=r.config;switch(this.state){case R.State.ERROR:case R.State.PAUSED:case R.State.BUFFER_FLUSHING:break;case R.State.STARTING:this.state=R.State.WAITING_TRACK,this.loadedmetadata=!1;break;case R.State.IDLE:var a=this.tracks;if(a&&(this.media||!this.startFragRequested&&i.startFragPrefetch)){if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var n=this.mediaBuffer||this.media,o=this.videoBuffer||this.media,s=_.BufferHelper.bufferInfo(n,t,i.maxBufferHole),o=_.BufferHelper.bufferInfo(o,t,i.maxBufferHole),l=s.len,u=s.end,d=this.fragPrevious,c=Math.min(i.maxBufferLength,i.maxMaxBufferLength),c=Math.max(c,o.len),o=this.audioSwitch,f=this.trackId;if((l<c||o)&&f<a.length){if(void 0===(l=a[f].details)){this.state=R.State.WAITING_TRACK;break}if(!o&&this._streamEnded(s,l))return this.hls.trigger(T.default.BUFFER_EOS,{type:"audio"}),void(this.state=R.State.ENDED);var c=l.fragments,a=c.length,h=c[0].start,p=c[a-1].start+c[a-1].duration,g=void 0;if(o)if(l.live&&!l.PTSKnown)S.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),u=0;else if(u=t,l.PTSKnown&&t<h){if(!(s.end>h||s.nextStart))return;S.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=h+.05}if(l.initSegment&&!l.initSegment.data)g=l.initSegment;else if(u<=h){g=c[0];if(null!==this.videoTrackCC&&g.cc!==this.videoTrackCC&&(g=b.findFragWithCC(c,this.videoTrackCC)),l.live&&g.loadIdx&&g.loadIdx===this.fragLoadIdx)return s=s.nextStart||h,S.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(s+.05)),void(this.media.currentTime=s+.05)}else{var h=void 0,y=i.maxFragLookUpTolerance,s=d?c[d.sn-c[0].sn+1]:void 0,m=function(t){var e=Math.min(y,t.duration);return t.start+t.duration-e<=u?1:t.start-e>u&&t.start?-1:0};(h=u<p?(p-y<u&&(y=0),s&&!m(s)?s:E.default.search(c,m)):c[a-1])&&((g=h).start,d)&&g.level===d.level&&g.sn===d.sn&&(g.sn<l.endSN?(g=c[g.sn+1-l.startSN],S.logger.log("SN just loaded, load next one: "+g.sn)):g=null)}g&&(g.encrypted?(S.logger.log("Loading key for "+g.sn+" of ["+l.startSN+" ,"+l.endSN+"],track "+f),this.state=R.State.KEY_LOADING,r.trigger(T.default.KEY_LOADING,{frag:g})):(S.logger.log("Loading "+g.sn+", cc: "+g.cc+" of ["+l.startSN+" ,"+l.endSN+"],track "+f+", currentTime:"+t+",bufferEnd:"+u.toFixed(3)),this.fragCurrent=g,!o&&this.fragmentTracker.getState(g)!==A.FragmentState.NOT_LOADED||(this.startFragRequested=!0,v.isFinite(g.sn)&&(this.nextLoadPosition=g.start+g.duration),r.trigger(T.default.FRAG_LOADING,{frag:g}),this.state=R.State.FRAG_LOADING)))}}break;case R.State.WAITING_TRACK:(e=this.tracks[this.trackId])&&e.details&&(this.state=R.State.IDLE);break;case R.State.FRAG_LOADING_WAITING_RETRY:p=D.now(),s=this.retryDate,m=(n=this.media)&&n.seeking;(!s||s<=p||m)&&(S.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=R.State.IDLE);break;case R.State.WAITING_INIT_PTS:a=this.videoTrackCC;void 0!==this.initPTS[a]&&((h=this.waitingFragment)?a!==(d=h.frag.cc)?(e=this.tracks[this.trackId]).details&&e.details.live&&(S.logger.warn("Waiting fragment CC ("+d+") does not match video track CC ("+a+")"),this.waitingFragment=null,this.state=R.State.IDLE):(this.state=R.State.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null):this.state=R.State.IDLE);break;case R.State.STOPPED:case R.State.FRAG_LOADING:case R.State.PARSING:case R.State.PARSED:case R.State.ENDED:}},e.prototype.onMediaAttached=function(t){t=this.media=this.mediaBuffer=t.media,this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended),t=this.config;this.tracks&&t.autoStartLoad&&this.startLoad(t.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(S.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onAudioTracksUpdated=function(t){S.logger.log("audio tracks updated"),this.tracks=t.audioTracks},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=R.State.PAUSED,this.waitingFragment=null,e?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=R.State.IDLE),this.tick()},e.prototype.onAudioTrackLoaded=function(t){var e=t.details,t=t.id,r=this.tracks[t],i=e.totalduration,a=0;S.logger.log("track "+t+" loaded ["+e.startSN+","+e.endSN+"],duration:"+i),e.live?(t=r.details)&&0<e.fragments.length?(l.mergeDetails(t,e),a=e.fragments[0].start,e.PTSKnown?S.logger.log("live audio playlist sliding:"+a.toFixed(3)):S.logger.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,S.logger.log("live audio playlist - first load, unknown sliding")):e.PTSKnown=!1,r.details=e,this.startFragRequested||(-1===this.startPosition&&(i=e.startTimeOffset,v.isFinite(i)?(S.logger.log("start time offset found in playlist, adjust startPosition to "+i),this.startPosition=i):this.startPosition=0),this.nextLoadPosition=this.startPosition),this.state===R.State.WAITING_TRACK&&(this.state=R.State.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===R.State.KEY_LOADING&&(this.state=R.State.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e,r,i,a,n,o,s,l=this.fragCurrent,u=t.frag;this.state===R.State.FRAG_LOADING&&l&&"audio"===u.type&&u.level===l.level&&u.sn===l.sn&&(r=(e=(u=this.tracks[this.trackId]).details).totalduration,i=l.level,a=l.sn,n=l.cc,u=this.config.defaultAudioCodec||u.audioCodec||"mp4a.40.2",o=this.stats=t.stats,"initSegment"===a?(this.state=R.State.IDLE,o.tparsed=o.tbuffered=D.now(),e.initSegment.data=t.payload,this.hls.trigger(T.default.FRAG_BUFFERED,{stats:o,frag:l,id:"audio"}),this.tick()):(this.state=R.State.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new d.default(this.hls,"audio")),o=this.initPTS[n],s=e.initSegment?e.initSegment.data:[],e.initSegment||void 0!==o?(this.pendingBuffering=!0,S.logger.log("Demuxing "+a+" of ["+e.startSN+" ,"+e.endSN+"],track "+i),this.demuxer.push(t.payload,s,u,null,l,r,!1,o)):(S.logger.log("unknown video PTS for continuity counter "+n+", waiting for video PTS before demuxing audio frag "+a+" of ["+e.startSN+" ,"+e.endSN+"],track "+i),this.waitingFragment=t,this.state=R.State.WAITING_INIT_PTS))),this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;e&&"audio"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===R.State.PARSING&&(r=void 0,(e=t.tracks).video&&delete e.video,r=e.audio)&&(r.levelCodec=r.codec,r.id=t.id,this.hls.trigger(T.default.BUFFER_CODECS,e),S.logger.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]"),(t=r.initSegment)&&(e={type:"audio",data:t,parent:"audio",content:"initSegment"},this.audioSwitch?this.pendingData=[e]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(T.default.BUFFER_APPENDING,e))),this.tick())},e.prototype.onFragParsingData=function(e){var t,r,i,a,n=this,o=this.fragCurrent,s=e.frag;o&&"audio"===e.id&&"audio"===e.type&&s.sn===o.sn&&s.level===o.level&&this.state===R.State.PARSING&&(s=this.trackId,i=this.tracks[s],t=this.hls,v.isFinite(e.endPTS)||(e.endPTS=e.startPTS+o.duration,e.endDTS=e.startDTS+o.duration),o.addElementaryStream(c.default.ElementaryStreamTypes.AUDIO),S.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),l.updateFragPTSDTS(i.details,o,e.startPTS,e.endPTS),i=this.audioSwitch,o=this.media,r=!1,i&&o&&(o.readyState?(i=o.currentTime,S.logger.log("switching audio track : currentTime:"+i),i>=e.startPTS&&(S.logger.log("switching audio track : flushing all audio"),this.state=R.State.BUFFER_FLUSHING,t.trigger(T.default.BUFFER_FLUSHING,{startOffset:0,endOffset:v.POSITIVE_INFINITY,type:"audio"}),this.audioSwitch=!(r=!0),t.trigger(T.default.AUDIO_TRACK_SWITCHED,{id:s}))):(this.audioSwitch=!1,t.trigger(T.default.AUDIO_TRACK_SWITCHED,{id:s}))),(a=this.pendingData)?(this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&a.push({type:e.type,data:t,parent:"audio",content:"data"})}),!r&&a.length&&(a.forEach(function(t){n.state===R.State.PARSING&&(n.pendingBuffering=!0,n.hls.trigger(T.default.BUFFER_APPENDING,t))}),this.pendingData=[],this.appended=!0)),this.tick()):(S.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),t.trigger(T.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0})))},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"audio"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===R.State.PARSING&&(this.stats.tparsed=D.now(),this.state=R.State.PARSED,this._checkAppendedParsed())},e.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},e.prototype.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},e.prototype.onBufferAppended=function(t){var e;"audio"!==t.parent||(e=this.state)!==R.State.PARSING&&e!==R.State.PARSED||(this.pendingBuffering=0<t.pending,this._checkAppendedParsed())},e.prototype._checkAppendedParsed=function(){var t,e,r;this.state!==R.State.PARSED||this.appended&&this.pendingBuffering||(t=this.fragCurrent,r=this.stats,e=this.hls,t&&(this.fragPrevious=t,r.tbuffered=D.now(),e.trigger(T.default.FRAG_BUFFERED,{stats:r,frag:t,id:"audio"}),r=this.mediaBuffer||this.media,S.logger.log("audio buffered : "+n.default.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,e.trigger(T.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=R.State.IDLE),this.tick())},e.prototype.onError=function(t){var e,r,i=t.frag;if(!i||"audio"===i.type)switch(t.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:var a=t.frag;a&&"audio"!==a.type||t.fatal||((a=this.fragLoadError)?a++:a=1,a<=(e=this.config).fragLoadingMaxRetry?(this.fragLoadError=a,a=Math.min(Math.pow(2,a-1)*e.fragLoadingRetryDelay,e.fragLoadingMaxRetryTimeout),S.logger.warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=D.now()+a,this.state=R.State.FRAG_LOADING_WAITING_RETRY):(S.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=R.State.ERROR));break;case u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case u.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==R.State.ERROR&&(this.state=t.fatal?R.State.ERROR:R.State.IDLE,S.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case u.ErrorDetails.BUFFER_FULL_ERROR:"audio"!==t.parent||this.state!==R.State.PARSING&&this.state!==R.State.PARSED||(a=this.mediaBuffer,r=this.media.currentTime,a&&_.BufferHelper.isBuffered(a,r)&&_.BufferHelper.isBuffered(a,r+.5)?((e=this.config).maxMaxBufferLength>=e.maxBufferLength&&(e.maxMaxBufferLength/=2,S.logger.warn("AudioStreamController: reduce max buffer length to "+e.maxMaxBufferLength+"s")),this.state=R.State.IDLE):(S.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=R.State.BUFFER_FLUSHING,this.hls.trigger(T.default.BUFFER_FLUSHING,{startOffset:0,endOffset:v.POSITIVE_INFINITY,type:"audio"})))}},e.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(S.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach(function(t){e.hls.trigger(T.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=R.State.PARSED):(this.state=R.State.IDLE,this.fragPrevious=null,this.tick())},e);function e(t,e){var r=a.call(this,t,T.default.MEDIA_ATTACHED,T.default.MEDIA_DETACHING,T.default.AUDIO_TRACKS_UPDATED,T.default.AUDIO_TRACK_SWITCHING,T.default.AUDIO_TRACK_LOADED,T.default.KEY_LOADED,T.default.FRAG_LOADED,T.default.FRAG_PARSING_INIT_SEGMENT,T.default.FRAG_PARSING_DATA,T.default.FRAG_PARSED,T.default.ERROR,T.default.BUFFER_RESET,T.default.BUFFER_CREATED,T.default.BUFFER_APPENDED,T.default.BUFFER_FLUSHED,T.default.INIT_PTS_FOUND)||this;return r.fragmentTracker=e,r.config=t.config,r.audioCodecSwap=!1,r._state=R.State.STOPPED,r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r}r.default=t}.call(this,o(2).Number)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=r(30);e.newCue=function(t,e,r,i){for(var a,n,o,s,l,u=window.VTTCue||window.TextTrackCue,d=0;d<i.rows.length;d++)if(o=!0,s=0,l="",!(a=i.rows[d]).isEmpty()){for(var c=0;c<a.chars.length;c++)a.chars[c].uchar.match(/\s/)&&o?s++:(l+=a.chars[c].uchar,o=!1);(a.cueStartTime=e)===r&&(r+=1e-4),n=new u(e,r,f.fixLineBreaks(l.trim())),16<=s?s--:s++,navigator.userAgent.match(/Firefox\//)?n.line=d+1:n.line=7<d?d-2:d+1,n.align="left",n.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),t.addCue(n)}}},function(t,e,r){"use strict";function _(t){return"string"==typeof t&&!!a[t.toLowerCase()]&&t.toLowerCase()}function T(t){for(var e=1;e<arguments.length;e++){var r,i=arguments[e];for(r in i)t[r]=i[r]}return t}function i(t,e,r){var i=this,a=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),n={},o=(a?i=document.createElement("custom"):n.enumerable=!0,i.hasBeenReset=!1,""),s=!1,l=t,u=e,d=r,c=null,f="",h=!0,p="auto",g="start",y=50,m="middle",v=50,E="middle";if(Object.defineProperty(i,"id",T({},n,{get:function(){return o},set:function(t){o=""+t}})),Object.defineProperty(i,"pauseOnExit",T({},n,{get:function(){return s},set:function(t){s=!!t}})),Object.defineProperty(i,"startTime",T({},n,{get:function(){return l},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");l=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"endTime",T({},n,{get:function(){return u},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");u=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"text",T({},n,{get:function(){return d},set:function(t){d=""+t,this.hasBeenReset=!0}})),Object.defineProperty(i,"region",T({},n,{get:function(){return c},set:function(t){c=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"vertical",T({},n,{get:function(){return f},set:function(t){t="string"==typeof(t=t)&&!!S[t.toLowerCase()]&&t.toLowerCase();if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"snapToLines",T({},n,{get:function(){return h},set:function(t){h=!!t,this.hasBeenReset=!0}})),Object.defineProperty(i,"line",T({},n,{get:function(){return p},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");p=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"lineAlign",T({},n,{get:function(){return g},set:function(t){t=_(t);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"position",T({},n,{get:function(){return y},set:function(t){if(t<0||100<t)throw new Error("Position must be between 0 and 100.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"positionAlign",T({},n,{get:function(){return m},set:function(t){t=_(t);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"size",T({},n,{get:function(){return v},set:function(t){if(t<0||100<t)throw new Error("Size must be between 0 and 100.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"align",T({},n,{get:function(){return E},set:function(t){t=_(t);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),i.displayState=void 0,a)return i}var S,a;Object.defineProperty(e,"__esModule",{value:!0}),e.default="undefined"!=typeof window&&window.VTTCue?window.VTTCue:(S={"":!0,lr:!0,rl:!0},a={start:!0,middle:!0,end:!0,left:!0,right:!0},i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},i)},function(t,f,h){"use strict";!function(n){var i,t=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=(Object.defineProperty(f,"__esModule",{value:!0}),h(1)),e=h(4),a=h(71),s=h(72),l=h(73),u=h(0),d=h(29);c=e.default,t(r,c),r.prototype.addCues=function(t,e,r,i){for(var a,n,o=this.cueRanges,s=!1,l=o.length;l--;){var u=o[l],d=(a=u[0],d=u[1],n=e,Math.min(d,r)-Math.max(a,n));if(0<=d&&(u[0]=Math.min(u[0],e),u[1]=Math.max(u[1],r),s=!0,.5<d/(r-e)))return}s||o.push([e,r]),this.Cues.newCue(this.captionsTracks[t],e,r,i)},r.prototype.onInitPtsFound=function(t){var e=this;"main"===t.id&&(this.initPTS[t.frag.cc]=t.initPTS),this.unparsedVttFrags.length&&(t=this.unparsedVttFrags,this.unparsedVttFrags=[],t.forEach(function(t){e.onFragLoaded(t)}))},r.prototype.getExistingTrack=function(t){var e=this.media;if(e)for(var r=0;r<e.textTracks.length;r++){var i=e.textTracks[r];if(i[t])return i}return null},r.prototype.createCaptionsTrack=function(t){var e,r=this.captionsProperties[t],i=r.label,r=r.languageCode,a=this.captionsTracks;a[t]||((e=this.getExistingTrack(t))?(a[t]=e,d.clearCurrentCues(a[t]),d.sendAddTrackEvent(a[t],this.media)):(e=this.createTextTrack("captions",i,r))&&(e[t]=!0,a[t]=e))},r.prototype.createTextTrack=function(t,e,r){var i=this.media;if(i)return i.addTextTrack(t,e,r)},r.prototype.destroy=function(){e.default.prototype.destroy.call(this)},r.prototype.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},r.prototype.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(t){d.clearCurrentCues(e[t]),delete e[t]})},r.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},r.prototype._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var r=0;r<e.length;r++)d.clearCurrentCues(e[r])}},r.prototype.onManifestLoaded=function(t){var i,a=this;this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT&&(this.tracks=t.subtitles||[],i=this.media?this.media.textTracks:[],this.tracks.forEach(function(e,t){var r=(r=t<i.length&&(t=[].slice.call(i).find(function(t){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}))?t:r)||a.createTextTrack("subtitles",e.name,e.lang);e.default?r.mode=a.hls.subtitleDisplay?"showing":"hidden":r.mode="disabled",a.textTracks.push(r)}))},r.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},r.prototype.onFragLoaded=function(t){var e,r,i=t.frag,a=t.payload;"main"===i.type?((e=i.sn)!==this.lastSn+1&&(r=this.cea608Parser)&&r.reset(),this.lastSn=e):"subtitle"===i.type&&(a.byteLength?n.isFinite(this.initPTS[i.cc])?null!=(r=i.decryptdata)&&null!=r.key&&"AES-128"===r.method||this._parseVTTs(i,a):(this.unparsedVttFrags.push(t),this.initPTS.length&&this.hls.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i})):this.hls.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i}))},r.prototype._parseVTTs=function(e,t){var r=this.vttCCs,a=(r[e.cc]||(r[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc),this.textTracks),n=this.hls;l.default.parse(t,this.initPTS[e.cc],r,e.cc,function(t){var i=a[e.trackId];"disabled"!==i.mode?(t.forEach(function(e){if(!i.cues.getCueById(e.id))try{i.addCue(e)}catch(t){var r=new window.TextTrackCue(e.startTime,e.endTime,e.text);r.id=e.id,i.addCue(r)}}),n.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):n.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},function(t){u.logger.log("Failed to parse VTT cue: "+t),n.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},r.prototype.onFragDecrypted=function(t){var e=t.payload,r=t.frag;"subtitle"===r.type&&(n.isFinite(this.initPTS[r.cc])?this._parseVTTs(r,e):this.unparsedVttFrags.push(t))},r.prototype.onFragParsingUserdata=function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var r=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,r)}},r.prototype.extractCea608Data=function(t){for(var e,r,i,a=31&t[0],n=2,o=[],s=0;s<a;s++)e=t[n++],r=127&t[n++],i=127&t[n++],0==r&&0==i||0!=(4&e)&&0==(3&e)&&(o.push(r),o.push(i));return o};var c,t=r;function r(t){var e,r=c.call(this,t,o.default.MEDIA_ATTACHING,o.default.MEDIA_DETACHING,o.default.FRAG_PARSING_USERDATA,o.default.FRAG_DECRYPTED,o.default.MANIFEST_LOADING,o.default.MANIFEST_LOADED,o.default.FRAG_LOADED,o.default.LEVEL_SWITCHING,o.default.INIT_PTS_FOUND)||this;return r.hls=t,r.config=t.config,r.enabled=!0,r.Cues=t.config.cueHandler,r.textTracks=[],r.tracks=[],r.unparsedVttFrags=[],r.initPTS=[],r.cueRanges=[],r.captionsTracks={},r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode}},r.config.enableCEA708Captions&&(t=new s.default(r,"textTrack1"),e=new s.default(r,"textTrack2"),r.cea608Parser=new a.default(0,t,e)),r}f.default=t}.call(this,h(2).Number)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function o(t){var e=t;return i.hasOwnProperty(t)&&(e=i[t]),String.fromCharCode(e)}function s(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].toString(16));return e}var i={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},a=100,n={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},l={17:2,18:4,21:6,22:8,23:10,19:13,20:15},u={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},d={25:2,26:4,29:6,30:8,31:10,27:13,28:15},c=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],f={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){this.verboseFilter[t],this.verboseLevel}},h=(b.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},b.prototype.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(this[i]=t[i])}},b.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},b.prototype.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},b.prototype.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},b.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},b),p=(S.prototype.reset=function(){this.uchar=" ",this.penState.reset()},S.prototype.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},S.prototype.setPenState=function(t){this.penState.copy(t)},S.prototype.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},S.prototype.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},S.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},S),g=(T.prototype.equals=function(t){for(var e=!0,r=0;r<a;r++)if(!this.chars[r].equals(t.chars[r])){e=!1;break}return e},T.prototype.copy=function(t){for(var e=0;e<a;e++)this.chars[e].copy(t.chars[e])},T.prototype.isEmpty=function(){for(var t=!0,e=0;e<a;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},T.prototype.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(f.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>a&&(f.log("ERROR","Too large cursor position "+this.pos),this.pos=a)},T.prototype.moveCursor=function(t){var e=this.pos+t;if(1<t)for(var r=this.pos+1;r<e+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(e)},T.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},T.prototype.insertChar=function(t){144<=t&&this.backSpace();var e=o(t);this.pos>=a?f.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},T.prototype.clearFromPos=function(t){for(var e=t;e<a;e++)this.chars[e].reset()},T.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},T.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},T.prototype.getTextString=function(){for(var t=[],e=!0,r=0;r<a;r++){var i=this.chars[r].uchar;" "!==i&&(e=!1),t.push(i)}return e?"":t.join("")},T.prototype.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},T),y=(_.prototype.reset=function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14},_.prototype.equals=function(t){for(var e=!0,r=0;r<15;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e},_.prototype.copy=function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e])},_.prototype.isEmpty=function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},_.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},_.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},_.prototype.insertChar=function(t){this.rows[this.currRow].insertChar(t)},_.prototype.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},_.prototype.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},_.prototype.setCursor=function(t){f.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},_.prototype.setPAC=function(t){f.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var r=0;r<15;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var n=a.rows[i].cueStartTime;if(n&&n<f.time)for(r=0;r<this.nrRollUpRows;r++)this.rows[e-this.nrRollUpRows+r+1].copy(a.rows[i+r])}}this.currRow=e;var o,n=this.rows[this.currRow],n=(null!==t.indent&&(o=t.indent,o=Math.max(o-1,0),n.setCursor(t.indent),t.color=n.chars[o].penState.foreground),{foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1});this.setPen(n)},_.prototype.setBkgData=function(t){f.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},_.prototype.setRollUpRows=function(t){this.nrRollUpRows=t},_.prototype.rollUp=function(){var t;null!==this.nrRollUpRows?(f.log("TEXT",this.getDisplayText()),t=this.currRow+1-this.nrRollUpRows,(t=this.rows.splice(t,1)[0]).clear(),this.rows.splice(this.currRow,0,t),f.log("INFO","Rolling up")):f.log("DEBUG","roll_up but nrRollUpRows not set yet")},_.prototype.getDisplayText=function(t){t=t||!1;for(var e=[],r="",i=0;i<15;i++){var a=this.rows[i].getTextString();a&&e.push(t?"Row "+(i+1)+": '"+a+"'":a.trim())}return r=0<e.length?t?"["+e.join(" | ")+"]":e.join("\n"):r},_.prototype.getTextAndFormat=function(){return this.rows},_),m=(E.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},E.prototype.getHandler=function(){return this.outputFilter},E.prototype.setHandler=function(t){this.outputFilter=t},E.prototype.setPAC=function(t){this.writeScreen.setPAC(t)},E.prototype.setBkgData=function(t){this.writeScreen.setBkgData(t)},E.prototype.setMode=function(t){t!==this.mode&&(this.mode=t,f.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},E.prototype.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";f.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(f.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},E.prototype.ccRCL=function(){f.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},E.prototype.ccBS=function(){f.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory)&&this.outputDataUpdate()},E.prototype.ccAOF=function(){},E.prototype.ccAON=function(){},E.prototype.ccDER=function(){f.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},E.prototype.ccRU=function(t){f.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},E.prototype.ccFON=function(){f.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},E.prototype.ccRDC=function(){f.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},E.prototype.ccTR=function(){f.log("INFO","TR"),this.setMode("MODE_TEXT")},E.prototype.ccRTD=function(){f.log("INFO","RTD"),this.setMode("MODE_TEXT")},E.prototype.ccEDM=function(){f.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},E.prototype.ccCR=function(){f.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},E.prototype.ccENM=function(){f.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},E.prototype.ccEOC=function(){var t;f.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(t=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,f.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())),this.outputDataUpdate(!0)},E.prototype.ccTO=function(t){f.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},E.prototype.ccMIDROW=function(t){var e={flash:!1};e.underline=t%2==1,e.italics=46<=t,e.italics?e.foreground="white":(t=Math.floor(t/2)-16,e.foreground=["white","green","blue","cyan","red","yellow","magenta"][t]),f.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},E.prototype.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=f.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),!0===t)&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},E.prototype.cueSplitAtTime=function(t){!this.outputFilter||this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t)},E);function v(t,e,r){this.field=t||1,this.outputs=[e,r],this.channels=[new m(1,e),new m(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}function E(t,e){this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new y,this.nonDisplayedMemory=new y,this.lastOutputScreen=new y,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}function _(){this.rows=[];for(var t=0;t<15;t++)this.rows.push(new g);this.currRow=14,this.nrRollUpRows=null,this.reset()}function T(){this.chars=[];for(var t=0;t<a;t++)this.chars.push(new p);this.pos=0,this.currPenState=new h}function S(t,e,r,i,a,n){this.uchar=t||" ",this.penState=new h(e,r,i,a,n)}function b(t,e,r,i,a){this.foreground=t||"white",this.underline=e||!1,this.italics=r||!1,this.background=i||"black",this.flash=a||!1}v.prototype.getHandler=function(t){return this.channels[t].getHandler()},v.prototype.setHandler=function(t,e){this.channels[t].setHandler(e)},v.prototype.addData=function(t,e){var r,i,a,n=!1;this.lastTime=t,f.setTime(t);for(var o=0;o<e.length;o+=2)i=127&e[o],a=127&e[o+1],0!=i||0!=a?(f.log("DATA","["+s([e[o],e[o+1]])+"] -> ("+s([i,a])+")"),(r=(r=(r=(r=this.parseCmd(i,a))||this.parseMidrow(i,a))||this.parsePAC(i,a))||this.parseBackgroundAttributes(i,a))||(n=this.parseChars(i,a))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(n):f.log("WARNING","No channel found yet. TEXT-MODE?")),r?this.dataCounters.cmd+=2:n?this.dataCounters.char+=2:(this.dataCounters.other+=2,f.log("WARNING","Couldn't parse cleaned data "+s([i,a])+" orig: "+s([e[o],e[o+1]])))):this.dataCounters.padding+=2},v.prototype.parseCmd=function(t,e){var r,i;return((20===t||28===t)&&32<=e&&e<=47||(23===t||31===t)&&33<=e&&e<=35)&&(t===this.lastCmdA&&e===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,f.log("DEBUG","Repeated command ("+s([t,e])+") is dropped")):(i=this.channels[(r=20===t||23===t?1:2)-1],20===t||28===t?32===e?i.ccRCL():33===e?i.ccBS():34===e?i.ccAOF():35===e?i.ccAON():36===e?i.ccDER():37===e?i.ccRU(2):38===e?i.ccRU(3):39===e?i.ccRU(4):40===e?i.ccFON():41===e?i.ccRDC():42===e?i.ccTR():43===e?i.ccRTD():44===e?i.ccEDM():45===e?i.ccCR():46===e?i.ccENM():47===e&&i.ccEOC():i.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=r),!0)},v.prototype.parseMidrow=function(t,e){var r;return(17===t||25===t)&&32<=e&&e<=47&&((r=17===t?1:2)!==this.currChNr?(f.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[r-1].ccMIDROW(e),f.log("DEBUG","MIDROW ("+s([t,e])+")"),!0))},v.prototype.parsePAC=function(t,e){var r,i;return((17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127||(16===t||24===t)&&64<=e&&e<=95)&&(t===this.lastCmdA&&e===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null):(r=t<=23?1:2,i=this.interpretPAC((64<=e&&e<=95?1==r?n:u:1==r?l:d)[t],e),this.channels[r-1].setPAC(i),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=r),!0)},v.prototype.interpretPAC=function(t,e){t={color:null,italics:!1,indent:null,underline:!1,row:t};return t.underline=1==(1&(e=95<e?e-96:e-64)),e<=13?t.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(e/2)]:e<=15?(t.italics=!0,t.color="white"):t.indent=4*Math.floor((e-16)/2),t},v.prototype.parseChars=function(t,e){var r,i=null,a=null,n=null;return 17<=(n=25<=t?(i=2,t-8):(i=1,t))&&n<=19?(r=e,f.log("INFO","Special char '"+o(r=17===n?e+80:18===n?e+112:e+144)+"' in channel "+i),a=[r]):32<=t&&t<=127&&(a=0===e?[t]:[t,e]),a&&(n=s(a),f.log("DEBUG","Char codes =  "+n.join(",")),this.lastCmdA=null,this.lastCmdB=null),a},v.prototype.parseBackgroundAttributes=function(t,e){var r,i;return((16===t||24===t)&&32<=e&&e<=47||(23===t||31===t)&&45<=e&&e<=47)&&(r={},16===t||24===t?(i=Math.floor((e-32)/2),r.background=c[i],e%2==1&&(r.background=r.background+"_semi")):45===e?r.background="transparent":(r.foreground="black",47===e&&(r.underline=!0)),this.channels[(t<24?1:2)-1].setBkgData(r),this.lastCmdA=null,!(this.lastCmdB=null))},v.prototype.reset=function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},v.prototype.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)},e.default=v},function(t,e,r){"use strict";function i(t,e){this.timelineController=t,this.trackName=e,this.startTime=null,this.endTime=null,this.screen=null}Object.defineProperty(e,"__esModule",{value:!0}),i.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},i.prototype.newCue=function(t,e,r){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e.default=i},function(t,e,r){"use strict";!function(g){Object.defineProperty(e,"__esModule",{value:!0});function y(t,e,r){return t.substr(r||0,e.length)===e}function a(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()}var m=r(30),v=r(10);e.default={parse:function(t,n,o,s,e,r){var l,t=v.utf8ArrayToStr(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),u="00:00.000",d=0,c=0,f=0,i=[],h=!0,p=new m.default;p.oncue=function(t){var e=o[s],r=o.ccOffset;e&&e.new&&(void 0!==c?r=o.ccOffset=e.start:function(t,e){var r=t[s],i=t[r.prevCC];if(!i||!i.new&&r.new)return t.ccOffset=t.presentationOffset=r.start,r.new=!1;for(;i&&i.new;)t.ccOffset+=r.start-i.start,r.new=!1,i=t[(r=i).prevCC];t.presentationOffset=e}(o,f)),f&&(r=f-o.presentationOffset),t.startTime+=r-c,t.endTime+=r-c,t.id=a(t.startTime.toString())+a(t.endTime.toString())+a(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),0<t.endTime&&i.push(t)},p.onparsingerror=function(t){l=t},p.onflush=function(){l&&r?r(l):e(i)},t.forEach(function(e){if(h){if(y(e,"X-TIMESTAMP-MAP=")){h=!1,e.substr(16).split(",").forEach(function(t){y(t,"LOCAL:")?u=t.substr(6):y(t,"MPEGTS:")&&(d=parseInt(t.substr(7)))});try{n+(9e4*o[s].start||0)<0&&(n+=8589934592),d-=n,t=u,r=parseInt(t.substr(-3)),i=parseInt(t.substr(-6,2)),a=parseInt(t.substr(-9,2)),t=9<t.length?parseInt(t.substr(0,t.indexOf(":"))):0,c=(g.isFinite(r)&&g.isFinite(i)&&g.isFinite(a)&&g.isFinite(t)?(r=r+1e3*i+6e4*a)+36e5*t:-1)/1e3,f=d/9e4,-1===c&&(l=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){l=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(h=!1)}var t,r,i,a;p.parse(e+"\n")}),p.flush()}}}.call(this,r(2).Number)},function(t,e,r){"use strict";var i,a=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),r(1)),o=r(4),s=r(0);function l(t){for(var e=[],r=0;r<t.length;r++)"subtitles"===t[r].kind&&e.push(t[r]);return e}u=o.default,a(d,u),d.prototype._onTextTracksChanged=function(){if(this.media){for(var t=-1,e=l(this.media.textTracks),r=0;r<e.length;r++)if("hidden"===e[r].mode)t=r;else if("showing"===e[r].mode){t=r;break}this.subtitleTrack=t}},d.prototype.destroy=function(){o.default.prototype.destroy.call(this)},d.prototype.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){e.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},d.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},d.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},d.prototype.onManifestLoaded=function(t){var e=this,t=t.subtitles||[];this.tracks=t,this.trackId=-1,this.hls.trigger(n.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:t}),t.forEach(function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)})},d.prototype.onTick=function(){var t,e=this.trackId,r=this.tracks[e];!r||(t=r.details)&&!t.live||(s.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(n.default.SUBTITLE_TRACK_LOADING,{url:r.url,id:e}))},d.prototype.onSubtitleTrackLoaded=function(t){var e=this;t.id<this.tracks.length&&(s.logger.log("subtitle track "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(function(){e.onTick()},1e3*t.details.targetduration,this)),!t.details.live)&&this.timer&&this._stopTimer()},Object.defineProperty(d.prototype,"subtitleTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"subtitleTrack",{get:function(){return this.trackId},set:function(t){this.trackId!==t&&(this._toggleTrackModes(t),this.setSubtitleTrackInternal(t))},enumerable:!0,configurable:!0}),d.prototype.setSubtitleTrackInternal=function(t){var e,r=this.hls,i=this.tracks;"number"!=typeof t||t<-1||t>=i.length||(this._stopTimer(),this.trackId=t,s.logger.log("switching to subtitle track "+t),r.trigger(n.default.SUBTITLE_TRACK_SWITCH,{id:t}),-1===t)||((e=(i=i[t]).details)&&!e.live||(s.logger.log("(re)loading playlist for subtitle track "+t),r.trigger(n.default.SUBTITLE_TRACK_LOADING,{url:i.url,id:t})))},d.prototype._stopTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},d.prototype._toggleTrackModes=function(t){var e=this.media,r=this.subtitleDisplay,i=this.trackId;e&&(e=l(e.textTracks),-1===t?[].slice.call(e).forEach(function(t){t.mode="disabled"}):(i=e[i])&&(i.mode="disabled"),i=e[t])&&(i.mode=r?"showing":"hidden")};var u,r=d;function d(t){t=u.call(this,t,n.default.MEDIA_ATTACHED,n.default.MEDIA_DETACHING,n.default.MANIFEST_LOADING,n.default.MANIFEST_LOADED,n.default.SUBTITLE_TRACK_LOADED)||this;return t.tracks=[],t.trackId=-1,t.media=null,t.subtitleDisplay=!0,t}e.default=r},function(t,e,r){"use strict";var i,a,n=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=(Object.defineProperty(e,"__esModule",{value:!0}),r(1)),d=r(0),o=r(12),s=r(15),c=r(5),f=r(27),h=r(7),l=window.performance,p=(e.SubtitleStreamControllerState={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},e.SubtitleStreamControllerState),r=(a=s.default,n(g,a),g.prototype.onHandlerDestroyed=function(){this.fragmentTracker=null,this.state=p.STOPPED,a.prototype.onHandlerDestroyed.call(this)},g.prototype.onSubtitleFragProcessed=function(t){if(this.state=p.IDLE,t.success){var e=this.tracksBuffered[this.currentTrackId],r=t.frag;if(this.fragPrevious=r,e){for(var i,a=0;a<e.length;a++)if(r.start>=e[a].start&&r.start<=e[a].end){i=e[a];break}i?i.end=r.start+r.duration:e.push({start:r.start,end:r.start+r.duration})}}},g.prototype.onMediaAttached=function(t){this.media=t.media,this.state=p.IDLE},g.prototype.onMediaDetaching=function(){this.media=null,this.state=p.STOPPED},g.prototype.onError=function(t){t=t.frag;t&&"subtitle"===t.type&&(this.state=p.IDLE)},g.prototype.onSubtitleTracksUpdated=function(t){var e=this;d.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=t.subtitleTracks,this.tracks.forEach(function(t){e.tracksBuffered[t.id]=[]})},g.prototype.onSubtitleTrackSwitch=function(t){this.currentTrackId=t.id,this.tracks&&-1!==this.currentTrackId?(t=this.tracks[this.currentTrackId])&&t.details&&this.setInterval(500):this.clearInterval()},g.prototype.onSubtitleTrackLoaded=function(t){var e=t.id,t=t.details;this.tracks?(this.tracks[e]&&(d.logger.log("Updating subtitle track details"),this.tracks[e].details=t),this.setInterval(500)):d.logger.warn("Can not update subtitle details, no tracks found")},g.prototype.onKeyLoaded=function(){this.state===p.KEY_LOADING&&(this.state=p.IDLE)},g.prototype.onFragLoaded=function(t){var r,e=this.fragCurrent,i=t.frag.decryptdata,a=t.frag,n=this.hls;this.state===p.FRAG_LOADING&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&0<t.payload.byteLength&&i&&i.key&&"AES-128"===i.method&&(r=l.now(),this.decrypter.decrypt(t.payload,i.key.buffer,i.iv.buffer,function(t){var e=l.now();n.trigger(u.default.FRAG_DECRYPTED,{frag:a,payload:t,stats:{tstart:r,tdecrypt:e}})}))},g.prototype.doTick=function(){var t,e,r,i,a,n,o,s,l;this.media?this.state===p.IDLE&&(e=this.tracks,t=this.currentTrackId,e)&&e[t]&&e[t].details&&(e=e[t].details,n=(i=this.config).maxBufferHole,r=Math.min(i.maxBufferLength,i.maxMaxBufferLength),i=i.maxFragLookUpTolerance,a=(n=c.BufferHelper.bufferedInfo(this._getBuffered(),this.media.currentTime,n)).end,n=n.len,s=(o=e.fragments)[(s=o.length)-1].start+o[s-1].duration,l=void 0,n<r&&a<s?l=f.findFragmentByPTS(this.fragPrevious,o,a,i):e.hasProgramDateTime&&this.fragPrevious&&(l=f.findFragmentByPDT(o,this.fragPrevious.endProgramDateTime,i)),l&&l.encrypted?(d.logger.log("Loading key for "+l.sn),this.state=p.KEY_LOADING,this.hls.trigger(u.default.KEY_LOADING,{frag:l})):l&&this.fragmentTracker.getState(l)===h.FragmentState.NOT_LOADED&&(l.trackId=t,this.fragCurrent=l,this.state=p.FRAG_LOADING,this.hls.trigger(u.default.FRAG_LOADING,{frag:l}))):this.state=p.IDLE},g.prototype._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},g);function g(t,e){var r=a.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.ERROR,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.SUBTITLE_TRACKS_UPDATED,u.default.SUBTITLE_TRACK_SWITCH,u.default.SUBTITLE_TRACK_LOADED,u.default.SUBTITLE_FRAG_PROCESSED)||this;return r.fragmentTracker=e,r.config=t.config,r.state=p.STOPPED,r.tracks=[],r.tracksBuffered=[],r.currentTrackId=-1,r.decrypter=new o.default(t,t.config),r}e.SubtitleStreamController=r},function(t,e,r){"use strict";var i,a,n=this&&this.__extends||(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=(Object.defineProperty(e,"__esModule",{value:!0}),r(4)),s=r(1),l=r(3),u=r(0),d=window.XMLHttpRequest,c="com.widevine.alpha",r=(a=o.default,n(f,a),f.prototype.getLicenseServerUrl=function(t){var e=t===c?this._widevineLicenseUrl:null;return e||(u.logger.error('No license server URL configured for key-system "'+t+'"'),this.hls.trigger(s.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),e},f.prototype._attemptKeySystemAccess=function(e,t,r){var i=this,r=function(t,e){if(t!==c)throw Error("Unknown key-system: "+t);return r={videoCapabilities:[]},e.forEach(function(t){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"'})}),[r];var r}(e,r);r?(u.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,r).then(function(t){i._onMediaKeySystemAccessObtained(e,t)}).catch(function(t){u.logger.error('Failed to obtain key-system "'+e+'" access:',t)})):u.logger.warn("Can not create config for key-system (maybe because platform is not supported):",e)},Object.defineProperty(f.prototype,"requestMediaKeySystemAccess",{get:function(){if(this._requestMediaKeySystemAccess)return this._requestMediaKeySystemAccess;throw new Error("No requestMediaKeySystemAccess function configured")},enumerable:!0,configurable:!0}),f.prototype._onMediaKeySystemAccessObtained=function(e,t){var r=this,i=(u.logger.log('Access for key-system "'+e+'" obtained'),{mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e});this._mediaKeysList.push(i),t.createMediaKeys().then(function(t){i.mediaKeys=t,u.logger.log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated()}).catch(function(t){u.logger.error("Failed to create media-keys:",t)})},f.prototype._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))})},f.prototype._onNewMediaKeySession=function(e){var r=this;u.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",function(t){r._onKeySessionMessage(e,t.message)},!1)},f.prototype._onKeySessionMessage=function(e,t){u.logger.log("Got EME message event, creating license request"),this._requestLicense(t,function(t){u.logger.log("Received license data, updating key-session"),e.update(t)})},f.prototype._onMediaEncrypted=function(t,e){u.logger.log('Media is encrypted using "'+t+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=t,this._mediaEncryptionInitData=e,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},f.prototype._attemptSetMediaKeys=function(){var t;this._hasSetMediaKeys||((t=this._mediaKeysList[0])&&t.mediaKeys?(u.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0):(u.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),this.hls.trigger(s.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0})))},f.prototype._generateRequestWithPreferredKeySession=function(){var t,e,r,i=this,a=this._mediaKeysList[0];a?a.mediaKeysSessionInitialized?u.logger.warn("Key-Session already initialized but requested again"):((t=a.mediaKeysSession)||(u.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(s.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0})),e=this._mediaEncryptionInitDataType,r=this._mediaEncryptionInitData,u.logger.log('Generating key-session request for "'+e+'" init data type'),a.mediaKeysSessionInitialized=!0,t.generateRequest(e,r).then(function(){u.logger.debug("Key-session generation succeeded")}).catch(function(t){u.logger.error("Error generating key-session request:",t),i.hls.trigger(s.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})):(u.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),this.hls.trigger(s.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0}))},f.prototype._createLicenseXhr=function(t,e,r){var i=new d,a=this._licenseXhrSetup;try{if(a)try{a(i,t)}catch(e){i.open("POST",t,!0),a(i,t)}i.readyState||i.open("POST",t,!0)}catch(t){return u.logger.error("Error setting up key-system license XHR",t),void this.hls.trigger(s.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,t,e,r),i},f.prototype._onLicenseRequestReadyStageChange=function(t,e,r,i){4===t.readyState&&(200===t.status?(this._requestLicenseFailureCount=0,u.logger.log("License request succeeded"),i(t.response)):(u.logger.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount<=3?(e=3-this._requestLicenseFailureCount+1,u.logger.warn("Retrying license request, "+e+" attempts left"),this._requestLicense(r,i)):this.hls.trigger(s.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})))},f.prototype._generateLicenseRequestChallenge=function(t,e){var r;return"com.microsoft.playready"===t.mediaKeySystemDomain?u.logger.error("PlayReady is not supported (yet)"):t.mediaKeySystemDomain===c?r=e:u.logger.error("Unsupported key-system:",t.mediaKeySystemDomain),r},f.prototype._requestLicense=function(t,e){u.logger.log("Requesting content license for key-system");var r,i=this._mediaKeysList[0];i?(r=this.getLicenseServerUrl(i.mediaKeySystemDomain),e=this._createLicenseXhr(r,t,e),u.logger.log("Sending license request to URL: "+r),e.send(this._generateLicenseRequestChallenge(i,t))):(u.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),this.hls.trigger(s.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0}))},f.prototype.onMediaAttached=function(t){var e=this;this._emeEnabled&&(t=t.media,(this._media=t).addEventListener("encrypted",function(t){e._onMediaEncrypted(t.initDataType,t.initData)}))},f.prototype.onManifestParsed=function(t){var e;this._emeEnabled&&(e=t.levels.map(function(t){return t.audioCodec}),t=t.levels.map(function(t){return t.videoCodec}),this._attemptKeySystemAccess(c,e,t))},f);function f(t){var e=a.call(this,t,s.default.MEDIA_ATTACHED,s.default.MANIFEST_PARSED)||this;return e._widevineLicenseUrl=t.config.widevineLicenseUrl,e._licenseXhrSetup=t.config.licenseXhrSetup,e._emeEnabled=t.config.emeEnabled,e._requestMediaKeySystemAccess=t.config.requestMediaKeySystemAccessFunc,e._mediaKeysList=[],e._media=null,e._hasSetMediaKeys=!1,e._isMediaEncrypted=!1,e._requestLicenseFailureCount=0,e}e.default=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;e.requestMediaKeySystemAccess=i}],i={},a.m=r,a.c=i,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(r,i,function(t){return e[t]}.bind(null,i));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/dist/",a(a.s=31).default;function a(t){var e;return(i[t]||(e=i[t]={i:t,l:!1,exports:{}},r[t].call(e.exports,e,e.exports,a),e.l=!0,e)).exports}var r,i});
;
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("DPlayer",[],t):"object"==typeof exports?exports.DPlayer=t():e.DPlayer=t()}(window,function(){return a=[function(e,t,a){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=a(6),n=Object.prototype.toString;function i(e){return"[object Array]"===n.call(e)}function l(e){return void 0===e}function s(e){return null!==e&&"object"===r(e)}function d(e){return"[object Function]"===n.call(e)}function p(e,t){if(null!=e)if(i(e="object"!==r(e)?[e]:e))for(var a=0,n=e.length;a<n;a++)t.call(null,e[a],a,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===n.call(e)},isBuffer:function(e){return null!==e&&!l(e)&&null!==e.constructor&&!l(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:l,isDate:function(e){return"[object Date]"===n.call(e)},isFile:function(e){return"[object File]"===n.call(e)},isBlob:function(e){return"[object Blob]"===n.call(e)},isFunction:d,isStream:function(e){return s(e)&&d(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:p,merge:function a(){var n={};function e(e,t){"object"===r(n[t])&&"object"===r(e)?n[t]=a(n[t],e):n[t]=e}for(var t=0,o=arguments.length;t<o;t++)p(arguments[t],e);return n},deepMerge:function a(){var n={};function e(e,t){"object"===r(n[t])&&"object"===r(e)?n[t]=a(n[t],e):"object"===r(e)?n[t]=a({},e):n[t]=e}for(var t=0,o=arguments.length;t<o;t++)p(arguments[t],e);return n},extend:function(a,e,n){return p(e,function(e,t){a[t]=n&&"function"==typeof e?o(e,n):e}),a},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,a){var p=a(14);e.exports=function(e){"use strict";var t="",a=(e=e||{},e.subtitle),n=e.current,o=e.airplay,r=e.pic,i=p.$escape,l=e.screenshot,s=e.preload,e=e.url,d=a&&"webvtt"===a.type;return t+='\n<video\n    class="dplayer-video ',n&&(t+="dplayer-video-current"),t+='"\n    webkit-playsinline\n    ',o&&(t+=' x-webkit-airplay="allow" '),t+="\n    playsinline\n    ",r&&(t=(t+='poster="')+i(r)+'"'),t+="\n    ",(l||d)&&(t+='crossorigin="anonymous"'),t+="\n    ",s&&(t=(t+='preload="')+i(s)+'"'),t+="\n    ",e&&(t=(t+='src="')+i(e)+'"'),t+="\n    >\n    ",(t=d?(t+='\n    <track kind="metadata" default src="')+i(a.url)+'"></track>\n    ':t)+"\n</video>"}},function(e,t,a){e.exports=a(41)},function(e,t,a){"use strict";e.exports=function(r){var s=[];return s.toString=function(){return this.map(function(e){a=e[1]||"";var t,a,n,o=(n=e[3])?(r&&"function"==typeof btoa?(t=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),t="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t),t="/*# ".concat(t," */"),o=n.sources.map(function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}),[a].concat(o).concat([t])):[a]).join("\n"):a;return e[2]?"@media ".concat(e[2]," {").concat(o,"}"):o}).join("")},s.i=function(e,t,a){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(a)for(var o=0;o<this.length;o++){var r=this[o][0];null!=r&&(n[r]=!0)}for(var i=0;i<e.length;i++){var l=[].concat(e[i]);a&&n[l[0]]||(t&&(l[2]?l[2]="".concat(t," and ").concat(l[2]):l[2]=t),s.push(l))}},s}},function(e,t){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":a(window))&&(n=window)}e.exports=n},function(e,t){var a,n,e=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(a===setTimeout)return setTimeout(t,0);if((a===o||!a)&&setTimeout)return(a=setTimeout)(t,0);try{return a(t,0)}catch(e){try{return a.call(null,t,0)}catch(e){return a.call(this,t,0)}}}try{a="function"==typeof setTimeout?setTimeout:o}catch(e){a=o}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(e){n=r}var l,s=[],d=!1,p=-1;function c(){d&&l&&(d=!1,l.length?s=l.concat(s):p=-1,s.length)&&u()}function u(){if(!d){var e=i(c);d=!0;for(var t=s.length;t;){for(l=s,s=[];++p<t;)l&&l[p].run();p=-1,t=s.length}l=null,d=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===r||!n)&&clearTimeout)return(n=clearTimeout)(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function h(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];s.push(new y(e,t)),1!==s.length||d||i(u)},y.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=h,e.addListener=h,e.once=h,e.off=h,e.removeListener=h,e.removeAllListeners=h,e.emit=h,e.prependListener=h,e.prependOnceListener=h,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t,a){"use strict";e.exports=function(a,n){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return a.apply(n,e)}}},function(e,t,a){"use strict";var o=a(0);function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,a){var n;return t&&(a=a?a(t):o.isURLSearchParams(t)?t.toString():(n=[],o.forEach(t,function(e,t){null!=e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),n.push(r(t)+"="+r(e))}))}),n.join("&")))&&(-1!==(t=e.indexOf("#"))&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a),e}},function(e,t,a){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(l,e,s){"use strict";!function(e){var a=s(0),n=s(46),t={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!a.isUndefined(e)&&a.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var r,i={adapter:r="undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e)?s(10):r,transformRequest:[function(e,t){return n(t,"Accept"),n(t,"Content-Type"),a.isFormData(e)||a.isArrayBuffer(e)||a.isBuffer(e)||a.isStream(e)||a.isFile(e)||a.isBlob(e)?e:a.isArrayBufferView(e)?e.buffer:a.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):a.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};a.forEach(["delete","get","head"],function(e){i.headers[e]={}}),a.forEach(["post","put","patch"],function(e){i.headers[e]=a.merge(t)}),l.exports=i}.call(this,s(5))},function(e,t,s){"use strict";var d=s(0),p=s(47),c=s(7),u=s(49),y=s(52),h=s(53),m=s(11);e.exports=function(l){return new Promise(function(t,a){var e,n=l.data,o=l.headers,r=(d.isFormData(n)&&delete o["Content-Type"],new XMLHttpRequest),i=(l.auth&&(i=l.auth.username||"",e=l.auth.password||"",o.Authorization="Basic "+btoa(i+":"+e)),u(l.baseURL,l.url));if(r.open(l.method.toUpperCase(),c(i,l.params,l.paramsSerializer),!0),r.timeout=l.timeout,r.onreadystatechange=function(){var e;r&&4===r.readyState&&(0!==r.status||r.responseURL&&0===r.responseURL.indexOf("file:"))&&(e="getAllResponseHeaders"in r?y(r.getAllResponseHeaders()):null,e={data:l.responseType&&"text"!==l.responseType?r.response:r.responseText,status:r.status,statusText:r.statusText,headers:e,config:l,request:r},p(t,a,e),r=null)},r.onabort=function(){r&&(a(m("Request aborted",l,"ECONNABORTED",r)),r=null)},r.onerror=function(){a(m("Network Error",l,null,r)),r=null},r.ontimeout=function(){var e="timeout of "+l.timeout+"ms exceeded";l.timeoutErrorMessage&&(e=l.timeoutErrorMessage),a(m(e,l,"ECONNABORTED",r)),r=null},d.isStandardBrowserEnv()&&(e=s(54),i=(l.withCredentials||h(i))&&l.xsrfCookieName?e.read(l.xsrfCookieName):void 0)&&(o[l.xsrfHeaderName]=i),"setRequestHeader"in r&&d.forEach(o,function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete o[t]:r.setRequestHeader(t,e)}),d.isUndefined(l.withCredentials)||(r.withCredentials=!!l.withCredentials),l.responseType)try{r.responseType=l.responseType}catch(t){if("json"!==l.responseType)throw t}"function"==typeof l.onDownloadProgress&&r.addEventListener("progress",l.onDownloadProgress),"function"==typeof l.onUploadProgress&&r.upload&&r.upload.addEventListener("progress",l.onUploadProgress),l.cancelToken&&l.cancelToken.promise.then(function(e){r&&(r.abort(),a(e),r=null)}),void 0===n&&(n=null),r.send(n)})}},function(e,t,a){"use strict";var r=a(48);e.exports=function(e,t,a,n,o){e=new Error(e);return r(e,t,a,n,o)}},function(e,t,a){"use strict";var l=a(0);e.exports=function(t,a){a=a||{};var n={},e=["url","method","params","data"],o=["headers","auth","proxy"],r=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],i=(l.forEach(e,function(e){void 0!==a[e]&&(n[e]=a[e])}),l.forEach(o,function(e){l.isObject(a[e])?n[e]=l.deepMerge(t[e],a[e]):void 0!==a[e]?n[e]=a[e]:l.isObject(t[e])?n[e]=l.deepMerge(t[e]):void 0!==t[e]&&(n[e]=t[e])}),l.forEach(r,function(e){void 0!==a[e]?n[e]=a[e]:void 0!==t[e]&&(n[e]=t[e])}),e.concat(o).concat(r)),e=Object.keys(a).filter(function(e){return-1===i.indexOf(e)});return l.forEach(e,function(e){void 0!==a[e]?n[e]=a[e]:void 0!==t[e]&&(n[e]=t[e])}),n}},function(e,t,a){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,a){"use strict";e.exports=a(57)},function(e,y,h){"use strict";!function(t){var e=h(16);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=setTimeout;function d(e){return Boolean(e&&void 0!==e.length)}function n(){}function r(e){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function o(a,n){for(;3===a._state;)a=a._value;0!==a._state?(a._handled=!0,r._immediateFn(function(){var e,t=1===a._state?n.onFulfilled:n.onRejected;if(null!==t){try{e=t(a._value)}catch(e){return void l(n.promise,e)}i(n.promise,e)}else(1===a._state?i:l)(n.promise,a._value)})):a._deferreds.push(n)}function i(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===s(t)||"function"==typeof t)){var a=t.then;if(t instanceof r)return e._state=3,e._value=t,p(e);if("function"==typeof a)return u((n=a,o=t,function(){n.apply(o,arguments)}),e)}e._state=1,e._value=t,p(e)}catch(t){l(e,t)}var n,o}function l(e,t){e._state=2,e._value=t,p(e)}function p(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,a=e._deferreds.length;t<a;t++)o(e,e._deferreds[t]);e._deferreds=null}function c(e,t,a){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=a}function u(e,t){var a=!1;try{e(function(e){a||(a=!0,i(t,e))},function(e){a||(a=!0,l(t,e))})}catch(e){a||(a=!0,l(t,e))}}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var a=new this.constructor(n);return o(this,new c(e,t,a)),a},r.prototype.finally=e.a,r.all=function(t){return new r(function(o,r){if(!d(t))return r(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(t);if(0===i.length)return o([]);var l=i.length;for(var e=0;e<i.length;e++)!function t(a,e){try{if(e&&("object"===s(e)||"function"==typeof e)){var n=e.then;if("function"==typeof n)return n.call(e,function(e){t(a,e)},r)}i[a]=e,0==--l&&o(i)}catch(a){r(a)}}(e,i[e])})},r.resolve=function(t){return t&&"object"===s(t)&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(a){return new r(function(e,t){t(a)})},r.race=function(o){return new r(function(e,t){if(!d(o))return t(new TypeError("Promise.race accepts an array"));for(var a=0,n=o.length;a<n;a++)r.resolve(o[a]).then(e,t)})},r._immediateFn="function"==typeof t?function(e){t(e)}:function(e){a(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},y.a=r}.call(this,h(39).setImmediate)},function(e,t,a){"use strict";t.a=function(t){var a=this.constructor;return this.then(function(e){return a.resolve(t()).then(function(){return e})},function(e){return a.resolve(t()).then(function(){return a.reject(e)})})}},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 16 32"><path d="M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 17 32"><path d="M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528zM25.152 16q0 2.72-1.536 5.056t-4 3.36q-0.256 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.704 0.672-1.056 1.024-0.512 1.376-0.8 1.312-0.96 2.048-2.4t0.736-3.104-0.736-3.104-2.048-2.4q-0.352-0.288-1.376-0.8-0.672-0.352-0.672-1.056 0-0.448 0.32-0.8t0.8-0.352q0.224 0 0.48 0.096 2.496 1.056 4 3.36t1.536 5.056z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M6.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v4h4c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333zM30.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h4v-4c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM30.667 12c-0.8 0-1.333-0.533-1.333-1.333v-4h-4c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM1.333 12c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333h-4v4c0 0.8-0.533 1.333-1.333 1.333z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M24.965 24.38h-18.132c-1.366 0-2.478-1.113-2.478-2.478v-11.806c0-1.364 1.111-2.478 2.478-2.478h18.132c1.366 0 2.478 1.113 2.478 2.478v11.806c0 1.364-1.11 2.478-2.478 2.478zM6.833 10.097v11.806h18.134l-0.002-11.806h-18.132zM2.478 28.928h5.952c0.684 0 1.238-0.554 1.238-1.239 0-0.684-0.554-1.238-1.238-1.238h-5.952v-5.802c0-0.684-0.554-1.239-1.238-1.239s-1.239 0.556-1.239 1.239v5.802c0 1.365 1.111 2.478 2.478 2.478zM30.761 19.412c-0.684 0-1.238 0.554-1.238 1.238v5.801h-5.951c-0.686 0-1.239 0.554-1.239 1.238 0 0.686 0.554 1.239 1.239 1.239h5.951c1.366 0 2.478-1.111 2.478-2.478v-5.801c0-0.683-0.554-1.238-1.239-1.238zM0 5.55v5.802c0 0.683 0.554 1.238 1.238 1.238s1.238-0.555 1.238-1.238v-5.802h5.952c0.684 0 1.238-0.554 1.238-1.238s-0.554-1.238-1.238-1.238h-5.951c-1.366-0.001-2.478 1.111-2.478 2.476zM32 11.35v-5.801c0-1.365-1.11-2.478-2.478-2.478h-5.951c-0.686 0-1.239 0.554-1.239 1.238s0.554 1.238 1.239 1.238h5.951v5.801c0 0.683 0.554 1.237 1.238 1.237 0.686 0.002 1.239-0.553 1.239-1.236z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 28"><path d="M28.633 17.104c0.035 0.21 0.026 0.463-0.026 0.76s-0.14 0.598-0.262 0.904c-0.122 0.306-0.271 0.581-0.445 0.825s-0.367 0.419-0.576 0.524c-0.209 0.105-0.393 0.157-0.55 0.157s-0.332-0.035-0.524-0.105c-0.175-0.052-0.393-0.1-0.655-0.144s-0.528-0.052-0.799-0.026c-0.271 0.026-0.541 0.083-0.812 0.17s-0.502 0.236-0.694 0.445c-0.419 0.437-0.664 0.934-0.734 1.493s0.009 1.092 0.236 1.598c0.175 0.349 0.148 0.699-0.079 1.048-0.105 0.14-0.271 0.284-0.498 0.432s-0.476 0.284-0.747 0.406-0.555 0.218-0.851 0.288c-0.297 0.070-0.559 0.105-0.786 0.105-0.157 0-0.306-0.061-0.445-0.183s-0.236-0.253-0.288-0.393h-0.026c-0.192-0.541-0.52-1.009-0.982-1.402s-1-0.589-1.611-0.589c-0.594 0-1.131 0.197-1.611 0.589s-0.816 0.851-1.009 1.375c-0.087 0.21-0.218 0.362-0.393 0.458s-0.367 0.144-0.576 0.144c-0.244 0-0.52-0.044-0.825-0.131s-0.611-0.197-0.917-0.327c-0.306-0.131-0.581-0.284-0.825-0.458s-0.428-0.349-0.55-0.524c-0.087-0.122-0.135-0.266-0.144-0.432s0.057-0.397 0.197-0.694c0.192-0.402 0.266-0.86 0.223-1.375s-0.266-0.991-0.668-1.428c-0.244-0.262-0.541-0.432-0.891-0.511s-0.681-0.109-0.995-0.092c-0.367 0.017-0.742 0.087-1.127 0.21-0.244 0.070-0.489 0.052-0.734-0.052-0.192-0.070-0.371-0.231-0.537-0.485s-0.314-0.533-0.445-0.838c-0.131-0.306-0.231-0.62-0.301-0.943s-0.087-0.59-0.052-0.799c0.052-0.384 0.227-0.629 0.524-0.734 0.524-0.21 0.995-0.555 1.415-1.035s0.629-1.017 0.629-1.611c0-0.611-0.21-1.144-0.629-1.598s-0.891-0.786-1.415-0.996c-0.157-0.052-0.288-0.179-0.393-0.38s-0.157-0.406-0.157-0.616c0-0.227 0.035-0.48 0.105-0.76s0.162-0.55 0.275-0.812 0.244-0.502 0.393-0.72c0.148-0.218 0.31-0.38 0.485-0.485 0.14-0.087 0.275-0.122 0.406-0.105s0.275 0.052 0.432 0.105c0.524 0.21 1.070 0.275 1.637 0.197s1.070-0.327 1.506-0.747c0.21-0.209 0.362-0.467 0.458-0.773s0.157-0.607 0.183-0.904c0.026-0.297 0.026-0.568 0-0.812s-0.048-0.419-0.065-0.524c-0.035-0.105-0.066-0.227-0.092-0.367s-0.013-0.262 0.039-0.367c0.105-0.244 0.293-0.458 0.563-0.642s0.563-0.336 0.878-0.458c0.314-0.122 0.62-0.214 0.917-0.275s0.533-0.092 0.707-0.092c0.227 0 0.406 0.074 0.537 0.223s0.223 0.301 0.275 0.458c0.192 0.471 0.507 0.886 0.943 1.244s0.952 0.537 1.546 0.537c0.611 0 1.153-0.17 1.624-0.511s0.803-0.773 0.996-1.297c0.070-0.14 0.179-0.284 0.327-0.432s0.301-0.223 0.458-0.223c0.244 0 0.511 0.035 0.799 0.105s0.572 0.166 0.851 0.288c0.279 0.122 0.537 0.279 0.773 0.472s0.423 0.402 0.563 0.629c0.087 0.14 0.113 0.293 0.079 0.458s-0.070 0.284-0.105 0.354c-0.227 0.506-0.297 1.039-0.21 1.598s0.341 1.048 0.76 1.467c0.419 0.419 0.934 0.651 1.546 0.694s1.179-0.057 1.703-0.301c0.14-0.087 0.31-0.122 0.511-0.105s0.371 0.096 0.511 0.236c0.262 0.244 0.493 0.616 0.694 1.113s0.336 1 0.406 1.506c0.035 0.297-0.013 0.528-0.144 0.694s-0.266 0.275-0.406 0.327c-0.542 0.192-1.004 0.528-1.388 1.009s-0.576 1.026-0.576 1.637c0 0.594 0.162 1.113 0.485 1.559s0.747 0.764 1.27 0.956c0.122 0.070 0.227 0.14 0.314 0.21 0.192 0.157 0.323 0.358 0.393 0.602v0zM16.451 19.462c0.786 0 1.528-0.149 2.227-0.445s1.305-0.707 1.821-1.231c0.515-0.524 0.921-1.131 1.218-1.821s0.445-1.428 0.445-2.214c0-0.786-0.148-1.524-0.445-2.214s-0.703-1.292-1.218-1.808c-0.515-0.515-1.122-0.921-1.821-1.218s-1.441-0.445-2.227-0.445c-0.786 0-1.524 0.148-2.214 0.445s-1.292 0.703-1.808 1.218c-0.515 0.515-0.921 1.118-1.218 1.808s-0.445 1.428-0.445 2.214c0 0.786 0.149 1.524 0.445 2.214s0.703 1.297 1.218 1.821c0.515 0.524 1.118 0.934 1.808 1.231s1.428 0.445 2.214 0.445v0z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M27.128 0.38h-22.553c-2.336 0-4.229 1.825-4.229 4.076v16.273c0 2.251 1.893 4.076 4.229 4.076h4.229v-2.685h8.403l-8.784 8.072 1.566 1.44 7.429-6.827h9.71c2.335 0 4.229-1.825 4.229-4.076v-16.273c0-2.252-1.894-4.076-4.229-4.076zM28.538 19.403c0 1.5-1.262 2.717-2.819 2.717h-8.36l-0.076-0.070-0.076 0.070h-11.223c-1.557 0-2.819-1.217-2.819-2.717v-13.589c0-1.501 1.262-2.718 2.819-2.718h19.734c1.557 0 2.819-0.141 2.819 1.359v14.947zM9.206 10.557c-1.222 0-2.215 0.911-2.215 2.036s0.992 2.035 2.215 2.035c1.224 0 2.216-0.911 2.216-2.035s-0.992-2.036-2.216-2.036zM22.496 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.224 0 2.215-0.911 2.215-2.035s-0.991-2.036-2.215-2.036zM15.852 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.222 0 2.215-0.911 2.215-2.035s-0.992-2.036-2.215-2.036z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M27.090 0.131h-22.731c-2.354 0-4.262 1.839-4.262 4.109v16.401c0 2.269 1.908 4.109 4.262 4.109h4.262v-2.706h8.469l-8.853 8.135 1.579 1.451 7.487-6.88h9.787c2.353 0 4.262-1.84 4.262-4.109v-16.401c0-2.27-1.909-4.109-4.262-4.109v0zM28.511 19.304c0 1.512-1.272 2.738-2.841 2.738h-8.425l-0.076-0.070-0.076 0.070h-11.311c-1.569 0-2.841-1.226-2.841-2.738v-13.696c0-1.513 1.272-2.739 2.841-2.739h19.889c1.569 0 2.841-0.142 2.841 1.37v15.064z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M13.725 30l3.9-5.325-3.9-1.125v6.45zM0 17.5l11.050 3.35 13.6-11.55-10.55 12.425 11.8 3.65 6.1-23.375-32 15.5z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M19.357 2.88c1.749 0 3.366 0.316 4.851 0.946 1.485 0.632 2.768 1.474 3.845 2.533s1.922 2.279 2.532 3.661c0.611 1.383 0.915 2.829 0.915 4.334 0 1.425-0.304 2.847-0.915 4.271-0.611 1.425-1.587 2.767-2.928 4.028-0.855 0.813-1.811 1.607-2.869 2.38s-2.136 1.465-3.233 2.075c-1.099 0.61-2.198 1.098-3.296 1.465-1.098 0.366-2.115 0.549-3.051 0.549-1.343 0-2.441-0.438-3.296-1.311-0.854-0.876-1.281-2.41-1.281-4.608 0-0.366 0.020-0.773 0.060-1.221s0.062-0.895 0.062-1.343c0-0.773-0.183-1.353-0.55-1.738-0.366-0.387-0.793-0.58-1.281-0.58-0.652 0-1.21 0.295-1.678 0.886s-0.926 1.23-1.373 1.921c-0.447 0.693-0.905 1.334-1.372 1.923s-1.028 0.886-1.679 0.886c-0.529 0-1.048-0.427-1.556-1.282s-0.763-2.259-0.763-4.212c0-2.197 0.529-4.241 1.587-6.133s2.462-3.529 4.21-4.912c1.75-1.383 3.762-2.471 6.041-3.264 2.277-0.796 4.617-1.212 7.018-1.253zM7.334 15.817c0.569 0 1.047-0.204 1.434-0.611s0.579-0.875 0.579-1.404c0-0.569-0.193-1.047-0.579-1.434s-0.864-0.579-1.434-0.579c-0.529 0-0.987 0.193-1.373 0.579s-0.58 0.864-0.58 1.434c0 0.53 0.194 0.998 0.58 1.404 0.388 0.407 0.845 0.611 1.373 0.611zM12.216 11.79c0.691 0 1.292-0.254 1.8-0.763s0.762-1.107 0.762-1.8c0-0.732-0.255-1.343-0.762-1.831-0.509-0.489-1.109-0.732-1.8-0.732-0.732 0-1.342 0.244-1.831 0.732-0.488 0.488-0.732 1.098-0.732 1.831 0 0.693 0.244 1.292 0.732 1.8s1.099 0.763 1.831 0.763zM16.366 25.947c0.692 0 1.282-0.214 1.77-0.64s0.732-0.987 0.732-1.678-0.244-1.261-0.732-1.709c-0.489-0.448-1.078-0.671-1.77-0.671-0.65 0-1.21 0.223-1.678 0.671s-0.702 1.018-0.702 1.709c0 0.692 0.234 1.25 0.702 1.678s1.027 0.64 1.678 0.64zM19.113 9.592c0.651 0 1.129-0.203 1.433-0.611 0.305-0.406 0.459-0.874 0.459-1.404 0-0.488-0.154-0.947-0.459-1.373-0.304-0.427-0.782-0.641-1.433-0.641-0.529 0-1.008 0.193-1.434 0.58s-0.64 0.865-0.64 1.434c0 0.571 0.213 1.049 0.64 1.434 0.427 0.389 0.905 0.581 1.434 0.581zM24.848 12.826c0.57 0 1.067-0.213 1.495-0.64 0.427-0.427 0.64-0.947 0.64-1.556 0-0.57-0.214-1.068-0.64-1.495-0.428-0.427-0.927-0.64-1.495-0.64-0.611 0-1.129 0.213-1.555 0.64-0.428 0.427-0.642 0.926-0.642 1.495 0 0.611 0.213 1.129 0.642 1.556s0.947 0.64 1.555 0.64z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M16 23c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6zM16 13c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.206 0 4-1.794 4-4s-1.794-4-4-4zM27 28h-22c-1.654 0-3-1.346-3-3v-16c0-1.654 1.346-3 3-3h3c0.552 0 1 0.448 1 1s-0.448 1-1 1h-3c-0.551 0-1 0.449-1 1v16c0 0.552 0.449 1 1 1h22c0.552 0 1-0.448 1-1v-16c0-0.551-0.448-1-1-1h-11c-0.552 0-1-0.448-1-1s0.448-1 1-1h11c1.654 0 3 1.346 3 3v16c0 1.654-1.346 3-3 3zM24 10.5c0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5zM15 4c0 0.552-0.448 1-1 1h-4c-0.552 0-1-0.448-1-1v0c0-0.552 0.448-1 1-1h4c0.552 0 1 0.448 1 1v0z"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 288 288" xmlns="http://www.w3.org/2000/svg"><path d="M288 90v96c0 20-16 36-36 36h-10c-16 0-16-24 0-24h10c7 0 12-5 12-12V90c0-7-5-12-12-12H36c-7 0-12 5-12 12v96c0 7 5 12 12 12h10c16 0 16 24 0 24H36c-20 0-36-16-36-36V90c0-20 16-36 36-36h216c20 0 36 16 36 36zm-120 62l48 68c14 20 1 38-20 38H92c-21 0-34-18-20-38l48-68c13-18 35-18 48 0z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M26.667 5.333h-21.333c-0 0-0.001 0-0.001 0-1.472 0-2.666 1.194-2.666 2.666 0 0 0 0.001 0 0.001v-0 16c0 0 0 0.001 0 0.001 0 1.472 1.194 2.666 2.666 2.666 0 0 0.001 0 0.001 0h21.333c0 0 0.001 0 0.001 0 1.472 0 2.666-1.194 2.666-2.666 0-0 0-0.001 0-0.001v0-16c0-0 0-0.001 0-0.001 0-1.472-1.194-2.666-2.666-2.666-0 0-0.001 0-0.001 0h0zM5.333 16h5.333v2.667h-5.333v-2.667zM18.667 24h-13.333v-2.667h13.333v2.667zM26.667 24h-5.333v-2.667h5.333v2.667zM26.667 18.667h-13.333v-2.667h13.333v2.667z"></path></svg>'},function(e,t){e.exports='<svg version="1.1" viewBox="0 0 22 22"><svg x="7" y="1"><circle class="diplayer-loading-dot diplayer-loading-dot-0" cx="4" cy="4" r="2"></circle></svg><svg x="11" y="3"><circle class="diplayer-loading-dot diplayer-loading-dot-1" cx="4" cy="4" r="2"></circle></svg><svg x="13" y="7"><circle class="diplayer-loading-dot diplayer-loading-dot-2" cx="4" cy="4" r="2"></circle></svg><svg x="11" y="11"><circle class="diplayer-loading-dot diplayer-loading-dot-3" cx="4" cy="4" r="2"></circle></svg><svg x="7" y="13"><circle class="diplayer-loading-dot diplayer-loading-dot-4" cx="4" cy="4" r="2"></circle></svg><svg x="3" y="11"><circle class="diplayer-loading-dot diplayer-loading-dot-5" cx="4" cy="4" r="2"></circle></svg><svg x="1" y="7"><circle class="diplayer-loading-dot diplayer-loading-dot-6" cx="4" cy="4" r="2"></circle></svg><svg x="3" y="3"><circle class="diplayer-loading-dot diplayer-loading-dot-7" cx="4" cy="4" r="2"></circle></svg></svg>'},function(e,t,d){var p=d(14);e.exports=function(e){"use strict";var a="",t=(e=e||{}).video,n=e.options,o=p.$escape,r=e.tran,i=e.icons,l=e.index,s=p.$each;return e.$value,e.$index,a+='<div class="dplayer-mask"></div>\n<div class="dplayer-video-wrap">\n    ',e=d(1)(t),a=a+e+"\n    ",n.logo&&(a=(a+='\n    <div class="dplayer-logo">\n        <img src="')+o(n.logo)+'">\n    </div>\n    '),a+='\n    <div class="dplayer-danmaku"',n.danmaku&&n.danmaku.bottm&&(a=(a+=' style="margin-bottom:')+o(n.danmaku.bottm)+'"'),a+='>\n        <div class="dplayer-danmaku-item dplayer-danmaku-item--demo"></div>\n    </div>\n    <div class="dplayer-subtitle"></div>\n    <div class="dplayer-bezel">\n        <span class="dplayer-bezel-icon"></span>\n        ',n.danmaku&&(a=(a+='\n        <span class="dplayer-danloading">')+o(r("Danmaku is loading"))+"</span>\n        "),a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a+='\n        <span class="diplayer-loading-icon">')+i.loading+'</span>\n    </div>\n</div>\n<div class="dplayer-controller-mask"></div>\n<div class="dplayer-controller">\n    <div class="dplayer-icons dplayer-comment-box">\n        <button class="dplayer-icon dplayer-comment-setting-icon" data-balloon="')+o(r("Setting"))+'" data-balloon-pos="up">\n            <span class="dplayer-icon-content">')+i.pallette+'</span>\n        </button>\n        <div class="dplayer-comment-setting-box">\n            <div class="dplayer-comment-setting-color">\n                <div class="dplayer-comment-setting-title">')+o(r("Set danmaku color"))+'</div>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-')+o(l)+'" value="#fff" checked>\n                    <span style="background: #fff;"></span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-')+o(l)+'" value="#e54256">\n                    <span style="background: #e54256"></span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-')+o(l)+'" value="#ffe133">\n                    <span style="background: #ffe133"></span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-')+o(l)+'" value="#64DD17">\n                    <span style="background: #64DD17"></span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-')+o(l)+'" value="#39ccff">\n                    <span style="background: #39ccff"></span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-')+o(l)+'" value="#D500F9">\n                    <span style="background: #D500F9"></span>\n                </label>\n            </div>\n            <div class="dplayer-comment-setting-type">\n                <div class="dplayer-comment-setting-title">')+o(r("Set danmaku type"))+'</div>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-type-')+o(l)+'" value="1">\n                    <span>')+o(r("Top"))+'</span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-type-')+o(l)+'" value="0" checked>\n                    <span>')+o(r("Rolling"))+'</span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-type-')+o(l)+'" value="2">\n                    <span>')+o(r("Bottom"))+'</span>\n                </label>\n            </div>\n        </div>\n        <input class="dplayer-comment-input" type="text" placeholder="')+o(r("Input danmaku, hit Enter"))+'" maxlength="30">\n        <button class="dplayer-icon dplayer-send-icon" data-balloon="')+o(r("Send"))+'" data-balloon-pos="up">\n            <span class="dplayer-icon-content">')+i.send+'</span>\n        </button>\n    </div>\n    <div class="dplayer-icons dplayer-icons-left">\n        <button class="dplayer-icon dplayer-play-icon">\n            <span class="dplayer-icon-content">')+i.play+'</span>\n        </button>\n        <div class="dplayer-volume">\n            <button class="dplayer-icon dplayer-volume-icon">\n                <span class="dplayer-icon-content">')+i.volumeDown+'</span>\n            </button>\n            <div class="dplayer-volume-bar-wrap" data-balloon-pos="up">\n                <div class="dplayer-volume-bar">\n                    <div class="dplayer-volume-bar-inner" style="background: ')+o(n.theme)+';">\n                        <span class="dplayer-thumb" style="background: ')+o(n.theme)+'"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <span class="dplayer-time">\n            <span class="dplayer-ptime">0:00</span> /\n            <span class="dplayer-dtime">0:00</span>\n        </span>\n        ',n.live&&(a=(a=(a+='\n        <span class="dplayer-live-badge"><span class="dplayer-live-dot" style="background: ')+o(n.theme)+';"></span>')+o(r("Live"))+"</span>\n        "),a+='\n    </div>\n    <div class="dplayer-icons dplayer-icons-right">\n        ',n.video.quality&&(a=(a+='\n        <div class="dplayer-quality">\n            <button class="dplayer-icon dplayer-quality-icon">')+o(n.video.quality[n.video.defaultQuality].name)+'</button>\n            <div class="dplayer-quality-mask">\n                <div class="dplayer-quality-list">\n                ',s(n.video.quality,function(e,t){a=(a=(a+='\n                    <div class="dplayer-quality-item" data-index="')+o(t)+'">')+o(e.name)+"</div>\n                "}),a+="\n                </div>\n            </div>\n        </div>\n        "),a+="\n        ",n.screenshot&&(a=(a=(a+='\n        <div class="dplayer-icon dplayer-camera-icon" data-balloon="')+o(r("Screenshot"))+'" data-balloon-pos="up">\n            <span class="dplayer-icon-content">')+i.camera+"</span>\n        </div>\n        "),a+="\n        ",n.airplay&&(a=(a=(a+='\n        <div class="dplayer-icon dplayer-airplay-icon" data-balloon="')+o(r("AirPlay"))+'" data-balloon-pos="up">\n            <span class="dplayer-icon-content">')+i.airplay+"</span>\n        </div>\n        "),a=(a=(a+='\n        <div class="dplayer-comment">\n            <button class="dplayer-icon dplayer-comment-icon" data-balloon="')+o(r("Send danmaku"))+'" data-balloon-pos="up">\n                <span class="dplayer-icon-content">')+i.comment+"</span>\n            </button>\n        </div>\n        ",n.subtitle&&(a=(a=(a+='\n        <div class="dplayer-subtitle-btn">\n            <button class="dplayer-icon dplayer-subtitle-icon" data-balloon="')+o(r("Hide subtitle"))+'" data-balloon-pos="up">\n                <span class="dplayer-icon-content">')+i.subtitle+"</span>\n            </button>\n        </div>\n        "),a=(a=(a=(a=(a=(a=(a=(a=(a+='\n        <div class="dplayer-setting">\n            <button class="dplayer-icon dplayer-setting-icon" data-balloon="')+o(r("Setting"))+'" data-balloon-pos="up">\n                <span class="dplayer-icon-content">')+i.setting+'</span>\n            </button>\n            <div class="dplayer-setting-box">\n                <div class="dplayer-setting-origin-panel">\n                    <div class="dplayer-setting-item dplayer-setting-speed">\n                        <span class="dplayer-label">')+o(r("Speed"))+'</span>\n                        <div class="dplayer-toggle">')+i.right+'</div>\n                    </div>\n                    <div class="dplayer-setting-item dplayer-setting-loop">\n                        <span class="dplayer-label">')+o(r("Loop"))+'</span>\n                        <div class="dplayer-toggle">\n                            <input class="dplayer-toggle-setting-input" type="checkbox" name="dplayer-toggle">\n                            <label for="dplayer-toggle"></label>\n                        </div>\n                    </div>\n                    <div class="dplayer-setting-item dplayer-setting-showdan">\n                        <span class="dplayer-label">')+o(r("Show danmaku"))+'</span>\n                        <div class="dplayer-toggle">\n                            <input class="dplayer-showdan-setting-input" type="checkbox" name="dplayer-toggle-dan">\n                            <label for="dplayer-toggle-dan"></label>\n                        </div>\n                    </div>\n                    <div class="dplayer-setting-item dplayer-setting-danunlimit">\n                        <span class="dplayer-label">')+o(r("Unlimited danmaku"))+'</span>\n                        <div class="dplayer-toggle">\n                            <input class="dplayer-danunlimit-setting-input" type="checkbox" name="dplayer-toggle-danunlimit">\n                            <label for="dplayer-toggle-danunlimit"></label>\n                        </div>\n                    </div>\n                    <div class="dplayer-setting-item dplayer-setting-danmaku">\n                        <span class="dplayer-label">')+o(r("Opacity for danmaku"))+'</span>\n                        <div class="dplayer-danmaku-bar-wrap">\n                            <div class="dplayer-danmaku-bar">\n                                <div class="dplayer-danmaku-bar-inner">\n                                    <span class="dplayer-thumb"></span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="dplayer-setting-speed-panel">\n                    ',s(n.playbackSpeed,function(e,t){a=(a=(a+='\n                        <div class="dplayer-setting-speed-item" data-speed="')+o(e)+'">\n                            <span class="dplayer-label">')+o(1===e?r("Normal"):e)+"</span>\n                        </div>\n                    "}),a=(a=(a=(a=(a=(a=(a+='\n                </div>\n            </div>\n        </div>\n        <div class="dplayer-full">\n            <button class="dplayer-icon dplayer-full-in-icon" data-balloon="')+o(r("Web full screen"))+'" data-balloon-pos="up">\n                <span class="dplayer-icon-content">')+i.fullWeb+'</span>\n            </button>\n            <button class="dplayer-icon dplayer-full-icon" data-balloon="')+o(r("Full screen"))+'" data-balloon-pos="up">\n                <span class="dplayer-icon-content">')+i.full+'</span>\n            </button>\n        </div>\n    </div>\n    <div class="dplayer-bar-wrap">\n        <div class="dplayer-bar-time hidden">00:00</div>\n        <div class="dplayer-bar-preview"></div>\n        <div class="dplayer-bar">\n            <div class="dplayer-loaded" style="width: 0;"></div>\n            <div class="dplayer-played" style="width: 0; background: ')+o(n.theme)+'">\n                <span class="dplayer-thumb" style="background: ')+o(n.theme)+'"></span>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="dplayer-info-panel dplayer-info-panel-hide">\n    <div class="dplayer-info-panel-close">[x]</div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-version">\n        <span class="dplayer-info-panel-item-title">Player version</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-fps">\n        <span class="dplayer-info-panel-item-title">Player FPS</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-type">\n        <span class="dplayer-info-panel-item-title">Video type</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-url">\n        <span class="dplayer-info-panel-item-title">Video url</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-resolution">\n        <span class="dplayer-info-panel-item-title">Video resolution</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-duration">\n        <span class="dplayer-info-panel-item-title">Video duration</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    ',n.danmaku&&(a+='\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-danmaku-id">\n        <span class="dplayer-info-panel-item-title">Danmaku id</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-danmaku-api">\n        <span class="dplayer-info-panel-item-title">Danmaku api</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-danmaku-amount">\n        <span class="dplayer-info-panel-item-title">Danmaku amount</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    '),a+='\n</div>\n<div class="dplayer-menu">\n    ',s(n.contextmenu,function(e,t){a+='\n        <div class="dplayer-menu-item">\n            <a',e.link&&(a+=' target="_blank"'),a=(a=(a+=' href="')+o(e.link||"javascript:void(0);")+'">')+o(r(e.text))+"</a>\n        </div>\n    "}),a=(a+='\n</div>\n<div class="dplayer-notice"></div>\n<button class="dplayer-mobile-play">\n    ')+i.play+"\n</button>"}},function(e,t,a){var n=a(36),a=a(37);n(a="string"==typeof(a=a.__esModule?a.default:a)?[[e.i,a,""]]:a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},function(e,t,o){"use strict";n={};var a,n,r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]},d=[];function p(e){for(var t=-1,a=0;a<d.length;a++)if(d[a].identifier===e){t=a;break}return t}function l(e,t){for(var a={},n=[],o=0;o<e.length;o++){var r=e[o],i=t.base?r[0]+t.base:r[0],l=a[i]||0,s="".concat(i," ").concat(l),i=(a[i]=l+1,p(s)),l={css:r[1],media:r[2],sourceMap:r[3]};-1!==i?(d[i].references++,d[i].updater(l)):d.push({identifier:s,updater:function(t,e){var a,n,o;{var r;o=e.singleton?(r=h++,a=y=y||c(e),n=u.bind(null,a,r,!1),u.bind(null,a,r,!0)):(a=c(e),n=function(e,t,a){var n=a.css,o=a.media,a=a.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),a&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,a,e),function(){var e;null!==(e=a).parentNode&&e.parentNode.removeChild(e)})}return n(t),function(e){e?e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap||n(t=e):o()}}(l,t),references:1}),n.push(s)}return n}function c(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce&&(n=o.nc)&&(a.nonce=n),Object.keys(a).forEach(function(e){t.setAttribute(e,a[e])}),"function"==typeof e.insert)e.insert(t);else{var n=r(e.insert||"head");if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(t)}return t}i=[];var i,s=function(e,t){return i[e]=t,i.filter(Boolean).join("\n")};function u(e,t,a,n){var a=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;e.styleSheet?e.styleSheet.cssText=s(t,a):(n=document.createTextNode(a),(a=e.childNodes)[t]&&e.removeChild(a[t]),a.length?e.insertBefore(n,a[t]):e.appendChild(n))}var y=null,h=0;e.exports=function(e,r){(r=r||{}).singleton||"boolean"==typeof r.singleton||(r.singleton=a=void 0===a?Boolean(window&&document&&document.all&&!window.atob):a);var i=l(e=e||[],r);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var t=0;t<i.length;t++){var a=p(i[t]);d[a].references--}for(var e=l(e,r),n=0;n<i.length;n++){var o=p(i[n]);0===d[o].references&&(d[o].updater(),d.splice(o,1))}i=e}}}},function(e,t,a){var n=a(3),a=a(38);(t=n(!1)).i(a),t.push([e.i,'@-webkit-keyframes my-face{2%{transform:translateY(1.5px) rotate(1.5deg)}4%{transform:translateY(-1.5px) rotate(-.5deg)}6%{transform:translateY(1.5px) rotate(-1.5deg)}8%{transform:translateY(-1.5px) rotate(-1.5deg)}10%{transform:translateY(2.5px) rotate(1.5deg)}12%{transform:translateY(-.5px) rotate(1.5deg)}14%{transform:translateY(-1.5px) rotate(1.5deg)}16%{transform:translateY(-.5px) rotate(-1.5deg)}18%{transform:translateY(.5px) rotate(-1.5deg)}20%{transform:translateY(-1.5px) rotate(2.5deg)}22%{transform:translateY(.5px) rotate(-1.5deg)}24%{transform:translateY(1.5px) rotate(1.5deg)}26%{transform:translateY(.5px) rotate(.5deg)}28%{transform:translateY(.5px) rotate(1.5deg)}30%{transform:translateY(-.5px) rotate(2.5deg)}32%{transform:translateY(1.5px) rotate(-.5deg)}34%{transform:translateY(1.5px) rotate(-.5deg)}36%{transform:translateY(-1.5px) rotate(2.5deg)}38%{transform:translateY(1.5px) rotate(-1.5deg)}40%{transform:translateY(-.5px) rotate(2.5deg)}42%{transform:translateY(2.5px) rotate(-1.5deg)}44%{transform:translateY(1.5px) rotate(.5deg)}46%{transform:translateY(-1.5px) rotate(2.5deg)}48%{transform:translateY(-.5px) rotate(.5deg)}50%{transform:translateY(.5px) rotate(.5deg)}52%{transform:translateY(2.5px) rotate(2.5deg)}54%{transform:translateY(-1.5px) rotate(1.5deg)}56%{transform:translateY(2.5px) rotate(2.5deg)}58%{transform:translateY(.5px) rotate(2.5deg)}60%{transform:translateY(2.5px) rotate(2.5deg)}62%{transform:translateY(-.5px) rotate(2.5deg)}64%{transform:translateY(-.5px) rotate(1.5deg)}66%{transform:translateY(1.5px) rotate(-.5deg)}68%{transform:translateY(-1.5px) rotate(-.5deg)}70%{transform:translateY(1.5px) rotate(.5deg)}72%{transform:translateY(2.5px) rotate(1.5deg)}74%{transform:translateY(-.5px) rotate(.5deg)}76%{transform:translateY(-.5px) rotate(2.5deg)}78%{transform:translateY(-.5px) rotate(1.5deg)}80%{transform:translateY(1.5px) rotate(1.5deg)}82%{transform:translateY(-.5px) rotate(.5deg)}84%{transform:translateY(1.5px) rotate(2.5deg)}86%{transform:translateY(-1.5px) rotate(-1.5deg)}88%{transform:translateY(-.5px) rotate(2.5deg)}90%{transform:translateY(2.5px) rotate(-.5deg)}92%{transform:translateY(.5px) rotate(-.5deg)}94%{transform:translateY(2.5px) rotate(.5deg)}96%{transform:translateY(-.5px) rotate(1.5deg)}98%{transform:translateY(-1.5px) rotate(-.5deg)}0%,to{transform:translate(0) rotate(0deg)}}@keyframes my-face{2%{transform:translateY(1.5px) rotate(1.5deg)}4%{transform:translateY(-1.5px) rotate(-.5deg)}6%{transform:translateY(1.5px) rotate(-1.5deg)}8%{transform:translateY(-1.5px) rotate(-1.5deg)}10%{transform:translateY(2.5px) rotate(1.5deg)}12%{transform:translateY(-.5px) rotate(1.5deg)}14%{transform:translateY(-1.5px) rotate(1.5deg)}16%{transform:translateY(-.5px) rotate(-1.5deg)}18%{transform:translateY(.5px) rotate(-1.5deg)}20%{transform:translateY(-1.5px) rotate(2.5deg)}22%{transform:translateY(.5px) rotate(-1.5deg)}24%{transform:translateY(1.5px) rotate(1.5deg)}26%{transform:translateY(.5px) rotate(.5deg)}28%{transform:translateY(.5px) rotate(1.5deg)}30%{transform:translateY(-.5px) rotate(2.5deg)}32%{transform:translateY(1.5px) rotate(-.5deg)}34%{transform:translateY(1.5px) rotate(-.5deg)}36%{transform:translateY(-1.5px) rotate(2.5deg)}38%{transform:translateY(1.5px) rotate(-1.5deg)}40%{transform:translateY(-.5px) rotate(2.5deg)}42%{transform:translateY(2.5px) rotate(-1.5deg)}44%{transform:translateY(1.5px) rotate(.5deg)}46%{transform:translateY(-1.5px) rotate(2.5deg)}48%{transform:translateY(-.5px) rotate(.5deg)}50%{transform:translateY(.5px) rotate(.5deg)}52%{transform:translateY(2.5px) rotate(2.5deg)}54%{transform:translateY(-1.5px) rotate(1.5deg)}56%{transform:translateY(2.5px) rotate(2.5deg)}58%{transform:translateY(.5px) rotate(2.5deg)}60%{transform:translateY(2.5px) rotate(2.5deg)}62%{transform:translateY(-.5px) rotate(2.5deg)}64%{transform:translateY(-.5px) rotate(1.5deg)}66%{transform:translateY(1.5px) rotate(-.5deg)}68%{transform:translateY(-1.5px) rotate(-.5deg)}70%{transform:translateY(1.5px) rotate(.5deg)}72%{transform:translateY(2.5px) rotate(1.5deg)}74%{transform:translateY(-.5px) rotate(.5deg)}76%{transform:translateY(-.5px) rotate(2.5deg)}78%{transform:translateY(-.5px) rotate(1.5deg)}80%{transform:translateY(1.5px) rotate(1.5deg)}82%{transform:translateY(-.5px) rotate(.5deg)}84%{transform:translateY(1.5px) rotate(2.5deg)}86%{transform:translateY(-1.5px) rotate(-1.5deg)}88%{transform:translateY(-.5px) rotate(2.5deg)}90%{transform:translateY(2.5px) rotate(-.5deg)}92%{transform:translateY(.5px) rotate(-.5deg)}94%{transform:translateY(2.5px) rotate(.5deg)}96%{transform:translateY(-.5px) rotate(1.5deg)}98%{transform:translateY(-1.5px) rotate(-.5deg)}0%,to{transform:translate(0) rotate(0deg)}}.dplayer{position:relative;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;line-height:1}.dplayer *{box-sizing:content-box}.dplayer svg{width:100%;height:100%}.dplayer svg circle,.dplayer svg path{fill:#fff}.dplayer:-webkit-full-screen{width:100%;height:100%;background:#000;position:fixed;z-index:100000;left:0;top:0;margin:0;padding:0;transform:translate(0)}.dplayer:-webkit-full-screen .dplayer-danmaku .dplayer-danmaku-bottom.dplayer-danmaku-move,.dplayer:-webkit-full-screen .dplayer-danmaku .dplayer-danmaku-top.dplayer-danmaku-move{-webkit-animation:danmaku-center 6s linear;animation:danmaku-center 6s linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.dplayer:-webkit-full-screen .dplayer-danmaku .dplayer-danmaku-right.dplayer-danmaku-move{-webkit-animation:danmaku 8s linear;animation:danmaku 8s linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.dplayer.dplayer-live .dplayer-bar-wrap,.dplayer.dplayer-live.dplayer-no-danmaku .dplayer-setting,.dplayer.dplayer-live .dplayer-setting-loop,.dplayer.dplayer-live .dplayer-setting-speed,.dplayer.dplayer-live .dplayer-time,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-comment,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box .dplayer-setting-danmaku,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box .dplayer-setting-danunlimit,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box .dplayer-setting-showdan,.dplayer.dplayer-no-danmaku .dplayer-danmaku{display:none}.dplayer.dplayer-arrow .dplayer-danmaku{font-size:18px}.dplayer.dplayer-arrow .dplayer-icon{margin:0 -3px}.dplayer.dplayer-playing .dplayer-danmaku .dplayer-danmaku-move{-webkit-animation-play-state:running;animation-play-state:running}@media (min-width:900px){.dplayer.dplayer-playing .dplayer-controller,.dplayer.dplayer-playing .dplayer-controller-mask{opacity:0}.dplayer.dplayer-playing:hover .dplayer-controller,.dplayer.dplayer-playing:hover .dplayer-controller-mask{opacity:1}}.dplayer.dplayer-loading .dplayer-bezel .diplayer-loading-icon{display:block}.dplayer.dplayer-loading .dplayer-danmaku,.dplayer.dplayer-loading .dplayer-danmaku-move,.dplayer.dplayer-paused .dplayer-danmaku,.dplayer.dplayer-paused .dplayer-danmaku-move{-webkit-animation-play-state:paused;animation-play-state:paused}.dplayer.dplayer-hide-controller{cursor:none}.dplayer.dplayer-hide-controller .dplayer-controller,.dplayer.dplayer-hide-controller .dplayer-controller-mask{opacity:0;transform:translateY(100%)}.dplayer.dplayer-show-controller .dplayer-controller,.dplayer.dplayer-show-controller .dplayer-controller-mask{opacity:1}.dplayer.dplayer-fulled{position:fixed;z-index:100000;left:0;top:0;width:100%!important;height:100%!important}.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-airplay-icon,.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-camera-icon,.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-play-icon,.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-volume{display:none}.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-full .dplayer-full-in-icon{position:static;display:inline-block}.dplayer.dplayer-mobile .dplayer-bar-time,.dplayer.dplayer-mobile.dplayer-hide-controller .dplayer-mobile-play{display:none}.dplayer.dplayer-mobile .dplayer-mobile-play{display:block}.dplayer-web-fullscreen-fix{position:fixed;top:0;left:0;margin:0;padding:0}[data-balloon]:before{display:none}[data-balloon]:after{padding:.3em .7em;background:rgba(17,17,17,.7)}[data-balloon][data-balloon-pos=up]:after{margin-bottom:0}.dplayer-bezel{position:absolute;left:0;right:0;top:0;bottom:0;font-size:22px;color:#fff;pointer-events:none}.dplayer-bezel .dplayer-bezel-icon{position:absolute;top:50%;left:50%;margin:-26px 0 0 -26px;height:52px;width:52px;padding:12px;box-sizing:border-box;background:rgba(0,0,0,.5);border-radius:50%;opacity:0;pointer-events:none}.dplayer-bezel .dplayer-bezel-icon.dplayer-bezel-transition{-webkit-animation:bezel-hide .5s linear;animation:bezel-hide .5s linear}@-webkit-keyframes bezel-hide{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(2)}}@keyframes bezel-hide{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(2)}}.dplayer-bezel .dplayer-danloading{position:absolute;top:50%;margin-top:-7px;width:100%;text-align:center;font-size:14px;line-height:14px;-webkit-animation:my-face 5s ease-in-out infinite;animation:my-face 5s ease-in-out infinite}.dplayer-bezel .diplayer-loading-icon{display:none;position:absolute;top:50%;left:50%;margin:-18px 0 0 -18px;height:36px;width:36px;pointer-events:none}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-hide{display:none}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot{-webkit-animation:diplayer-loading-dot-fade .8s ease infinite;animation:diplayer-loading-dot-fade .8s ease infinite;opacity:0;transform-origin:4px 4px}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-7{-webkit-animation-delay:.7s;animation-delay:.7s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-6{-webkit-animation-delay:.6s;animation-delay:.6s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-5{-webkit-animation-delay:.5s;animation-delay:.5s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-4{-webkit-animation-delay:.4s;animation-delay:.4s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-3{-webkit-animation-delay:.3s;animation-delay:.3s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-2{-webkit-animation-delay:.2s;animation-delay:.2s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-1{-webkit-animation-delay:.1s;animation-delay:.1s}@-webkit-keyframes diplayer-loading-dot-fade{0%{opacity:.7;transform:scale(1.2)}50%{opacity:.25;transform:scale(.9)}to{opacity:.25;transform:scale(.85)}}@keyframes diplayer-loading-dot-fade{0%{opacity:.7;transform:scale(1.2)}50%{opacity:.25;transform:scale(.9)}to{opacity:.25;transform:scale(.85)}}.dplayer-controller-mask{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==) repeat-x bottom;height:98px;width:100%}.dplayer-controller,.dplayer-controller-mask{position:absolute;bottom:0;transition:all .3s ease}.dplayer-controller{left:0;right:0;height:41px;padding:0 20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.dplayer-controller.dplayer-controller-comment .dplayer-icons{display:none}.dplayer-controller.dplayer-controller-comment .dplayer-icons.dplayer-comment-box{display:block}.dplayer-controller .dplayer-bar-wrap{padding:5px 0;cursor:pointer;position:absolute;bottom:33px;width:calc(100% - 40px);height:3px}.dplayer-controller .dplayer-bar-wrap:hover .dplayer-bar .dplayer-played .dplayer-thumb{transform:scale(1)}.dplayer-controller .dplayer-bar-wrap:hover .dplayer-highlight{display:block;width:8px;transform:translateX(-4px);top:4px;height:40%}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight{z-index:12;position:absolute;top:5px;width:6px;height:20%;border-radius:6px;background-color:#fff;text-align:center;transform:translateX(-3px);transition:all .2s ease-in-out}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover .dplayer-highlight-text{display:block}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover~.dplayer-bar-preview,.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover~.dplayer-bar-time{opacity:0}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight .dplayer-highlight-text{display:none;position:absolute;left:50%;top:-24px;padding:5px 8px;background-color:rgba(0,0,0,.62);color:#fff;border-radius:4px;font-size:12px;white-space:nowrap;transform:translateX(-50%)}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-preview{position:absolute;background:#fff;pointer-events:none;display:none;background-size:16000px 100%}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-preview-canvas{position:absolute;width:100%;height:100%;z-index:1;pointer-events:none}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-time{position:absolute;left:0;top:-20px;border-radius:4px;padding:5px 7px;background-color:rgba(0,0,0,.62);color:#fff;font-size:12px;text-align:center;opacity:1;transition:opacity .1s ease-in-out;word-wrap:normal;word-break:normal;z-index:2;pointer-events:none}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-time.hidden{opacity:0}.dplayer-controller .dplayer-bar-wrap .dplayer-bar{position:relative;height:3px;width:100%;background:hsla(0,0%,100%,.2);cursor:pointer}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-loaded{background:hsla(0,0%,100%,.4);transition:all .5s ease}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-loaded,.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-played{position:absolute;left:0;top:0;bottom:0;height:3px;will-change:width}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-played .dplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;transform:scale(0)}.dplayer-controller .dplayer-icons{height:38px;position:absolute;bottom:0}.dplayer-controller .dplayer-icons.dplayer-comment-box{display:none;position:absolute;transition:all .3s ease-in-out;z-index:2;height:38px;bottom:0;left:20px;right:20px;color:#fff}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-icon{padding:7px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-icon{position:absolute;left:0;top:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-send-icon{position:absolute;right:0;top:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box{position:absolute;background:rgba(28,28,28,.9);bottom:41px;left:0;box-shadow:0 0 25px rgba(0,0,0,.3);border-radius:4px;padding:10px 10px 16px;font-size:14px;width:204px;transition:all .3s ease-in-out;transform:scale(0)}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box.dplayer-comment-setting-open{transform:scale(1)}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box input[type=radio]{display:none}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box label{cursor:pointer}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-title{font-size:13px;color:#fff;line-height:30px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type{font-size:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type .dplayer-comment-setting-title{margin-bottom:6px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type label:nth-child(2) span{border-radius:4px 0 0 4px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type label:nth-child(4) span{border-radius:0 4px 4px 0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type span{width:33%;padding:4px 6px;line-height:16px;display:inline-block;font-size:12px;color:#fff;border:1px solid #fff;margin-right:-1px;box-sizing:border-box;text-align:center;cursor:pointer}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type input:checked+span{background:#e4e4e6;color:#1c1c1c}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color{font-size:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color label{font-size:0;padding:6px;display:inline-block}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color span{width:22px;height:22px;display:inline-block;border-radius:50%;box-sizing:border-box;cursor:pointer}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color span:hover{-webkit-animation:my-face 5s ease-in-out infinite;animation:my-face 5s ease-in-out infinite}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input{outline:none;border:none;padding:8px 31px;font-size:14px;line-height:18px;text-align:center;border-radius:4px;background:none;margin:0;height:100%;box-sizing:border-box;width:100%;color:#fff}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-webkit-input-placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-moz-placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input:-ms-input-placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-ms-input-placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-ms-clear{display:none}.dplayer-controller .dplayer-icons.dplayer-icons-left .dplayer-icon{padding:7px}.dplayer-controller .dplayer-icons.dplayer-icons-right{right:20px}.dplayer-controller .dplayer-icons.dplayer-icons-right .dplayer-icon{padding:8px}.dplayer-controller .dplayer-icons .dplayer-live-badge,.dplayer-controller .dplayer-icons .dplayer-time{line-height:38px;color:#eee;text-shadow:0 0 2px rgba(0,0,0,.5);vertical-align:middle;font-size:13px;cursor:default}.dplayer-controller .dplayer-icons .dplayer-live-dot{display:inline-block;width:6px;height:6px;vertical-align:4%;margin-right:5px;content:"";border-radius:6px}.dplayer-controller .dplayer-icons .dplayer-icon{width:40px;height:100%;border:none;background-color:transparent;outline:none;cursor:pointer;vertical-align:middle;box-sizing:border-box;display:inline-block}.dplayer-controller .dplayer-icons .dplayer-icon .dplayer-icon-content{transition:all .2s ease-in-out;opacity:.8}.dplayer-controller .dplayer-icons .dplayer-icon:hover .dplayer-icon-content{opacity:1}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-quality-icon{color:#fff;width:auto;line-height:22px;font-size:14px}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-comment-icon{padding:10px 9px 9px}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-setting-icon{padding-top:8.5px}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-volume-icon{width:43px}.dplayer-controller .dplayer-icons .dplayer-volume{position:relative;display:inline-block;cursor:pointer;height:100%}.dplayer-controller .dplayer-icons .dplayer-volume:hover .dplayer-volume-bar-wrap .dplayer-volume-bar{width:45px}.dplayer-controller .dplayer-icons .dplayer-volume:hover .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-volume.dplayer-volume-active .dplayer-volume-bar-wrap .dplayer-volume-bar{width:45px}.dplayer-controller .dplayer-icons .dplayer-volume.dplayer-volume-active .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap{display:inline-block;margin:0 10px 0 -5px;vertical-align:middle;height:100%}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar{position:relative;top:17px;width:0;height:3px;background:#aaa;transition:all .3s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner{position:absolute;bottom:0;left:0;height:100%;transition:all .1s ease;will-change:width}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;transform:scale(0)}.dplayer-controller .dplayer-icons .dplayer-setting,.dplayer-controller .dplayer-icons .dplayer-subtitle-btn{display:inline-block;height:100%}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box{position:absolute;right:0;bottom:50px;transform:scale(0);width:150px;border-radius:2px;background:rgba(28,28,28,.9);padding:7px 0;transition:all .3s ease-in-out;overflow:hidden;z-index:2}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box>div{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box>div.dplayer-setting-origin-panel{display:block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-open{transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-narrow{width:70px;text-align:center}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-speed .dplayer-setting-origin-panel{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-speed .dplayer-setting-speed-panel{display:block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-item,.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-speed-item{height:30px;padding:5px 10px;box-sizing:border-box;cursor:pointer;position:relative}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-item:hover,.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-speed-item:hover{background-color:hsla(0,0%,100%,.1)}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku{padding:5px 0}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-label{padding:0 10px;display:inline}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku:hover .dplayer-label{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku:hover .dplayer-danmaku-bar-wrap{display:inline-block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku.dplayer-setting-danmaku-active .dplayer-label{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku.dplayer-setting-danmaku-active .dplayer-danmaku-bar-wrap{display:inline-block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap{padding:0 10px;box-sizing:border-box;display:none;vertical-align:middle;height:100%;width:100%}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar{position:relative;top:8.5px;width:100%;height:3px;background:#fff;transition:all .3s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar .dplayer-danmaku-bar-inner{position:absolute;bottom:0;left:0;height:100%;transition:all .1s ease;background:#aaa;will-change:width}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar .dplayer-danmaku-bar-inner .dplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;background:#aaa}.dplayer-controller .dplayer-icons .dplayer-full{display:inline-block;height:100%;position:relative}.dplayer-controller .dplayer-icons .dplayer-full:hover .dplayer-full-in-icon{display:block}.dplayer-controller .dplayer-icons .dplayer-full .dplayer-full-in-icon{position:absolute;top:-30px;z-index:1;display:none}.dplayer-controller .dplayer-icons .dplayer-quality{position:relative;display:inline-block;height:100%;z-index:2}.dplayer-controller .dplayer-icons .dplayer-quality:hover .dplayer-quality-list,.dplayer-controller .dplayer-icons .dplayer-quality:hover .dplayer-quality-mask{display:block}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-mask{display:none;position:absolute;bottom:38px;left:-18px;width:80px;padding-bottom:12px}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-list{display:none;font-size:12px;width:80px;border-radius:2px;background:rgba(28,28,28,.9);padding:5px 0;transition:all .3s ease-in-out;overflow:hidden;color:#fff;text-align:center}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-item{height:25px;box-sizing:border-box;cursor:pointer;line-height:25px}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-item:hover{background-color:hsla(0,0%,100%,.1)}.dplayer-controller .dplayer-icons .dplayer-comment{display:inline-block;height:100%}.dplayer-controller .dplayer-icons .dplayer-label{color:#eee;font-size:13px;display:inline-block;vertical-align:middle;white-space:nowrap}.dplayer-controller .dplayer-icons .dplayer-toggle{width:32px;height:20px;text-align:center;font-size:0;vertical-align:middle;position:absolute;top:5px;right:10px}.dplayer-controller .dplayer-icons .dplayer-toggle input{max-height:0;max-width:0;display:none}.dplayer-controller .dplayer-icons .dplayer-toggle input+label{display:inline-block;position:relative;box-shadow:inset 0 0 0 0 #dfdfdf;border:1px solid #dfdfdf;height:20px;width:32px;border-radius:10px;box-sizing:border-box;cursor:pointer;transition:.2s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-toggle input+label:after,.dplayer-controller .dplayer-icons .dplayer-toggle input+label:before{content:"";position:absolute;display:block;height:18px;width:18px;top:0;left:0;border-radius:15px;transition:.2s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-toggle input+label:after{background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.4)}.dplayer-controller .dplayer-icons .dplayer-toggle input:checked+label{border-color:hsla(0,0%,100%,.5)}.dplayer-controller .dplayer-icons .dplayer-toggle input:checked+label:before{width:30px;background:hsla(0,0%,100%,.5)}.dplayer-controller .dplayer-icons .dplayer-toggle input:checked+label:after{left:12px}.dplayer-mobile-play{display:none;width:50px;height:50px;border:none;background-color:transparent;outline:none;cursor:pointer;box-sizing:border-box;bottom:0;opacity:.8;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.dplayer-danmaku{position:absolute;left:0;right:0;top:0;bottom:0;font-size:22px;color:#fff}.dplayer-danmaku .dplayer-danmaku-item{display:inline-block;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;white-space:nowrap;text-shadow:.5px .5px .5px rgba(0,0,0,.5)}.dplayer-danmaku .dplayer-danmaku-item--demo{position:absolute;visibility:hidden}.dplayer-danmaku .dplayer-danmaku-right{position:absolute;right:0;transform:translateX(100%)}.dplayer-danmaku .dplayer-danmaku-right.dplayer-danmaku-move{will-change:transform;-webkit-animation:danmaku 5s linear;animation:danmaku 5s linear;-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes danmaku{0%{transform:translateX(100%)}}@keyframes danmaku{0%{transform:translateX(100%)}}.dplayer-danmaku .dplayer-danmaku-bottom,.dplayer-danmaku .dplayer-danmaku-top{position:absolute;width:100%;text-align:center;visibility:hidden}.dplayer-danmaku .dplayer-danmaku-bottom.dplayer-danmaku-move,.dplayer-danmaku .dplayer-danmaku-top.dplayer-danmaku-move{will-change:visibility;-webkit-animation:danmaku-center 4s linear;animation:danmaku-center 4s linear;-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes danmaku-center{0%{visibility:visible}to{visibility:visible}}@keyframes danmaku-center{0%{visibility:visible}to{visibility:visible}}.dplayer-logo{pointer-events:none;position:absolute;left:20px;top:20px;max-width:50px;max-height:50px}.dplayer-logo img{max-width:100%;max-height:100%;background:none}.dplayer-menu{position:absolute;width:170px;border-radius:2px;background:rgba(28,28,28,.85);padding:5px 0;overflow:hidden;z-index:3;display:none}.dplayer-menu.dplayer-menu-show{display:block}.dplayer-menu .dplayer-menu-item{height:30px;box-sizing:border-box;cursor:pointer}.dplayer-menu .dplayer-menu-item:hover{background-color:hsla(0,0%,100%,.1)}.dplayer-menu .dplayer-menu-item a{padding:0 10px;line-height:30px;color:#eee;font-size:13px;display:inline-block;vertical-align:middle;width:100%;box-sizing:border-box;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.dplayer-menu .dplayer-menu-item a:hover{text-decoration:none}.dplayer-notice{opacity:0;position:absolute;bottom:60px;left:20px;font-size:14px;border-radius:2px;background:rgba(28,28,28,.9);padding:7px 20px;transition:all .3s ease-in-out;overflow:hidden;color:#fff;pointer-events:none}.dplayer-subtitle{position:absolute;bottom:40px;width:90%;left:5%;text-align:center;color:#fff;text-shadow:.5px .5px .5px rgba(0,0,0,.5);font-size:20px}.dplayer-subtitle.dplayer-subtitle-hide{display:none}.dplayer-mask{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1;display:none}.dplayer-mask.dplayer-mask-show{display:block}.dplayer-video-wrap{position:relative;background:#000;font-size:0;width:100%;height:100%}.dplayer-video-wrap .dplayer-video{width:100%;height:100%;display:none}.dplayer-video-wrap .dplayer-video-current{display:block}.dplayer-video-wrap .dplayer-video-prepare{display:none}.dplayer-info-panel{position:absolute;top:10px;left:10px;width:400px;background:rgba(28,28,28,.8);padding:10px;color:#fff;font-size:12px;border-radius:2px}.dplayer-info-panel-hide{display:none}.dplayer-info-panel .dplayer-info-panel-close{cursor:pointer;position:absolute;right:10px;top:10px}.dplayer-info-panel .dplayer-info-panel-item>span{display:inline-block;vertical-align:middle;line-height:15px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.dplayer-info-panel .dplayer-info-panel-item-title{width:100px;text-align:right;margin-right:10px}.dplayer-info-panel .dplayer-info-panel-item-data{width:260px}',""]),e.exports=t},function(e,t,a){(t=a(3)(!1)).push([e.i,':root{--balloon-border-radius:2px;--balloon-color:rgba(16,16,16,0.95);--balloon-text-color:#fff;--balloon-font-size:12px;--balloon-move:4px}button[aria-label][data-balloon-pos]{overflow:visible}[aria-label][data-balloon-pos]{position:relative;cursor:pointer}[aria-label][data-balloon-pos]:after{text-indent:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-weight:400;font-style:normal;text-shadow:none;font-size:var(--balloon-font-size);background:var(--balloon-color);border-radius:2px;color:var(--balloon-text-color);border-radius:var(--balloon-border-radius);content:attr(aria-label);padding:.5em 1em;white-space:nowrap}[aria-label][data-balloon-pos]:after,[aria-label][data-balloon-pos]:before{opacity:0;pointer-events:none;transition:all .18s ease-out .18s;position:absolute;z-index:10}[aria-label][data-balloon-pos]:before{width:0;height:0;border:5px solid transparent;border-top:5px solid var(--balloon-color);content:""}[aria-label][data-balloon-pos]:hover:after,[aria-label][data-balloon-pos]:hover:before,[aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:after,[aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:before,[aria-label][data-balloon-pos][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-visible]:before{opacity:1;pointer-events:none}[aria-label][data-balloon-pos].font-awesome:after{font-family:FontAwesome,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}[aria-label][data-balloon-pos][data-balloon-break]:after{white-space:pre}[aria-label][data-balloon-pos][data-balloon-break][data-balloon-length]:after{white-space:pre-line;word-break:break-word}[aria-label][data-balloon-pos][data-balloon-blunt]:after,[aria-label][data-balloon-pos][data-balloon-blunt]:before{transition:none}[aria-label][data-balloon-pos][data-balloon-pos=up]:after{margin-bottom:10px}[aria-label][data-balloon-pos][data-balloon-pos=up]:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:before{bottom:100%;left:50%;transform:translate(-50%,var(--balloon-move));transform-origin:top}[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=up][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=up][data-balloon-visible]:before{transform:translate(-50%)}[aria-label][data-balloon-pos][data-balloon-pos=up-left]:after{bottom:100%;left:0;margin-bottom:10px;transform:translateY(var(--balloon-move));transform-origin:top}[aria-label][data-balloon-pos][data-balloon-pos=up-left]:before{bottom:100%;left:5px;transform:translateY(var(--balloon-move));transform-origin:top}[aria-label][data-balloon-pos][data-balloon-pos=up-left]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=up-left]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=up-left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=up-left][data-balloon-visible]:before{transform:translate(0)}[aria-label][data-balloon-pos][data-balloon-pos=up-right]:after{bottom:100%;right:0;margin-bottom:10px;transform:translateY(var(--balloon-move));transform-origin:top}[aria-label][data-balloon-pos][data-balloon-pos=up-right]:before{bottom:100%;right:5px;transform:translateY(var(--balloon-move));transform-origin:top}[aria-label][data-balloon-pos][data-balloon-pos=up-right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=up-right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=up-right][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=up-right][data-balloon-visible]:before{transform:translate(0)}[aria-label][data-balloon-pos][data-balloon-pos=down]:after{left:50%;margin-top:10px;top:100%;transform:translate(-50%,calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=down]:before{width:0;height:0;border:5px solid transparent;border-bottom:5px solid var(--balloon-color);left:50%;top:100%;transform:translate(-50%,calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=down]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=down]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=down][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=down][data-balloon-visible]:before{transform:translate(-50%)}[aria-label][data-balloon-pos][data-balloon-pos=down-left]:after{left:0;margin-top:10px;top:100%;transform:translateY(calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=down-left]:before{width:0;height:0;border:5px solid transparent;border-bottom:5px solid var(--balloon-color);left:5px;top:100%;transform:translateY(calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=down-left]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=down-left]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=down-left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=down-left][data-balloon-visible]:before{transform:translate(0)}[aria-label][data-balloon-pos][data-balloon-pos=down-right]:after{right:0;margin-top:10px;top:100%;transform:translateY(calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=down-right]:before{width:0;height:0;border:5px solid transparent;border-bottom:5px solid var(--balloon-color);right:5px;top:100%;transform:translateY(calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=down-right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=down-right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=down-right][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=down-right][data-balloon-visible]:before{transform:translate(0)}[aria-label][data-balloon-pos][data-balloon-pos=left]:after{margin-right:10px;right:100%;top:50%;transform:translate(var(--balloon-move),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:before{width:0;height:0;border:5px solid transparent;border-left:5px solid var(--balloon-color);right:100%;top:50%;transform:translate(var(--balloon-move),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=left]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=left][data-balloon-visible]:before{transform:translateY(-50%)}[aria-label][data-balloon-pos][data-balloon-pos=right]:after{left:100%;margin-left:10px;top:50%;transform:translate(calc(var(--balloon-move)*-1),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=right]:before{width:0;height:0;border:5px solid transparent;border-right:5px solid var(--balloon-color);left:100%;top:50%;transform:translate(calc(var(--balloon-move)*-1),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=right][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=right][data-balloon-visible]:before{transform:translateY(-50%)}[aria-label][data-balloon-pos][data-balloon-length=small]:after{white-space:normal;width:80px}[aria-label][data-balloon-pos][data-balloon-length=medium]:after{white-space:normal;width:150px}[aria-label][data-balloon-pos][data-balloon-length=large]:after{white-space:normal;width:260px}[aria-label][data-balloon-pos][data-balloon-length=xlarge]:after{white-space:normal;width:380px}@media screen and (max-width:768px){[aria-label][data-balloon-pos][data-balloon-length=xlarge]:after{white-space:normal;width:90vw}}[aria-label][data-balloon-pos][data-balloon-length=fit]:after{white-space:normal;width:100%}',""]),e.exports=t},function(e,t,a){var n=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(n.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(n.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},a(40),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,a){!function(e,h){!function(a,o){"use strict";var n,t,r,e,i,l,s,d,p,c;function u(e){delete l[e]}function y(e){if(s)setTimeout(y,0,e);else{var t=l[e];if(t){s=!0;try{var a=t.callback,n=t.args;switch(n.length){case 0:a();break;case 1:a(n[0]);break;case 2:a(n[0],n[1]);break;case 3:a(n[0],n[1],n[2]);break;default:a.apply(o,n)}}finally{u(e),s=!1}}}}a.setImmediate||(i=1,s=!(l={}),d=a.document,p=(p=Object.getPrototypeOf&&Object.getPrototypeOf(a))&&p.setTimeout?p:a,c="[object process]"==={}.toString.call(a.process)?function(e){h.nextTick(function(){y(e)})}:function(){var e,t;if(a.postMessage&&!a.importScripts)return e=!0,t=a.onmessage,a.onmessage=function(){e=!1},a.postMessage("","*"),a.onmessage=t,e}()?(r="setImmediate$"+Math.random()+"$",e=function(e){e.source===a&&"string"==typeof e.data&&0===e.data.indexOf(r)&&y(+e.data.slice(r.length))},a.addEventListener?a.addEventListener("message",e,!1):a.attachEvent("onmessage",e),function(e){a.postMessage(r+e,"*")}):a.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){y(e.data)},function(e){t.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(n=d.documentElement,function(e){var t=d.createElement("script");t.onreadystatechange=function(){y(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):function(e){setTimeout(y,0,e)},p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),a=0;a<t.length;a++)t[a]=arguments[a+1];return l[i]={callback:e,args:t},c(i),i++},p.clearImmediate=u)}("undefined"==typeof self?void 0===e?this:e:self)}.call(this,a(4),a(5))},function(e,t,a){"use strict";var n=a(0),o=a(6),r=a(42),i=a(12);function l(e){var e=new r(e),t=o(r.prototype.request,e);return n.extend(t,r.prototype,e),n.extend(t,e),t}var s=l(a(9));s.Axios=r,s.create=function(e){return l(i(s.defaults,e))},s.Cancel=a(13),s.CancelToken=a(55),s.isCancel=a(8),s.all=function(e){return Promise.all(e)},s.spread=a(56),e.exports=s,e.exports.default=s},function(e,t,a){"use strict";var o=a(0),n=a(7),r=a(43),i=a(44),l=a(12);function s(e){this.defaults=e,this.interceptors={request:new r,response:new r}}s.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=l(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[i,void 0],a=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)a=a.then(t.shift(),t.shift());return a},s.prototype.getUri=function(e){return e=l(this.defaults,e),n(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],function(a){s.prototype[a]=function(e,t){return this.request(o.merge(t||{},{method:a,url:e}))}}),o.forEach(["post","put","patch"],function(n){s.prototype[n]=function(e,t,a){return this.request(o.merge(a||{},{method:n,url:e,data:t}))}}),e.exports=s},function(e,t,a){"use strict";var n=a(0);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(t){n.forEach(this.handlers,function(e){null!==e&&t(e)})},e.exports=o},function(e,t,a){"use strict";var n=a(0),o=a(45),r=a(8),i=a(9);function l(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(t){return l(t),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),n.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||i.adapter)(t).then(function(e){return l(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return r(e)||(l(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(e,t,a){"use strict";var n=a(0);e.exports=function(t,a,e){return n.forEach(e,function(e){t=e(t,a)}),t}},function(e,t,a){"use strict";var o=a(0);e.exports=function(a,n){o.forEach(a,function(e,t){t!==n&&t.toUpperCase()===n.toUpperCase()&&(a[n]=e,delete a[t])})}},function(e,t,a){"use strict";var o=a(11);e.exports=function(e,t,a){var n=a.config.validateStatus;!n||n(a.status)?e(a):t(o("Request failed with status code "+a.status,a.config,null,a.request,a))}},function(e,t,a){"use strict";e.exports=function(e,t,a,n,o){return e.config=t,a&&(e.code=a),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,a){"use strict";var n=a(50),o=a(51);e.exports=function(e,t){return e&&!n(t)?o(e,t):t}},function(e,t,a){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,a){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,a){"use strict";var o=a(0),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,a,n={};return e&&o.forEach(e.split("\n"),function(e){a=e.indexOf(":"),t=o.trim(e.substr(0,a)).toLowerCase(),a=o.trim(e.substr(a+1)),!t||n[t]&&0<=r.indexOf(t)||(n[t]="set-cookie"===t?(n[t]||[]).concat([a]):n[t]?n[t]+", "+a:a)}),n}},function(e,t,a){"use strict";var n,o,r,i=a(0);function l(e){return o&&(r.setAttribute("href",e),e=r.href),r.setAttribute("href",e),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}e.exports=i.isStandardBrowserEnv()?(o=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n=l(window.location.href),function(e){e=i.isString(e)?l(e):e;return e.protocol===n.protocol&&e.host===n.host}):function(){return!0}},function(e,t,a){"use strict";var l=a(0);e.exports=l.isStandardBrowserEnv()?{write:function(e,t,a,n,o,r){var i=[];i.push(e+"="+encodeURIComponent(t)),l.isNumber(a)&&i.push("expires="+new Date(a).toGMTString()),l.isString(n)&&i.push("path="+n),l.isString(o)&&i.push("domain="+o),!0===r&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){e=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,a){"use strict";var n=a(13);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});var t,a=this;e(function(e){a.reason||(a.reason=new n(e),t(a.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},e.exports=o},function(e,t,a){"use strict";e.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,a){"use strict";!function(e){var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},e=Object.create(e),l=/["&'<>]/;e.$escape=function(e){var e=function e(t){return t="string"!=typeof t?null==t?"":"function"==typeof t?e(t.call(t)):JSON.stringify(t):t}(e),t=""+e,a=l.exec(t);if(!a)return e;for(var n="",o=void 0,r=void 0,i=void 0,o=a.index,r=0;o<t.length;o++){switch(t.charCodeAt(o)){case 34:i="&#34;";break;case 38:i="&#38;";break;case 39:i="&#39;";break;case 60:i="&#60;";break;case 62:i="&#62;";break;default:continue}r!==o&&(n+=t.substring(r,o)),r=o+1,n+=i}return r!==o?n+t.substring(r,o):n},e.$each=function(e,t){if(Array.isArray(e))for(var a=0,n=e.length;a<n;a++)t(e[a],a);else for(var o in e)t(e[o],o)},t.exports=e}.call(this,a(4))},function(j,e,t){"use strict";t.r(e),t(35);var _=t(15),a=/mobile/i.test(window.navigator.userAgent),y={secondToTime:function(e){var t,a;return 0===(e=e||0)||e===1/0||"NaN"===e.toString()?"00:00":(t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),e=Math.floor(e-3600*t-60*a),(0<t?[t,a,e]:[a,e]).map(function(e){return e<10?"0"+e:""+e}).join(":"))},getElementViewLeft:function(e){var t=e.offsetLeft,a=e.offsetParent,n=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;null!==a&&a!==e;)t+=a.offsetLeft,a=a.offsetParent;else for(;null!==a;)t+=a.offsetLeft,a=a.offsetParent;return t-n},getBoundingClientRectViewLeft:function(e){var t,a=window.scrollY||window.pageYOffset||document.body.scrollTop+(document.documentElement&&document.documentElement.scrollTop||0);return e.getBoundingClientRect?("number"!=typeof this.getBoundingClientRectViewLeft.offset&&((t=document.createElement("div")).style.cssText="position:absolute;top:0;left:0;",document.body.appendChild(t),this.getBoundingClientRectViewLeft.offset=-t.getBoundingClientRect().top-a,document.body.removeChild(t),t=null),a=e.getBoundingClientRect(),t=this.getBoundingClientRectViewLeft.offset,a.left+t):this.getElementViewLeft(e)},getScrollPosition:function(){return{left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}},setScrollPosition:function(e){var t=e.left,t=void 0===t?0:t,e=e.top,e=void 0===e?0:e;this.isFirefox?(document.documentElement.scrollLeft=t,document.documentElement.scrollTop=e):window.scrollTo(t,e)},isMobile:a,isSafari:/Safari/i.test(window.navigator.userAgent),isFirefox:/firefox/i.test(window.navigator.userAgent),isChrome:/chrome/i.test(window.navigator.userAgent),storage:{set:function(e,t){localStorage.setItem(e,t)},get:function(e){return localStorage.getItem(e)}},nameMap:{dragStart:a?"touchstart":"mousedown",dragMove:a?"touchmove":"mousemove",dragEnd:a?"touchend":"mouseup"},color2Number:function(e){return 3===(e="#"===e[0]?e.substr(1):e).length&&(e="".concat(e[0]).concat(e[0]).concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2])),parseInt(e,16)+0&16777215},number2Color:function(e){return"#"+("00000"+e.toString(16)).slice(-6)},number2Type:function(e){switch(e){case 0:return"right";case 1:return"top";case 2:return"bottom";default:return"right"}}},a=t(2),n=t.n(a),Y={send:function(t){n.a.post(t.url,t.data).then(function(e){e=e.data;e&&0===e.code?t.success&&t.success(e):t.error&&t.error(e&&e.msg)}).catch(function(e){console.error(e),t.error&&t.error()})},read:function(t){n.a.get(t.url).then(function(e){e=e.data;e&&0===e.code?t.success&&t.success(e.data.map(function(e){return{time:e[0],type:e[1],color:e[2],author:e[3],text:e[4]}})):t.error&&t.error(e&&e.msg)}).catch(function(e){console.error(e),t.error&&t.error()})}};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e){var t=this;this.lang=e,this.tran=function(e){return r[t.lang]&&r[t.lang][e]?r[t.lang][e]:e}}var r={"zh-cn":{"Danmaku is loading":"",Top:"",Bottom:"",Rolling:"","Input danmaku, hit Enter":"","About author":"","DPlayer feedback":"","About DPlayer":" DPlayer ",Loop:"",Speed:"","Opacity for danmaku":"",Normal:"","Please input danmaku content!":"","Set danmaku color":"","Set danmaku type":"","Show danmaku":"","Video load failed":"","Danmaku load failed":"","Danmaku send failed":"","Switching to":"","Switched to":"",quality:"",FF:"",REW:"","Unlimited danmaku":"","Send danmaku":"",Setting:"","Full screen":"","Web full screen":"",Send:"",Screenshot:"",AirPlay:"",s:"","Show subtitle":"","Hide subtitle":"",Volume:"",Live:"","Video info":""},"zh-tw":{"Danmaku is loading":"",Top:"",Bottom:"",Rolling:"","Input danmaku, hit Enter":"Enter ","About author":"","DPlayer feedback":"","About DPlayer":" DPlayer ",Loop:"",Speed:"","Opacity for danmaku":"",Normal:"","Please input danmaku content!":"","Set danmaku color":"","Set danmaku type":"","Show danmaku":"","Video load failed":"","Danmaku load failed":"","Danmaku send failed":"","Switching to":"","Switched to":"",quality:"",FF:"",REW:"","Unlimited danmaku":"","Send danmaku":"",Setting:"","Full screen":"","Web full screen":"",Send:"",Screenshot:"",AirPlay:"",s:"","Show subtitle":"","Hide subtitle":"",Volume:"",Live:"","Video info":""}},a=t(17),a=t.n(a),i=t(18),i=t.n(i),l=t(19),l=t.n(l),s=t(20),s=t.n(s),d=t(21),d=t.n(d),p=t(22),p=t.n(p),c=t(23),c=t.n(c),u=t(24),u=t.n(u),h=t(25),h=t.n(h),m=t(26),m=t.n(m),f=t(27),f=t.n(f),b=t(28),b=t.n(b),R=t(29),R=t.n(R),I=t(30),I=t.n(I),H=t(31),H=t.n(H),W=t(32),W=t.n(W),N=t(33),N=t.n(N),v={play:a.a,pause:i.a,volumeUp:l.a,volumeDown:s.a,volumeOff:d.a,full:p.a,fullWeb:c.a,setting:u.a,right:h.a,comment:m.a,commentOff:f.a,send:b.a,pallette:R.a,camera:I.a,subtitle:W.a,loading:N.a,airplay:H.a},a=t(34),U=t.n(a);function V(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}V(g.prototype,[{key:"init",value:function(){this.container.innerHTML=U()({options:this.options,index:this.index,tran:this.tran,icons:v,mobile:y.isMobile,video:{current:!0,pic:this.options.video.pic,screenshot:this.options.screenshot,airplay:this.options.airplay,preload:this.options.preload,url:this.options.video.url,subtitle:this.options.subtitle}}),this.volumeBar=this.container.querySelector(".dplayer-volume-bar-inner"),this.volumeBarWrap=this.container.querySelector(".dplayer-volume-bar"),this.volumeBarWrapWrap=this.container.querySelector(".dplayer-volume-bar-wrap"),this.volumeButton=this.container.querySelector(".dplayer-volume"),this.volumeButtonIcon=this.container.querySelector(".dplayer-volume-icon"),this.volumeIcon=this.container.querySelector(".dplayer-volume-icon .dplayer-icon-content"),this.playedBar=this.container.querySelector(".dplayer-played"),this.loadedBar=this.container.querySelector(".dplayer-loaded"),this.playedBarWrap=this.container.querySelector(".dplayer-bar-wrap"),this.playedBarTime=this.container.querySelector(".dplayer-bar-time"),this.danmaku=this.container.querySelector(".dplayer-danmaku"),this.danmakuLoading=this.container.querySelector(".dplayer-danloading"),this.video=this.container.querySelector(".dplayer-video-current"),this.bezel=this.container.querySelector(".dplayer-bezel-icon"),this.playButton=this.container.querySelector(".dplayer-play-icon"),this.mobilePlayButton=this.container.querySelector(".dplayer-mobile-play"),this.videoWrap=this.container.querySelector(".dplayer-video-wrap"),this.controllerMask=this.container.querySelector(".dplayer-controller-mask"),this.ptime=this.container.querySelector(".dplayer-ptime"),this.settingButton=this.container.querySelector(".dplayer-setting-icon"),this.settingBox=this.container.querySelector(".dplayer-setting-box"),this.mask=this.container.querySelector(".dplayer-mask"),this.loop=this.container.querySelector(".dplayer-setting-loop"),this.loopToggle=this.container.querySelector(".dplayer-setting-loop .dplayer-toggle-setting-input"),this.showDanmaku=this.container.querySelector(".dplayer-setting-showdan"),this.showDanmakuToggle=this.container.querySelector(".dplayer-showdan-setting-input"),this.unlimitDanmaku=this.container.querySelector(".dplayer-setting-danunlimit"),this.unlimitDanmakuToggle=this.container.querySelector(".dplayer-danunlimit-setting-input"),this.speed=this.container.querySelector(".dplayer-setting-speed"),this.speedItem=this.container.querySelectorAll(".dplayer-setting-speed-item"),this.danmakuOpacityBar=this.container.querySelector(".dplayer-danmaku-bar-inner"),this.danmakuOpacityBarWrap=this.container.querySelector(".dplayer-danmaku-bar"),this.danmakuOpacityBarWrapWrap=this.container.querySelector(".dplayer-danmaku-bar-wrap"),this.danmakuOpacityBox=this.container.querySelector(".dplayer-setting-danmaku"),this.dtime=this.container.querySelector(".dplayer-dtime"),this.controller=this.container.querySelector(".dplayer-controller"),this.commentInput=this.container.querySelector(".dplayer-comment-input"),this.commentButton=this.container.querySelector(".dplayer-comment-icon"),this.commentSettingBox=this.container.querySelector(".dplayer-comment-setting-box"),this.commentSettingButton=this.container.querySelector(".dplayer-comment-setting-icon"),this.commentSettingFill=this.container.querySelector(".dplayer-comment-setting-icon path"),this.commentSendButton=this.container.querySelector(".dplayer-send-icon"),this.commentSendFill=this.container.querySelector(".dplayer-send-icon path"),this.commentColorSettingBox=this.container.querySelector(".dplayer-comment-setting-color"),this.browserFullButton=this.container.querySelector(".dplayer-full-icon"),this.webFullButton=this.container.querySelector(".dplayer-full-in-icon"),this.menu=this.container.querySelector(".dplayer-menu"),this.menuItem=this.container.querySelectorAll(".dplayer-menu-item"),this.qualityList=this.container.querySelector(".dplayer-quality-list"),this.camareButton=this.container.querySelector(".dplayer-camera-icon"),this.airplayButton=this.container.querySelector(".dplayer-airplay-icon"),this.subtitleButton=this.container.querySelector(".dplayer-subtitle-icon"),this.subtitleButtonInner=this.container.querySelector(".dplayer-subtitle-icon .dplayer-icon-content"),this.subtitle=this.container.querySelector(".dplayer-subtitle"),this.qualityButton=this.container.querySelector(".dplayer-quality-icon"),this.barPreview=this.container.querySelector(".dplayer-bar-preview"),this.barWrap=this.container.querySelector(".dplayer-bar-wrap"),this.notice=this.container.querySelector(".dplayer-notice"),this.infoPanel=this.container.querySelector(".dplayer-info-panel"),this.infoPanelClose=this.container.querySelector(".dplayer-info-panel-close"),this.infoVersion=this.container.querySelector(".dplayer-info-panel-item-version .dplayer-info-panel-item-data"),this.infoFPS=this.container.querySelector(".dplayer-info-panel-item-fps .dplayer-info-panel-item-data"),this.infoType=this.container.querySelector(".dplayer-info-panel-item-type .dplayer-info-panel-item-data"),this.infoUrl=this.container.querySelector(".dplayer-info-panel-item-url .dplayer-info-panel-item-data"),this.infoResolution=this.container.querySelector(".dplayer-info-panel-item-resolution .dplayer-info-panel-item-data"),this.infoDuration=this.container.querySelector(".dplayer-info-panel-item-duration .dplayer-info-panel-item-data"),this.infoDanmakuId=this.container.querySelector(".dplayer-info-panel-item-danmaku-id .dplayer-info-panel-item-data"),this.infoDanmakuApi=this.container.querySelector(".dplayer-info-panel-item-danmaku-api .dplayer-info-panel-item-data"),this.infoDanmakuAmount=this.container.querySelector(".dplayer-info-panel-item-danmaku-amount .dplayer-info-panel-item-data")}}]);var X=g;function g(e){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");this.container=e.container,this.options=e.options,this.index=e.index,this.tran=e.tran,this.init()}function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}$(w.prototype,[{key:"load",value:function(){var t=this,e=this.options.api.maximum?"".concat(this.options.api.address,"v3/?id=").concat(this.options.api.id,"&max=").concat(this.options.api.maximum):"".concat(this.options.api.address,"v3/?id=").concat(this.options.api.id),a=(this.options.api.addition||[]).slice(0);a.push(e),this.events&&this.events.trigger("danmaku_load_start",a),this._readAllEndpoints(a,function(e){t.dan=[].concat.apply([],e).sort(function(e,t){return e.time-t.time}),window.requestAnimationFrame(function(){t.frame()}),t.options.callback(),t.events&&t.events.trigger("danmaku_load_end")})}},{key:"reload",value:function(e){this.options.api=e,this.dan=[],this.clear(),this.load()}},{key:"_readAllEndpoints",value:function(a,n){for(var o=this,r=[],i=0,e=0;e<a.length;++e)!function(t){o.options.apiBackend.read({url:a[t],success:function(e){r[t]=e,++i===a.length&&n(r)},error:function(e){o.options.error(e||o.options.tran("Danmaku load failed")),r[t]=[],++i===a.length&&n(r)}})}(e)}},{key:"send",value:function(e,t){var a=this,e={token:this.options.api.token,id:this.options.api.id,author:this.options.api.user,time:this.options.time(),text:e.text,color:e.color,type:e.type},t=(this.options.apiBackend.send({url:this.options.api.address+"v3/",data:e,success:t,error:function(e){a.options.error(e||a.options.tran("Danmaku send failed"))}}),this.dan.splice(this.danIndex,0,e),this.danIndex++,{text:this.htmlEncode(e.text),color:e.color,type:e.type,border:"2px solid ".concat(this.options.borderColor)});this.draw(t),this.events&&this.events.trigger("danmaku_send",e)}},{key:"frame",value:function(){var e=this;if(this.dan.length&&!this.paused&&this.showing){for(var t=this.dan[this.danIndex],a=[];t&&this.options.time()>parseFloat(t.time);)a.push(t),t=this.dan[++this.danIndex];this.draw(a)}window.requestAnimationFrame(function(){e.frame()})}},{key:"opacity",value:function(e){if(void 0!==e){for(var t=this.container.getElementsByClassName("dplayer-danmaku-item"),a=0;a<t.length;a++)t[a].style.opacity=e;this._opacity=e,this.events&&this.events.trigger("danmaku_opacity",this._opacity)}return this._opacity}},{key:"draw",value:function(o){var l=this;if(this.showing){var r=this.options.height,s=this.container.offsetWidth,e=this.container.offsetHeight,d=parseInt(e/r),p=function(e){var t=e.offsetWidth||parseInt(e.style.width),e=e.getBoundingClientRect().right||l.container.getBoundingClientRect().right+t;return l.container.getBoundingClientRect().right-e},c=function(e){return(s+e)/5},i=function(o,r,e){for(var i=s/c(e),t=0;l.unlimited||t<d;t++){var a=function(e){var t=l.danTunnel[r][e+""];if(!t||!t.length)return l.danTunnel[r][e+""]=[o],o.addEventListener("animationend",function(){l.danTunnel[r][e+""].splice(0,1)}),{v:e%d};if("right"!==r)return"continue";for(var a=0;a<t.length;a++){var n=p(t[a])-10;if(n<=s-i*c(parseInt(t[a].style.width))||n<=0)break;if(a===t.length-1)return l.danTunnel[r][e+""].push(o),o.addEventListener("animationend",function(){l.danTunnel[r][e+""].splice(0,1)}),{v:e%d}}}(t);if("continue"!==a&&"object"===Q(a))return a.v}return-1};"[object Array]"!==Object.prototype.toString.call(o)&&(o=[o]);for(var u=document.createDocumentFragment(),t=0;t<o.length;t++)!function(e){o[e].type=y.number2Type(o[e].type),o[e].color||(o[e].color=16777215);var t=document.createElement("div"),a=(t.classList.add("dplayer-danmaku-item"),t.classList.add("dplayer-danmaku-".concat(o[e].type)),o[e].border?t.innerHTML='<span style="border:'.concat(o[e].border,'">').concat(o[e].text,"</span>"):t.innerHTML=o[e].text,t.style.opacity=l._opacity,t.style.color=y.number2Color(o[e].color),t.addEventListener("animationend",function(){l.container.removeChild(t)}),l._measure(o[e].text)),n=void 0;switch(o[e].type){case"right":0<=(n=i(t,o[e].type,a))&&(t.style.width=a+1+"px",t.style.top=r*n+"px",t.style.transform="translateX(-".concat(s,"px)"));break;case"top":0<=(n=i(t,o[e].type))&&(t.style.top=r*n+"px");break;case"bottom":0<=(n=i(t,o[e].type))&&(t.style.bottom=r*n+"px");break;default:console.error("Can't handled danmaku type: ".concat(o[e].type))}0<=n&&(t.classList.add("dplayer-danmaku-move"),u.appendChild(t))}(t);return this.container.appendChild(u),u}}},{key:"play",value:function(){this.paused=!1}},{key:"pause",value:function(){this.paused=!0}},{key:"_measure",value:function(e){var t;return this.context||(t=getComputedStyle(this.container.getElementsByClassName("dplayer-danmaku-item")[0],null),this.context=document.createElement("canvas").getContext("2d"),this.context.font=t.getPropertyValue("font")),this.context.measureText(e).width}},{key:"seek",value:function(){this.clear();for(var e=0;e<this.dan.length;e++){if(this.dan[e].time>=this.options.time()){this.danIndex=e;break}this.danIndex=this.dan.length}}},{key:"clear",value:function(){this.danTunnel={right:{},top:{},bottom:{}},this.danIndex=0,this.options.container.innerHTML="",this.events&&this.events.trigger("danmaku_clear")}},{key:"htmlEncode",value:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2f;")}},{key:"resize",value:function(){for(var e=this.container.offsetWidth,t=this.container.getElementsByClassName("dplayer-danmaku-item"),a=0;a<t.length;a++)t[a].style.transform="translateX(-".concat(e,"px)")}},{key:"hide",value:function(){this.showing=!1,this.pause(),this.clear(),this.events&&this.events.trigger("danmaku_hide")}},{key:"show",value:function(){this.seek(),this.showing=!0,this.play(),this.events&&this.events.trigger("danmaku_show")}},{key:"unlimit",value:function(e){this.unlimited=e}}]);var J=w;function w(e){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");this.options=e,this.container=this.options.container,this.danTunnel={right:{},top:{},bottom:{}},this.danIndex=0,this.dan=[],this.showing=!0,this._opacity=this.options.opacity,this.events=this.options.events,this.unlimited=this.options.unlimited,this._measure(""),this.load()}function K(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}K(x.prototype,[{key:"on",value:function(e,t){this.type(e)&&"function"==typeof t&&(this.events[e]||(this.events[e]=[]),this.events[e].push(t))}},{key:"trigger",value:function(e,t){if(this.events[e]&&this.events[e].length)for(var a=0;a<this.events[e].length;a++)this.events[e][a](t)}},{key:"type",value:function(e){return-1!==this.playerEvents.indexOf(e)?"player":-1!==this.videoEvents.indexOf(e)?"video":(console.error("Unknown event name: ".concat(e)),null)}}]);var Z=x;function x(){if(!(this instanceof x))throw new TypeError("Cannot call a class as a function");this.events={},this.videoEvents=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],this.playerEvents=["screenshot","thumbnails_show","thumbnails_hide","danmaku_show","danmaku_hide","danmaku_clear","danmaku_loaded","danmaku_send","danmaku_opacity","contextmenu_show","contextmenu_hide","notice_show","notice_hide","quality_start","quality_end","destroy","resize","fullscreen","fullscreen_cancel","webfullscreen","webfullscreen_cancel","subtitle_show","subtitle_hide","subtitle_change"]}function G(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}G(k.prototype,[{key:"isFullScreen",value:function(){switch(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"browser"){case"browser":return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;case"web":return this.player.container.classList.contains("dplayer-fulled")}}},{key:"request",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"browser",t="browser"===e?"web":"browser",a=this.isFullScreen(t);switch(a||(this.lastScrollPosition=y.getScrollPosition()),e){case"browser":this.player.container.requestFullscreen?this.player.container.requestFullscreen():this.player.container.mozRequestFullScreen?this.player.container.mozRequestFullScreen():this.player.container.webkitRequestFullscreen?this.player.container.webkitRequestFullscreen():this.player.video.webkitEnterFullscreen?this.player.video.webkitEnterFullscreen():this.player.video.webkitEnterFullScreen?this.player.video.webkitEnterFullScreen():this.player.container.msRequestFullscreen&&this.player.container.msRequestFullscreen();break;case"web":this.player.container.classList.add("dplayer-fulled"),document.body.classList.add("dplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen")}a&&this.cancel(t)}},{key:"cancel",value:function(){switch(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"browser"){case"browser":document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.msCancelFullScreen?document.msCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();break;case"web":this.player.container.classList.remove("dplayer-fulled"),document.body.classList.remove("dplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen_cancel")}}},{key:"toggle",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"browser";this.isFullScreen(e)?this.cancel(e):this.request(e)}}]);var ee=k;function k(e){var t=this;if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");this.player=e,this.lastScrollPosition={left:0,top:0},this.player.events.on("webfullscreen",function(){t.player.resize()}),this.player.events.on("webfullscreen_cancel",function(){t.player.resize(),y.setScrollPosition(t.lastScrollPosition)});function a(){t.player.resize(),t.isFullScreen("browser")?t.player.events.trigger("fullscreen"):(y.setScrollPosition(t.lastScrollPosition),t.player.events.trigger("fullscreen_cancel"))}function n(){var e=document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;e&&e!==t.player.container||(t.player.resize(),e?t.player.events.trigger("fullscreen"):(y.setScrollPosition(t.lastScrollPosition),t.player.events.trigger("fullscreen_cancel")))}/Firefox/.test(navigator.userAgent)?(document.addEventListener("mozfullscreenchange",n),document.addEventListener("fullscreenchange",n)):(this.player.container.addEventListener("fullscreenchange",a),this.player.container.addEventListener("webkitfullscreenchange",a),document.addEventListener("msfullscreenchange",n),document.addEventListener("MSFullscreenChange",n))}function te(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}te(S.prototype,[{key:"init",value:function(){for(var e in this.storageName){var t=this.storageName[e];this.data[e]=parseFloat(y.storage.get(t)||this.default[e])}}},{key:"get",value:function(e){return this.data[e]}},{key:"set",value:function(e,t){this.data[e]=t,y.storage.set(this.storageName[e],t)}}]);var ae=S;function S(e){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");this.storageName={opacity:"dplayer-danmaku-opacity",volume:"dplayer-volume",unlimited:"dplayer-danmaku-unlimited",danmaku:"dplayer-danmaku-show",subtitle:"dplayer-subtitle-show"},this.default={opacity:.7,volume:e.options.hasOwnProperty("volume")?e.options.volume:.7,unlimited:(e.options.danmaku&&e.options.danmaku.unlimited?1:0)||0,danmaku:1,subtitle:1},this.data={},this.init()}function ne(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}ne(T.prototype,[{key:"init",value:function(){var a,n=this;this.container.style.fontSize=this.options.fontSize,this.container.style.bottom=this.options.bottom,this.container.style.color=this.options.color,this.video.textTracks&&this.video.textTracks[0]&&((a=this.video.textTracks[0]).oncuechange=function(){var e,t=a.activeCues[0];n.container.innerHTML="",t&&((e=document.createElement("div")).appendChild(t.getCueAsHTML()),t=e.innerHTML.split(/\r?\n/).map(function(e){return"<p>".concat(e,"</p>")}).join(""),n.container.innerHTML=t),n.events.trigger("subtitle_change")})}},{key:"show",value:function(){this.container.classList.remove("dplayer-subtitle-hide"),this.events.trigger("subtitle_show")}},{key:"hide",value:function(){this.container.classList.add("dplayer-subtitle-hide"),this.events.trigger("subtitle_hide")}},{key:"toggle",value:function(){this.container.classList.contains("dplayer-subtitle-hide")?this.show():this.hide()}}]);var oe=T;function T(e,t,a,n){if(!(this instanceof T))throw new TypeError("Cannot call a class as a function");this.container=e,this.video=t,this.options=a,this.events=n,this.init()}function re(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}re(L.prototype,[{key:"set",value:function(e,t,a){t=Math.max(t,0),t=Math.min(t,1),this.elements[e].style[a]=100*t+"%"}},{key:"get",value:function(e){return parseFloat(this.elements[e].style.width)/100}}]);var ie=L;function L(e){if(!(this instanceof L))throw new TypeError("Cannot call a class as a function");this.elements={},this.elements.volume=e.volumeBar,this.elements.played=e.playedBar,this.elements.loaded=e.loadedBar,this.elements.danmaku=e.danmakuOpacityBar}function le(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}le(E.prototype,[{key:"init",value:function(){var t=this;this.types.map(function(e){return"fps"!==e&&t["init".concat(e,"Checker")](),e})}},{key:"initloadingChecker",value:function(){var e,t=this,a=0,n=!1;this.loadingChecker=setInterval(function(){t.enableloadingChecker&&(e=t.player.video.currentTime,n||e!==a||t.player.video.paused||(t.player.container.classList.add("dplayer-loading"),n=!0),n&&a<e&&!t.player.video.paused&&(t.player.container.classList.remove("dplayer-loading"),n=!1),a=e)},100)}},{key:"initfpsChecker",value:function(){var t=this;window.requestAnimationFrame(function(){var e;t.enablefpsChecker?(t.initfpsChecker(),t.fpsStart?(t.fpsIndex++,1e3<(e=new Date)-t.fpsStart&&(t.player.infoPanel.fps(t.fpsIndex/(e-t.fpsStart)*1e3),t.fpsStart=new Date,t.fpsIndex=0)):(t.fpsStart=new Date,t.fpsIndex=0)):(t.fpsStart=0,t.fpsIndex=0)})}},{key:"initinfoChecker",value:function(){var e=this;this.infoChecker=setInterval(function(){e.enableinfoChecker&&e.player.infoPanel.update()},1e3)}},{key:"enable",value:function(e){this["enable".concat(e,"Checker")]=!0,"fps"===e&&this.initfpsChecker()}},{key:"disable",value:function(e){this["enable".concat(e,"Checker")]=!1}},{key:"destroy",value:function(){var t=this;this.types.map(function(e){return t["enable".concat(e,"Checker")]=!1,t["".concat(e,"Checker")]&&clearInterval(t["".concat(e,"Checker")]),e})}}]);var se=E;function E(e){if(!(this instanceof E))throw new TypeError("Cannot call a class as a function");this.player=e,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},this.types=["loading","info","fps"],this.init()}function de(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}de(q.prototype,[{key:"switch",value:function(e){this.container.innerHTML=e,this.container.classList.add("dplayer-bezel-transition")}}]);var pe=q;function q(e){var t=this;if(!(this instanceof q))throw new TypeError("Cannot call a class as a function");this.container=e,this.container.addEventListener("animationend",function(){t.container.classList.remove("dplayer-bezel-transition")})}function ce(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}ce(B.prototype,[{key:"resize",value:function(e,t,a){this.container.style.width="".concat(e,"px"),this.container.style.height="".concat(t,"px"),this.container.style.top="".concat(2-t,"px"),this.barWidth=a}},{key:"show",value:function(){this.container.style.display="block",this.events&&this.events.trigger("thumbnails_show")}},{key:"move",value:function(e){this.container.style.backgroundPosition="-".concat(160*(Math.ceil(e/this.barWidth*100)-1),"px 0"),this.container.style.left="".concat(Math.min(Math.max(e-this.container.offsetWidth/2,-10),this.barWidth-150),"px")}},{key:"hide",value:function(){this.container.style.display="none",this.events&&this.events.trigger("thumbnails_hide")}}]);var ue=B;function B(e){if(!(this instanceof B))throw new TypeError("Cannot call a class as a function");this.container=e.container,this.barWidth=e.barWidth,this.container.style.backgroundImage="url('".concat(e.url,"')"),this.events=e.events}function ye(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}ye(M.prototype,[{key:"initPlayButton",value:function(){var e=this;this.player.template.playButton.addEventListener("click",function(){e.player.toggle()}),this.player.template.mobilePlayButton.addEventListener("click",function(){e.player.toggle()}),y.isMobile?(this.player.template.videoWrap.addEventListener("click",function(){e.toggle()}),this.player.template.controllerMask.addEventListener("click",function(){e.toggle()})):(this.player.template.videoWrap.addEventListener("click",function(){e.player.toggle()}),this.player.template.controllerMask.addEventListener("click",function(){e.player.toggle()}))}},{key:"initHighlights",value:function(){var n=this;this.player.on("durationchange",function(){if(1!==n.player.video.duration&&n.player.video.duration!==1/0&&n.player.options.highlight){var e=document.querySelectorAll(".dplayer-highlight");[].slice.call(e,0).forEach(function(e){n.player.template.playedBarWrap.removeChild(e)});for(var t,a=0;a<n.player.options.highlight.length;a++)n.player.options.highlight[a].text&&n.player.options.highlight[a].time&&((t=document.createElement("div")).classList.add("dplayer-highlight"),t.style.left=n.player.options.highlight[a].time/n.player.video.duration*100+"%",t.innerHTML='<span class="dplayer-highlight-text">'+n.player.options.highlight[a].text+"</span>",n.player.template.playedBarWrap.insertBefore(t,n.player.template.playedBarTime))}})}},{key:"initThumbnails",value:function(){var e=this;this.player.options.video.thumbnails&&(this.thumbnails=new ue({container:this.player.template.barPreview,barWidth:this.player.template.barWrap.offsetWidth,url:this.player.options.video.thumbnails,events:this.player.events}),this.player.on("loadedmetadata",function(){e.thumbnails.resize(160,e.player.video.videoHeight/e.player.video.videoWidth*160,e.player.template.barWrap.offsetWidth)}))}},{key:"initPlayedBar",value:function(){function t(e){e=((e.clientX||e.changedTouches[0].clientX)-y.getBoundingClientRectViewLeft(n.player.template.playedBarWrap))/n.player.template.playedBarWrap.clientWidth,e=Math.max(e,0),e=Math.min(e,1),n.player.bar.set("played",e,"width"),n.player.template.ptime.innerHTML=y.secondToTime(e*n.player.video.duration)}function a(e){document.removeEventListener(y.nameMap.dragEnd,a),document.removeEventListener(y.nameMap.dragMove,t),e=((e.clientX||e.changedTouches[0].clientX)-y.getBoundingClientRectViewLeft(n.player.template.playedBarWrap))/n.player.template.playedBarWrap.clientWidth,e=Math.max(e,0),e=Math.min(e,1),n.player.bar.set("played",e,"width"),n.player.seek(n.player.bar.get("played")*n.player.video.duration),n.player.timer.enable("progress")}var n=this;this.player.template.playedBarWrap.addEventListener(y.nameMap.dragStart,function(){n.player.timer.disable("progress"),document.addEventListener(y.nameMap.dragMove,t),document.addEventListener(y.nameMap.dragEnd,a)}),this.player.template.playedBarWrap.addEventListener(y.nameMap.dragMove,function(e){var t;n.player.video.duration&&(t=n.player.template.playedBarWrap.getBoundingClientRect().left,(e=(e.clientX||e.changedTouches[0].clientX)-t)<0||e>n.player.template.playedBarWrap.offsetWidth||(t=n.player.video.duration*(e/n.player.template.playedBarWrap.offsetWidth),y.isMobile&&n.thumbnails&&n.thumbnails.show(),n.thumbnails&&n.thumbnails.move(e),n.player.template.playedBarTime.style.left="".concat(e-(3600<=t?25:20),"px"),n.player.template.playedBarTime.innerText=y.secondToTime(t),n.player.template.playedBarTime.classList.remove("hidden")))}),this.player.template.playedBarWrap.addEventListener(y.nameMap.dragEnd,function(){y.isMobile&&n.thumbnails&&n.thumbnails.hide()}),y.isMobile||(this.player.template.playedBarWrap.addEventListener("mouseenter",function(){n.player.video.duration&&(n.thumbnails&&n.thumbnails.show(),n.player.template.playedBarTime.classList.remove("hidden"))}),this.player.template.playedBarWrap.addEventListener("mouseleave",function(){n.player.video.duration&&(n.thumbnails&&n.thumbnails.hide(),n.player.template.playedBarTime.classList.add("hidden"))}))}},{key:"initFullButton",value:function(){var e=this;this.player.template.browserFullButton.addEventListener("click",function(){e.player.fullScreen.toggle("browser")}),this.player.template.webFullButton.addEventListener("click",function(){e.player.fullScreen.toggle("web")})}},{key:"initVolumeButton",value:function(){function e(){document.removeEventListener(y.nameMap.dragEnd,e),document.removeEventListener(y.nameMap.dragMove,a),t.player.template.volumeButton.classList.remove("dplayer-volume-active")}var t=this,a=function(e){e=e||window.event,e=((e.clientX||e.changedTouches[0].clientX)-y.getBoundingClientRectViewLeft(t.player.template.volumeBarWrap)-5.5)/35;t.player.volume(e)};this.player.template.volumeBarWrapWrap.addEventListener("click",function(e){e=e||window.event,e=((e.clientX||e.changedTouches[0].clientX)-y.getBoundingClientRectViewLeft(t.player.template.volumeBarWrap)-5.5)/35;t.player.volume(e)}),this.player.template.volumeBarWrapWrap.addEventListener(y.nameMap.dragStart,function(){document.addEventListener(y.nameMap.dragMove,a),document.addEventListener(y.nameMap.dragEnd,e),t.player.template.volumeButton.classList.add("dplayer-volume-active")}),this.player.template.volumeButtonIcon.addEventListener("click",function(){t.player.video.muted?(t.player.video.muted=!1,t.player.switchVolumeIcon(),t.player.bar.set("volume",t.player.volume(),"width")):(t.player.video.muted=!0,t.player.template.volumeIcon.innerHTML=v.volumeOff,t.player.bar.set("volume",0,"width"))})}},{key:"initQualityButton",value:function(){var t=this;this.player.options.video.quality&&this.player.template.qualityList.addEventListener("click",function(e){e.target.classList.contains("dplayer-quality-item")&&t.player.switchQuality(e.target.dataset.index)})}},{key:"initScreenshotButton",value:function(){var a=this;this.player.options.screenshot&&this.player.template.camareButton.addEventListener("click",function(){var t,e=document.createElement("canvas");e.width=a.player.video.videoWidth,e.height=a.player.video.videoHeight,e.getContext("2d").drawImage(a.player.video,0,0,e.width,e.height),e.toBlob(function(e){t=URL.createObjectURL(e);e=document.createElement("a");e.href=t,e.download="DPlayer.png",e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(t)}),a.player.events.trigger("screenshot",t)})}},{key:"initAirplayButton",value:function(){this.player.options.airplay&&(window.WebKitPlaybackTargetAvailabilityEvent?this.player.video.addEventListener("webkitplaybacktargetavailabilitychanged",function(e){"available"===e.availability?this.template.airplayButton.disable=!1:this.template.airplayButton.disable=!0,this.template.airplayButton.addEventListener("click",function(){this.video.webkitShowPlaybackTargetPicker()}.bind(this))}.bind(this.player)):this.player.template.airplayButton.style.display="none")}},{key:"initSubtitleButton",value:function(){var e=this;this.player.options.subtitle&&(this.player.events.on("subtitle_show",function(){e.player.template.subtitleButton.dataset.balloon=e.player.tran("Hide subtitle"),e.player.template.subtitleButtonInner.style.opacity="",e.player.user.set("subtitle",1)}),this.player.events.on("subtitle_hide",function(){e.player.template.subtitleButton.dataset.balloon=e.player.tran("Show subtitle"),e.player.template.subtitleButtonInner.style.opacity="0.4",e.player.user.set("subtitle",0)}),this.player.template.subtitleButton.addEventListener("click",function(){e.player.subtitle.toggle()}))}},{key:"setAutoHide",value:function(){var e=this;this.show(),clearTimeout(this.autoHideTimer),this.autoHideTimer=setTimeout(function(){!e.player.video.played.length||e.player.paused||e.disableAutoHide||e.hide()},3e3)}},{key:"show",value:function(){this.player.container.classList.remove("dplayer-hide-controller")}},{key:"hide",value:function(){this.player.container.classList.add("dplayer-hide-controller"),this.player.setting.hide(),this.player.comment&&this.player.comment.hide()}},{key:"isShow",value:function(){return!this.player.container.classList.contains("dplayer-hide-controller")}},{key:"toggle",value:function(){this.isShow()?this.hide():this.show()}},{key:"destroy",value:function(){clearTimeout(this.autoHideTimer)}}]);var he=M;function M(e){var t=this;if(!(this instanceof M))throw new TypeError("Cannot call a class as a function");this.player=e,this.autoHideTimer=0,y.isMobile||(this.player.container.addEventListener("mousemove",function(){t.setAutoHide()}),this.player.container.addEventListener("click",function(){t.setAutoHide()}),this.player.on("play",function(){t.setAutoHide()}),this.player.on("pause",function(){t.setAutoHide()})),this.initPlayButton(),this.initThumbnails(),this.initPlayedBar(),this.initFullButton(),this.initQualityButton(),this.initScreenshotButton(),this.initSubtitleButton(),this.initHighlights(),y.isSafari&&this.initAirplayButton(),y.isMobile||this.initVolumeButton()}function me(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}me(z.prototype,[{key:"hide",value:function(){var e=this;this.player.template.settingBox.classList.remove("dplayer-setting-box-open"),this.player.template.mask.classList.remove("dplayer-mask-show"),setTimeout(function(){e.player.template.settingBox.classList.remove("dplayer-setting-box-narrow"),e.player.template.settingBox.classList.remove("dplayer-setting-box-speed")},300),this.player.controller.disableAutoHide=!1}},{key:"show",value:function(){this.player.template.settingBox.classList.add("dplayer-setting-box-open"),this.player.template.mask.classList.add("dplayer-mask-show"),this.player.controller.disableAutoHide=!0}}]);var fe=z;function z(e){var t=this;if(!(this instanceof z))throw new TypeError("Cannot call a class as a function");this.player=e,this.player.template.mask.addEventListener("click",function(){t.hide()}),this.player.template.settingButton.addEventListener("click",function(){t.show()}),this.loop=this.player.options.loop,this.player.template.loopToggle.checked=this.loop,this.player.template.loop.addEventListener("click",function(){t.player.template.loopToggle.checked=!t.player.template.loopToggle.checked,t.player.template.loopToggle.checked?t.loop=!0:t.loop=!1,t.hide()}),this.showDanmaku=this.player.user.get("danmaku"),this.showDanmaku||this.player.danmaku&&this.player.danmaku.hide(),this.player.template.showDanmakuToggle.checked=this.showDanmaku,this.player.template.showDanmaku.addEventListener("click",function(){t.player.template.showDanmakuToggle.checked=!t.player.template.showDanmakuToggle.checked,t.player.template.showDanmakuToggle.checked?(t.showDanmaku=!0,t.player.danmaku.show()):(t.showDanmaku=!1,t.player.danmaku.hide()),t.player.user.set("danmaku",t.showDanmaku?1:0),t.hide()}),this.unlimitDanmaku=this.player.user.get("unlimited"),this.player.template.unlimitDanmakuToggle.checked=this.unlimitDanmaku,this.player.template.unlimitDanmaku.addEventListener("click",function(){t.player.template.unlimitDanmakuToggle.checked=!t.player.template.unlimitDanmakuToggle.checked,t.player.template.unlimitDanmakuToggle.checked?(t.unlimitDanmaku=!0,t.player.danmaku.unlimit(!0)):(t.unlimitDanmaku=!1,t.player.danmaku.unlimit(!1)),t.player.user.set("unlimited",t.unlimitDanmaku?1:0),t.hide()}),this.player.template.speed.addEventListener("click",function(){t.player.template.settingBox.classList.add("dplayer-setting-box-narrow"),t.player.template.settingBox.classList.add("dplayer-setting-box-speed")});for(var a,n,o=0;o<this.player.template.speedItem.length;o++)!function(e){t.player.template.speedItem[e].addEventListener("click",function(){t.player.speed(t.player.template.speedItem[e].dataset.speed),t.hide()})}(o);this.player.danmaku&&(this.player.on("danmaku_opacity",function(e){t.player.bar.set("danmaku",e,"width"),t.player.user.set("opacity",e)}),this.player.danmaku.opacity(this.player.user.get("opacity")),a=function(e){e=e||window.event,e=((e.clientX||e.changedTouches[0].clientX)-y.getBoundingClientRectViewLeft(t.player.template.danmakuOpacityBarWrap))/130,e=Math.max(e,0);e=Math.min(e,1),t.player.danmaku.opacity(e)},n=function e(){document.removeEventListener(y.nameMap.dragEnd,e),document.removeEventListener(y.nameMap.dragMove,a),t.player.template.danmakuOpacityBox.classList.remove("dplayer-setting-danmaku-active")},this.player.template.danmakuOpacityBarWrapWrap.addEventListener("click",function(e){e=e||window.event,e=((e.clientX||e.changedTouches[0].clientX)-y.getBoundingClientRectViewLeft(t.player.template.danmakuOpacityBarWrap))/130,e=Math.max(e,0);e=Math.min(e,1),t.player.danmaku.opacity(e)}),this.player.template.danmakuOpacityBarWrapWrap.addEventListener(y.nameMap.dragStart,function(){document.addEventListener(y.nameMap.dragMove,a),document.addEventListener(y.nameMap.dragEnd,n),t.player.template.danmakuOpacityBox.classList.add("dplayer-setting-danmaku-active")}))}function be(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}be(C.prototype,[{key:"show",value:function(){this.player.controller.disableAutoHide=!0,this.player.template.controller.classList.add("dplayer-controller-comment"),this.player.template.mask.classList.add("dplayer-mask-show"),this.player.container.classList.add("dplayer-show-controller"),this.player.template.commentInput.focus()}},{key:"hide",value:function(){this.player.template.controller.classList.remove("dplayer-controller-comment"),this.player.template.mask.classList.remove("dplayer-mask-show"),this.player.container.classList.remove("dplayer-show-controller"),this.player.controller.disableAutoHide=!1,this.hideSetting()}},{key:"showSetting",value:function(){this.player.template.commentSettingBox.classList.add("dplayer-comment-setting-open")}},{key:"hideSetting",value:function(){this.player.template.commentSettingBox.classList.remove("dplayer-comment-setting-open")}},{key:"toggleSetting",value:function(){this.player.template.commentSettingBox.classList.contains("dplayer-comment-setting-open")?this.hideSetting():this.showSetting()}},{key:"send",value:function(){var e=this;this.player.template.commentInput.blur(),this.player.template.commentInput.value.replace(/^\s+|\s+$/g,"")?this.player.danmaku.send({text:this.player.template.commentInput.value,color:y.color2Number(this.player.container.querySelector(".dplayer-comment-setting-color input:checked").value),type:parseInt(this.player.container.querySelector(".dplayer-comment-setting-type input:checked").value)},function(){e.player.template.commentInput.value="",e.hide()}):this.player.notice(this.player.tran("Please input danmaku content!"))}}]);var ve=C;function C(e){var t=this;if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");this.player=e,this.player.template.mask.addEventListener("click",function(){t.hide()}),this.player.template.commentButton.addEventListener("click",function(){t.show()}),this.player.template.commentSettingButton.addEventListener("click",function(){t.toggleSetting()}),this.player.template.commentColorSettingBox.addEventListener("click",function(){var e;t.player.template.commentColorSettingBox.querySelector("input:checked+span")&&(e=t.player.template.commentColorSettingBox.querySelector("input:checked").value,t.player.template.commentSettingFill.style.fill=e,t.player.template.commentInput.style.color=e,t.player.template.commentSendFill.style.fill=e)}),this.player.template.commentInput.addEventListener("click",function(){t.hideSetting()}),this.player.template.commentInput.addEventListener("keydown",function(e){13===(e||window.event).keyCode&&t.send()}),this.player.template.commentSendButton.addEventListener("click",function(){t.send()})}function ge(r){if(!(this instanceof ge))throw new TypeError("Cannot call a class as a function");r.options.hotkey&&document.addEventListener("keydown",function(e){if(r.focus){var t=document.activeElement.tagName.toUpperCase(),a=document.activeElement.getAttribute("contenteditable");if("INPUT"!==t&&"TEXTAREA"!==t&&""!==a&&"true"!==a){var n,o=e||window.event;switch(o.keyCode){case 32:o.preventDefault(),r.toggle();break;case 37:o.preventDefault(),r.options.live||(r.seek(r.video.currentTime-5),r.controller.setAutoHide());break;case 39:o.preventDefault(),r.options.live||(r.seek(r.video.currentTime+5),r.controller.setAutoHide());break;case 38:o.preventDefault(),n=r.volume()+.1,r.volume(n);break;case 40:o.preventDefault(),n=r.volume()-.1,r.volume(n)}}}}),document.addEventListener("keydown",function(e){27===(e||window.event).keyCode&&r.fullScreen.isFullScreen("web")&&r.fullScreen.cancel("web")})}function we(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}we(A.prototype,[{key:"show",value:function(e,t){this.player.template.menu.classList.add("dplayer-menu-show");var a=this.player.container.getBoundingClientRect();e+this.player.template.menu.offsetWidth>=a.width?(this.player.template.menu.style.right=a.width-e+"px",this.player.template.menu.style.left="initial"):(this.player.template.menu.style.left=e+"px",this.player.template.menu.style.right="initial"),t+this.player.template.menu.offsetHeight>=a.height?(this.player.template.menu.style.bottom=a.height-t+"px",this.player.template.menu.style.top="initial"):(this.player.template.menu.style.top=t+"px",this.player.template.menu.style.bottom="initial"),this.player.template.mask.classList.add("dplayer-mask-show"),this.shown=!0,this.player.events.trigger("contextmenu_show")}},{key:"hide",value:function(){this.player.template.mask.classList.remove("dplayer-mask-show"),this.player.template.menu.classList.remove("dplayer-menu-show"),this.shown=!1,this.player.events.trigger("contextmenu_hide")}}]);var xe=A;function A(e){var a=this;if(!(this instanceof A))throw new TypeError("Cannot call a class as a function");this.player=e,this.shown=!1,Array.prototype.slice.call(this.player.template.menuItem).forEach(function(e,t){a.player.options.contextmenu[t].click&&e.addEventListener("click",function(){a.player.options.contextmenu[t].click(a.player),a.hide()})}),this.player.container.addEventListener("contextmenu",function(e){var t;a.shown?a.hide():((e=e||window.event).preventDefault(),t=a.player.container.getBoundingClientRect(),a.show(e.clientX-t.left,e.clientY-t.top),a.player.template.mask.addEventListener("click",function(){a.hide()}))})}function ke(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}ke(O.prototype,[{key:"show",value:function(){this.beginTime=Date.now(),this.update(),this.player.timer.enable("info"),this.player.timer.enable("fps"),this.container.classList.remove("dplayer-info-panel-hide")}},{key:"hide",value:function(){this.player.timer.disable("info"),this.player.timer.disable("fps"),this.container.classList.add("dplayer-info-panel-hide")}},{key:"triggle",value:function(){this.container.classList.contains("dplayer-info-panel-hide")?this.show():this.hide()}},{key:"update",value:function(){this.template.infoVersion.innerHTML="v".concat("1.26.0"," ").concat("63275c8"),this.template.infoType.innerHTML=this.player.type,this.template.infoUrl.innerHTML=this.player.options.video.url,this.template.infoResolution.innerHTML="".concat(this.player.video.videoWidth," x ").concat(this.player.video.videoHeight),this.template.infoDuration.innerHTML=this.player.video.duration,this.player.options.danmaku&&(this.template.infoDanmakuId.innerHTML=this.player.options.danmaku.id,this.template.infoDanmakuApi.innerHTML=this.player.options.danmaku.api,this.template.infoDanmakuAmount.innerHTML=this.player.danmaku.dan.length)}},{key:"fps",value:function(e){this.template.infoFPS.innerHTML="".concat(e.toFixed(1))}}]);var Se=O,i=t(1),Te=t.n(i);function O(e){var t=this;if(!(this instanceof O))throw new TypeError("Cannot call a class as a function");this.container=e.template.infoPanel,this.template=e.template,this.video=e.video,this.player=e,this.template.infoPanelClose.addEventListener("click",function(){t.hide()})}function Le(t,e){var a,n=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)),n}function Ee(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var qe=0,P=[],d=(l=[{key:"version",get:function(){return"1.26.0"}}],Ee((s=F).prototype,[{key:"seek",value:function(e){e=Math.max(e,0),this.video.duration&&(e=Math.min(e,this.video.duration)),this.video.currentTime<e?this.notice("".concat(this.tran("FF")," ").concat((e-this.video.currentTime).toFixed(0)," ").concat(this.tran("s"))):this.video.currentTime>e&&this.notice("".concat(this.tran("REW")," ").concat((this.video.currentTime-e).toFixed(0)," ").concat(this.tran("s"))),this.video.currentTime=e,this.danmaku&&this.danmaku.seek(),this.bar.set("played",e/this.video.duration,"width"),this.template.ptime.innerHTML=y.secondToTime(e)}},{key:"play",value:function(e){var t=this;if(this.paused=!1,this.video.paused&&!y.isMobile&&this.bezel.switch(v.play),this.template.playButton.innerHTML=v.pause,this.template.mobilePlayButton.innerHTML=v.pause,e||_.a.resolve(this.video.play()).catch(function(){t.pause()}).then(function(){}),this.timer.enable("loading"),this.container.classList.remove("dplayer-paused"),this.container.classList.add("dplayer-playing"),this.danmaku&&this.danmaku.play(),this.options.mutex)for(var a=0;a<P.length;a++)this!==P[a]&&P[a].pause()}},{key:"pause",value:function(e){this.paused=!0,this.container.classList.remove("dplayer-loading"),this.video.paused||y.isMobile||this.bezel.switch(v.pause),this.template.playButton.innerHTML=v.play,this.template.mobilePlayButton.innerHTML=v.play,e||this.video.pause(),this.timer.disable("loading"),this.container.classList.remove("dplayer-playing"),this.container.classList.add("dplayer-paused"),this.danmaku&&this.danmaku.pause()}},{key:"switchVolumeIcon",value:function(){.95<=this.volume()?this.template.volumeIcon.innerHTML=v.volumeUp:0<this.volume()?this.template.volumeIcon.innerHTML=v.volumeDown:this.template.volumeIcon.innerHTML=v.volumeOff}},{key:"volume",value:function(e,t,a){var n;return e=parseFloat(e),isNaN(e)||(e=Math.max(e,0),e=Math.min(e,1),this.bar.set("volume",e,"width"),n="".concat((100*e).toFixed(0),"%"),this.template.volumeBarWrapWrap.dataset.balloon=n,t||this.user.set("volume",e),a||this.notice("".concat(this.tran("Volume")," ").concat((100*e).toFixed(0),"%")),this.video.volume=e,this.video.muted&&(this.video.muted=!1),this.switchVolumeIcon()),this.video.volume}},{key:"toggle",value:function(){this.video.paused?this.play():this.pause()}},{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"switchVideo",value:function(e,t){this.pause(),this.video.poster=e.pic||"",this.video.src=e.url,this.initMSE(this.video,e.type||"auto"),t&&(this.template.danmakuLoading.style.display="block",this.bar.set("played",0,"width"),this.bar.set("loaded",0,"width"),this.template.ptime.innerHTML="00:00",this.template.danmaku.innerHTML="",this.danmaku)&&this.danmaku.reload({id:t.id,address:t.api,token:t.token,maximum:t.maximum,addition:t.addition,user:t.user})}},{key:"initMSE",value:function(e,t){var a,n,o,r,i,l,s=this;if(this.type=t,this.options.video.customType&&this.options.video.customType[t])"[object Function]"===Object.prototype.toString.call(this.options.video.customType[t])?this.options.video.customType[t](this.video,this):console.error("Illegal customType: ".concat(t));else switch("auto"===this.type&&(/m3u8(#|\?|$)/i.exec(e.src)?this.type="hls":/.flv(#|\?|$)/i.exec(e.src)?this.type="flv":/.mpd(#|\?|$)/i.exec(e.src)?this.type="dash":this.type="normal"),"hls"===this.type&&(e.canPlayType("application/x-mpegURL")||e.canPlayType("application/vnd.apple.mpegURL"))&&(this.type="normal"),this.type){case"hls":window.Hls?window.Hls.isSupported()?(o=this.options.pluginOptions.hls,a=new window.Hls(o),(this.plugins.hls=a).loadSource(e.src),a.attachMedia(e),this.events.on("destroy",function(){a.destroy(),delete s.plugins.hls})):this.notice("Error: Hls is not supported."):this.notice("Error: Can't find Hls.");break;case"flv":window.flvjs?window.flvjs.isSupported()?(n=window.flvjs.createPlayer(Object.assign(this.options.pluginOptions.flv.mediaDataSource||{},{type:"flv",url:e.src}),this.options.pluginOptions.flv.config),(this.plugins.flvjs=n).attachMediaElement(e),n.load(),this.events.on("destroy",function(){n.unload(),n.detachMediaElement(),n.destroy(),delete s.plugins.flvjs})):this.notice("Error: flvjs is not supported."):this.notice("Error: Can't find flvjs.");break;case"dash":window.dashjs?(o=window.dashjs.MediaPlayer().create().initialize(e,e.src,!1),r=this.options.pluginOptions.dash,o.updateSettings(r),this.plugins.dash=o,this.events.on("destroy",function(){window.dashjs.MediaPlayer().reset(),delete s.plugins.dash})):this.notice("Error: Can't find dashjs.");break;case"webtorrent":window.WebTorrent?window.WebTorrent.WEBRTC_SUPPORT?(this.container.classList.add("dplayer-loading"),r=this.options.pluginOptions.webtorrent,i=new window.WebTorrent(r),this.plugins.webtorrent=i,l=e.src,e.src="",e.preload="metadata",e.addEventListener("durationchange",function(){return s.container.classList.remove("dplayer-loading")},{once:!0}),i.add(l,function(e){e.files.find(function(e){return e.name.endsWith(".mp4")}).renderTo(s.video,{autoplay:s.options.autoplay,controls:!1})}),this.events.on("destroy",function(){i.remove(l),i.destroy(),delete s.plugins.webtorrent})):this.notice("Error: Webtorrent is not supported."):this.notice("Error: Can't find Webtorrent.")}}},{key:"initVideo",value:function(t,e){var a=this;this.initMSE(t,e),this.on("durationchange",function(){1!==t.duration&&t.duration!==1/0&&(a.template.dtime.innerHTML=y.secondToTime(t.duration))}),this.on("progress",function(){var e=t.buffered.length?t.buffered.end(t.buffered.length-1)/t.duration:0;a.bar.set("loaded",e,"width")}),this.on("error",function(){a.video.error&&a.tran&&a.notice&&"webtorrent"!==a.type&&a.notice(a.tran("Video load failed"),-1)}),this.on("ended",function(){a.bar.set("played",1,"width"),a.setting.loop?(a.seek(0),a.play()):a.pause(),a.danmaku&&(a.danmaku.danIndex=0)}),this.on("play",function(){a.paused&&a.play(!0)}),this.on("pause",function(){a.paused||a.pause(!0)}),this.on("timeupdate",function(){a.bar.set("played",a.video.currentTime/a.video.duration,"width");var e=y.secondToTime(a.video.currentTime);a.template.ptime.innerHTML!==e&&(a.template.ptime.innerHTML=e)});for(var n=0;n<this.events.videoEvents.length;n++)!function(e){t.addEventListener(a.events.videoEvents[e],function(){a.events.trigger(a.events.videoEvents[e])})}(n);this.volume(this.user.get("volume"),!0,!0),this.options.subtitle&&(this.subtitle=new oe(this.template.subtitle,this.video,this.options.subtitle,this.events),this.user.get("subtitle")||this.subtitle.hide())}},{key:"switchQuality",value:function(e){var t,a=this;e="string"==typeof e?parseInt(e):e,this.qualityIndex===e||this.switchingQuality||(this.qualityIndex=e,this.switchingQuality=!0,this.quality=this.options.video.quality[e],this.template.qualityButton.innerHTML=this.quality.name,t=this.video.paused,this.video.pause(),e=Te()({current:!1,pic:null,screenshot:this.options.screenshot,preload:"auto",url:this.quality.url,subtitle:this.options.subtitle}),e=(new DOMParser).parseFromString(e,"text/html").body.firstChild,this.template.videoWrap.insertBefore(e,this.template.videoWrap.getElementsByTagName("div")[0]),this.prevVideo=this.video,this.video=e,this.initVideo(this.video,this.quality.type||this.options.video.type),this.seek(this.prevVideo.currentTime),this.notice("".concat(this.tran("Switching to")," ").concat(this.quality.name," ").concat(this.tran("quality")),-1),this.events.trigger("quality_start",this.quality),this.on("canplay",function(){a.prevVideo&&(a.video.currentTime!==a.prevVideo.currentTime?a.seek(a.prevVideo.currentTime):(a.template.videoWrap.removeChild(a.prevVideo),a.video.classList.add("dplayer-video-current"),t||a.video.play(),a.prevVideo=null,a.notice("".concat(a.tran("Switched to")," ").concat(a.quality.name," ").concat(a.tran("quality"))),a.switchingQuality=!1,a.events.trigger("quality_end")))}))}},{key:"notice",value:function(e){var t=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2e3,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.8;this.template.notice.innerHTML=e,this.template.notice.style.opacity=n,this.noticeTime&&clearTimeout(this.noticeTime),this.events.trigger("notice_show",e),0<a&&(this.noticeTime=setTimeout(function(){t.template.notice.style.opacity=0,t.events.trigger("notice_hide")},a))}},{key:"resize",value:function(){this.danmaku&&this.danmaku.resize(),this.controller.thumbnails&&this.controller.thumbnails.resize(160,this.video.videoHeight/this.video.videoWidth*160,this.template.barWrap.offsetWidth),this.events.trigger("resize")}},{key:"speed",value:function(e){this.video.playbackRate=e}},{key:"destroy",value:function(){P.splice(P.indexOf(this),1),this.pause(),this.controller.destroy(),this.timer.destroy(),this.video.src="",this.container.innerHTML="",this.events.trigger("destroy")}}]),Ee(s,l),F);function F(e){var t=this;if(!(this instanceof F))throw new TypeError("Cannot call a class as a function");this.options=function(e){var t,a={container:e.element||document.getElementsByClassName("dplayer")[0],live:!1,autoplay:!1,theme:"#B7DAFF",loop:!1,lang:(navigator.language||navigator.browserLanguage).toLowerCase(),screenshot:!1,airplay:!0,hotkey:!0,preload:"metadata",volume:.7,playbackSpeed:[.5,.75,1,1.25,1.5,2],apiBackend:Y,video:{},contextmenu:[],mutex:!0,pluginOptions:{hls:{},flv:{},dash:{},webtorrent:{}}};for(t in a)a.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=a[t]);return e.video&&!e.video.type&&(e.video.type="auto"),"object"===o(e.danmaku)&&e.danmaku&&!e.danmaku.user&&(e.danmaku.user="DIYgod"),e.subtitle&&(e.subtitle.type||(e.subtitle.type="webvtt"),e.subtitle.fontSize||(e.subtitle.fontSize="20px"),e.subtitle.bottom||(e.subtitle.bottom="40px"),!e.subtitle.color)&&(e.subtitle.color="#FFF"),e.video.quality&&(e.video.url=e.video.quality[e.video.defaultQuality].url),e.lang&&(e.lang=e.lang.toLowerCase()),e.contextmenu=e.contextmenu.concat([{text:"Video info",click:function(e){e.infoPanel.triggle()}},{text:"About author",link:"https://diygod.me"},{text:"DPlayer v".concat("1.26.0"),link:"https://github.com/MoePlayer/DPlayer"}]),e}(function(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Le(Object(o),!0).forEach(function(e){var t,a;t=n,a=o[e=e],e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Le(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}({preload:"webtorrent"===e.video.type?"none":"metadata"},e)),this.options.video.quality&&(this.qualityIndex=this.options.video.defaultQuality,this.quality=this.options.video.quality[this.options.video.defaultQuality]),this.tran=new D(this.options.lang).tran,this.events=new Z,this.user=new ae(this),this.container=this.options.container,this.container.classList.add("dplayer"),this.options.danmaku||this.container.classList.add("dplayer-no-danmaku"),this.options.live&&this.container.classList.add("dplayer-live"),y.isMobile&&this.container.classList.add("dplayer-mobile"),this.arrow=this.container.offsetWidth<=500,this.arrow&&this.container.classList.add("dplayer-arrow"),this.template=new X({container:this.container,options:this.options,index:qe,tran:this.tran}),this.video=this.template.video,this.bar=new ie(this.template),this.bezel=new pe(this.template.bezel),this.fullScreen=new ee(this),this.controller=new he(this),this.options.danmaku&&(this.danmaku=new J({container:this.template.danmaku,opacity:this.user.get("opacity"),callback:function(){setTimeout(function(){t.template.danmakuLoading.style.display="none",t.options.autoplay&&t.play()},0)},error:function(e){t.notice(e)},apiBackend:this.options.apiBackend,borderColor:this.options.theme,height:this.arrow?24:30,time:function(){return t.video.currentTime},unlimited:this.user.get("unlimited"),api:{id:this.options.danmaku.id,address:this.options.danmaku.api,token:this.options.danmaku.token,maximum:this.options.danmaku.maximum,addition:this.options.danmaku.addition,user:this.options.danmaku.user},events:this.events,tran:function(e){return t.tran(e)}}),this.comment=new ve(this)),this.setting=new fe(this),this.plugins={},document.addEventListener("click",function(){t.focus=!1},!0),this.container.addEventListener("click",function(){t.focus=!0},!0),this.paused=!0,this.timer=new se(this),this.hotkey=new ge(this),this.contextmenu=new xe(this),this.initVideo(this.video,this.quality&&this.quality.type||this.options.video.type),this.infoPanel=new Se(this),!this.danmaku&&this.options.autoplay&&this.play(),qe++,P.push(this)}console.log("\n".concat(" %c DPlayer v","1.26.0"," ").concat("63275c8"," %c http://dplayer.js.org ","\n","\n"),"color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;"),e.default=d}],n={},o.m=a,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=58).default;function o(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},a[e].call(t.exports,t,t.exports,o),t.l=!0,t)).exports}var a,n});
;
$(document).ready(function () {
  function start() {
    (function (window, document) {
      function getQuery(str) {
        var reg = new RegExp("(^|&)" + str + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]);
        return null;
      }

      var Base64 = {
        _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", encode: function (e) {
          var t = "";
          var n, r, i, s, o, u, a;
          var f = 0;
          e = Base64._utf8_encode(e);
          while (f < e.length) {
            n = e.charCodeAt(f++);
            r = e.charCodeAt(f++);
            i = e.charCodeAt(f++);
            s = n >> 2;
            o = (n & 3) << 4 | r >> 4;
            u = (r & 15) << 2 | i >> 6;
            a = i & 63;
            if (isNaN(r)) {
              u = a = 64
            } else if (isNaN(i)) {
              a = 64
            }
            t = t + this._keyStr.charAt(s) + this._keyStr.charAt(o) + this._keyStr.charAt(u) + this._keyStr.charAt(a)
          }
          return t
        }, decode: function (e) {
          var t = "";
          var n, r, i;
          var s, o, u, a;
          var f = 0;
          e = e.replace(/[^A-Za-z0-9\+\/\=]/g, "");
          while (f < e.length) {
            s = this._keyStr.indexOf(e.charAt(f++));
            o = this._keyStr.indexOf(e.charAt(f++));
            u = this._keyStr.indexOf(e.charAt(f++));
            a = this._keyStr.indexOf(e.charAt(f++));
            n = s << 2 | o >> 4;
            r = (o & 15) << 4 | u >> 2;
            i = (u & 3) << 6 | a;
            t = t + String.fromCharCode(n);
            if (u != 64) {
              t = t + String.fromCharCode(r)
            }
            if (a != 64) {
              t = t + String.fromCharCode(i)
            }
          }
          t = Base64._utf8_decode(t);
          return t
        }, _utf8_encode: function (e) {
          e = e.replace(/\r\n/g, "\n");
          var t = "";
          for (var n = 0; n < e.length; n++) {
            var r = e.charCodeAt(n);
            if (r < 128) {
              t += String.fromCharCode(r)
            } else if (r > 127 && r < 2048) {
              t += String.fromCharCode(r >> 6 | 192);
              t += String.fromCharCode(r & 63 | 128)
            } else {
              t += String.fromCharCode(r >> 12 | 224);
              t += String.fromCharCode(r >> 6 & 63 | 128);
              t += String.fromCharCode(r & 63 | 128)
            }
          }
          return t
        }, _utf8_decode: function (e) {
          var t = "";
          var n = 0;
          var r = c1 = c2 = 0;
          while (n < e.length) {
            r = e.charCodeAt(n);
            if (r < 128) {
              t += String.fromCharCode(r);
              n++
            } else if (r > 191 && r < 224) {
              c2 = e.charCodeAt(n + 1);
              t += String.fromCharCode((r & 31) << 6 | c2 & 63);
              n += 2
            } else {
              c2 = e.charCodeAt(n + 1);
              c3 = e.charCodeAt(n + 2);
              t += String.fromCharCode((r & 15) << 12 | (c2 & 63) << 6 | c3 & 63);
              n += 3
            }
          }
          return t
        }
      }


      function encrypt(text, key) {
        //
        var result = "";
        text = Base64.encode(text);
        for (var i = 0; i < text.length; i++) {
          result += String.fromCharCode(key.charCodeAt(i % key.length) ^ text.charCodeAt(i));
        }
        return encodeURIComponent(result);
      }

      function getEncryptKey() {
        var key = "";
        for (var i = 0; i < 8; i++) {
          key += String.fromCharCode(Math.floor(Math.random() * 26) + 97);
        }
        return key;
      }

      var videoEle = document.getElementById('video');
      var videoUrl = videoEle.src;
      var fileName = videoUrl.substring(videoUrl.lastIndexOf('/') + 1).replace(/\?.*$/ig, '');
      //console.log(fileName);
      var videoPoster = videoEle.poster;
      var videoSetting = {
        url: videoUrl,
        type: "hls",
      }

      var qualityList = [];
      if (videoEle.dataset.quality) {
        qualityList = JSON.parse(videoEle.dataset.quality || '[]');
      } else {
        qualityList = JSON.parse(videoEle.getAttribute('data-quality') || "[]");
      }
      var eid = videoEle.getAttribute('data-id') || "";
      var adloading = {
        "imgsrc": videoPoster,
        "url": "#"
      }

      function initVideo(callback) {
        try {
          videoSetting = {
            url: videoUrl,
            pic: videoPoster
          };
          if (qualityList && qualityList.length > 0) {
            qualityList = qualityList.map(function (set) {
              set.type = set.type || "hls";
              set.poster = set.poster || videoPoster;
              return set;
            }, qualityList);
            videoSetting.quality = qualityList;
            // console.log(videoSetting.quality);
            videoSetting.defaultQuality = 0;
          }
        } catch (e) {
          console.log('qualityError', e);
        }
        //console.log('videoSetting', videoSetting);
        var playerElement = document.getElementById("player");
        var playerOption = {
          container: playerElement,
          autoplay: false,
          theme: '#303030',
          loop: true,
          lang: 'zh-cn',
          screenshot: true,
          hotkey: true,
          preload: 'none',
          logo: "",
          volume: 0.7,
          mutex: true,
          video: Object.assign(videoSetting, {pic: videoPoster}),
          poster: adloading.imgsrc,
          images: {
            //loading: adloading,
            //paused : adloading
          }
        };
        window.dplayer = new DPlayer(playerOption)

        window.dplayer.oldSwitchQuality = window.dplayer.switchQuality;
        var instance, playUrl;
        window.dplayer.switchQuality = function (e) {
          instance = this;
          if (qualityList.length < 1) return;
          if (e == -1 || e >= qualityList.length) {
            e = Math.max(0, qualityList.length - 1);
          }
          // 
          window.dplayer.oldSwitchQuality(e);
          storage('quality', e);
        };
        window.dplayer.switchQuality(storage('quality') || 0);
        window.dplayer.on('error', function () {
          if (!instance.switchingQuality) { //

          } else if (instance) {
            // video DOM canPlay 
            instance.template.videoWrap.removeChild(instance.prevVideo);
            instance.video.classList.add('dplayer-video-current');
            instance.prevVideo = null;
            instance.switchingQuality = false;
            instance.events.trigger('quality_end');
          }
        })

        window.dplayer.on('ended', function () {
          window.playerEnded && window.playerEnded(window.dplayer);
        })

        function errorHandler(msg) {
        }

        function loadedMetaDataHandler() {
        }

        function getVideoID() {
          try {
            var videoID = videoEle.dataset.id;
          } catch (e) {
            videoID = '';
          }
          return videoID;
        }

        function getTopDomain() {
          var host = window.location.host;
          var topDomain = host.split('.').slice(-2).join('.');
          return topDomain;
        }

        var timeKey = 'seek_' + getVideoID();
        if (timeKey) {
          var time = storage(timeKey);
          if (time) {
            window.dplayer.seek(time);
          }
        }

        function throttle(fn, delay) {
          var timer = null;
          return function () {
            var context = this, args = arguments;
            if (timer) {
              return;
            }
            clearTimeout(timer);
            timer = setTimeout(function () {
              fn.apply(context, args);
              timer = null;
            }, delay);
          }
        }

        // window.dplayer.on('error', errorHandler);
        window.dplayer.on('loadedmetadata', loadedMetaDataHandler);
        window.dplayer.on('play', playHandler);
        window.dplayer.on('canplay', playHandler);
        // 
        window.dplayer.on('timeupdate', throttle(function () {
          // console.log('Time', window.dplayer.video.currentTime);
          storage(timeKey, window.dplayer.video.currentTime);
        }, 1500));


        callback && callback(window.dplayer);

        function playHandler() {
        }
      }

      var road = getQuery('road') || storage('play-road');

      function startRoad() {
        initVideo();
      }

      // lazy load poster
      function base64ToBlob(base64) {
        var binary = atob(base64);
        var len = binary.length;
        var buffer = new ArrayBuffer(len);
        var view = new Uint8Array(buffer);
        for (var i = 0; i < len; i++) {
          view[i] = binary.charCodeAt(i);
        }
        var blob = new Blob([view]);
        return blob;
      }

      var lazyPoster = videoEle.getAttribute('data-poster');
      if (lazyPoster) {
        $.ajax({
          headers: {
            'Accept': 'text/plain',
          },
          type: 'get',
          cache: true,
          url: lazyPoster,
          crossDomain: true,
          success: function (data) {
            if (data.substring(0, 4) !== 'data') {
              data = data.replace(/\#/ig, '/').replace(/\$/ig, '+')
              try {
                var urlCreator = window.URL || window.webkitURL;
                var blob = base64ToBlob(data);
                data = urlCreator.createObjectURL(blob);
              } catch (e) {
                data = 'data:;base64,' + data;
              }
            }
            videoPoster = data;
          },
          complete: function () {
            startRoad(road);
          }
        })
      } else {
        startRoad(road);
      }


    })(window, document);
  }

  function waitVideoTag() {
    var pos = $('#player').html().search(/<video/ig);
    if (pos > -1) {
      start();
      return true;
    }
    setTimeout(function () {
      waitVideoTag();
    }, 600);
    return false;
  }

  waitVideoTag();
});;

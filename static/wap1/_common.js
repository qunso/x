/*[CDN]*/function login(){$.cookie("ss_username")?document.writeln("<a class='w' href='/bookcase/' title='我的书架'>书架</a>"):document.writeln("<a class='w' href='/login/'>登录</a>")}function reloadcode(){newcode=$("#showcode").prop("src")+"?"+Math.random(),$("#showcode").prop("src",newcode)}function reloadcode1(){newcode=$("#showcode1").prop("src")+"?"+Math.random(),$("#showcode1").prop("src",newcode)}function register_check(){return""==$("#regname").val()||""==$("#regpass").val()||""==$("#repass").val()||""==$("#email").val()||""==$("#authcode").val()?(alert("每项都必须填写"),!1):$("#regpass").val()===$("#repass").val()||(alert("两次输入的密码不一致"),!1)}function addbookcase(e,t,o,a){if($.cookie("ss_userid")&&-1!=$.cookie("PHPSESSID"))rico_data={articleid:e,articlename:t,chapterid:o,chaptername:a},$.ajax({type:"post",url:"/addbookcase/",data:rico_data,success:function(e){alert(e)}});else{if(!window.confirm("\n永久书架需要登录才能使用，转到登录页面吗？"))return;window.location.href="/login/"}}function delbookcase(e){window.confirm("\n确定要删除吗？")&&$.cookie("ss_userid")&&-1!=$.cookie("PHPSESSID")&&(rico_data={articleid:e},$.ajax({type:"post",url:"/delbookcase/",data:rico_data,success:function(e){alert(e),window.location.reload()}}))}var _num=100;function LastRead(){this.bookList="bookList"}function showbook(){var e,t=document.getElementById("showbook"),o="";if((e=(e=lastread.getBook()).reverse()).length)for(var a=0;a<e.length;a++)o+='<div class="FPsectionThree-content"><p class="FPsectionThree-content-first"><span><a href="'+e[a][0]+'">'+e[a][2]+'</a></span><a href="'+e[a][1]+'" class="right">继续阅读</a></p><p class="FPsectionThree-content-second"><span><a href="/author/'+e[a][4]+'/" class="g">'+e[a][4]+'</a></span><span class="line-between"></span><span><a href="javascript:removebook(\''+e[a][0]+'\')" class="g">删除</a></span></p><p class="FPsectionThree-content-forth">已读至：<span><a href="'+e[a][1]+'">'+e[a][3]+"</a></span></p></div>";t.innerHTML=o}function removebook(e){lastread.remove(e),showbook()}function report(e){$.ajax({type:"post",url:"/api/report.php",data:{title:e,url:window.location.href},success:function(e){"1"==e?alert("成功！\n我们会尽快处理！\n感谢您对本站的支持"):alert("失败！\n请联系网站管理员")}})}LastRead.prototype={set:function(e,t,o,a,s,n){if(e&&t&&o&&a&&s&&n){var i=e+"#"+t+"#"+o+"#"+a+"#"+s+"#"+n;this.setItem(e,i),this.setBook(e)}},get:function(e){return this.getItem(e)?this.getItem(e).split("#"):""},remove:function(e){this.removeItem(e),this.removeBook(e)},setBook:function(e){var t=new RegExp("(^|#)"+e),o=this.getItem(this.bookList);""==o?o=e:-1==o.search(t)?o+="#"+e:o.replace(t,"#"+e),this.setItem(this.bookList,o)},getBook:function(){var e=this.getItem(this.bookList)?this.getItem(this.bookList).split("#"):Array(),t=Array();if(e.length)for(var o=0;o<e.length;o++){var a=this.getItem(e[o]).split("#");o>e.length-(_num+1)?3<a.length&&t.push(a):lastread.remove(a[0])}return t},removeBook:function(e){var t=new RegExp("(^|#)"+e),o=this.getItem(this.bookList);o?-1!=o.search(t)&&(o=o.replace(t,"")):o="",this.setItem(this.bookList,o)},setItem:function(e,t){if(window.localStorage)localStorage.setItem(e,t);else{var o=new Date;o.setTime(o.getTime()+31104e6),document.cookie=e+"="+encodeURIComponent(t)+";expires="+o.toGMTString()+"; path=/"}},getItem:function(e){var t="",o="";window.localStorage?t=(o=window.localStorage.getItem(e))||"":(o=new RegExp("(^| )"+e+"=([^;]*)(;|$)").exec(document.cookie))&&(t=decodeURIComponent(o[2])||"");return t},removeItem:function(e){if(window.localStorage)window.localStorage.removeItem(e);else{var t=new Date;t.setTime(t.getTime()-1e3),document.cookie=e+"= ;expires="+t.toGMTString()}},removeAll:function(){if(window.localStorage)window.localStorage.clear();else{var e=this.getItem(this.bookList)?this.getItem(this.bookList).split("#"):Array();Array();if(e.length)for(i in e)this.removeItem(e[k]);this.removeItem(this.bookList)}}},window.lastread=new LastRead,function(){if(0<$("#intro").length&&!$("#intro").data("expand")){var e=$("#toggleIntro"),t=$("#intro .sectionTwo-content");85<parseInt(t.css("height"))?(t.height(85),e.html("展开全部")):e.hide(),e.on("click",function(){85==parseInt(t.css("height"))?(t.css({height:"auto"}),e.html("收起")):(t.height(85),e.html("展开全部"))})}var o=$("footer");0<o.length&&o.css({position:"static"})}();;
